(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38037aba","chunk-70900a3b"],{"25a5":function(t,e,r){!function(e,r){t.exports=r()}(0,(function(){"use strict";function t(t,n,i,a,o){!function t(r,n,i,a,o){for(;a>i;){if(a-i>600){var s=a-i+1,u=n-i+1,f=Math.log(s),c=.5*Math.exp(2*f/3),h=.5*Math.sqrt(f*c*(s-c)/s)*(u-s/2<0?-1:1),l=Math.max(i,Math.floor(n-u*c/s+h)),_=Math.min(a,Math.floor(n+(s-u)*c/s+h));t(r,n,l,_,o)}var p=r[n],d=i,m=a;for(e(r,i,n),o(r[a],p)>0&&e(r,i,a);d<m;){for(e(r,d,m),d++,m--;o(r[d],p)<0;)d++;for(;o(r[m],p)>0;)m--}0===o(r[i],p)?e(r,i,m):e(r,++m,a),m<=n&&(i=m+1),n<=m&&(a=m-1)}}(t,n,i||0,a||t.length-1,o||r)}function e(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function r(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function a(t,e){o(t,0,t.children.length,e,t)}function o(t,e,r,n,i){i||(i=p(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var a=e;a<r;a++){var o=t.children[a];s(i,t.leaf?n(o):o)}return i}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function f(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function l(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function _(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(e,r,n,i,a){for(var o=[r,n];o.length;)if(!((n=o.pop())-(r=o.pop())<=i)){var s=r+Math.ceil((n-r)/i/2)*i;t(e,s,r,n,a),o.push(r,s,s,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,r=[];if(!_(t,e))return r;for(var n=this.toBBox,i=[];e;){for(var a=0;a<e.children.length;a++){var o=e.children[a],s=e.leaf?n(o):o;_(t,s)&&(e.leaf?r.push(o):l(t,s)?this._all(o,r):i.push(o))}e=i.pop()}return r},n.prototype.collides=function(t){var e=this.data;if(!_(t,e))return!1;for(var r=[];e;){for(var n=0;n<e.children.length;n++){var i=e.children[n],a=e.leaf?this.toBBox(i):i;if(_(t,a)){if(e.leaf||l(t,a))return!0;r.push(i)}}e=r.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=p([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var r,n,a,o=this.data,s=this.toBBox(t),u=[],f=[];o||u.length;){if(o||(o=u.pop(),n=u[u.length-1],r=f.pop(),a=!0),o.leaf){var c=i(t,o.children,e);if(-1!==c)return o.children.splice(c,1),u.push(o),this._condense(u),this}a||o.leaf||!l(o,s)?n?(r++,o=n.children[r],a=!1):o=null:(u.push(o),f.push(r),r=0,n=o,o=o.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},n.prototype._build=function(t,e,r,n){var i,o=r-e+1,s=this._maxEntries;if(o<=s)return a(i=p(t.slice(e,r+1)),this.toBBox),i;n||(n=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,n-1))),(i=p([])).leaf=!1,i.height=n;var u=Math.ceil(o/s),f=u*Math.ceil(Math.sqrt(s));d(t,e,r,f,this.compareMinX);for(var c=e;c<=r;c+=f){var h=Math.min(c+f-1,r);d(t,c,h,u,this.compareMinY);for(var l=c;l<=h;l+=u){var _=Math.min(l+u-1,h);i.children.push(this._build(t,l,_,n-1))}}return a(i,this.toBBox),i},n.prototype._chooseSubtree=function(t,e,r,n){for(;n.push(e),!e.leaf&&n.length-1!==r;){for(var i=1/0,a=1/0,o=void 0,s=0;s<e.children.length;s++){var u=e.children[s],f=c(u),h=(l=t,_=u,(Math.max(_.maxX,l.maxX)-Math.min(_.minX,l.minX))*(Math.max(_.maxY,l.maxY)-Math.min(_.minY,l.minY))-f);h<a?(a=h,i=f<i?f:i,o=u):h===a&&f<i&&(i=f,o=u)}e=o||e.children[0]}var l,_;return e},n.prototype._insert=function(t,e,r){var n=r?t:this.toBBox(t),i=[],a=this._chooseSubtree(n,this.data,e,i);for(a.children.push(t),s(a,n);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(n,i,e)},n.prototype._split=function(t,e){var r=t[e],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var o=this._chooseSplitIndex(r,i,n),s=p(r.children.splice(o,r.children.length-o));s.height=r.height,s.leaf=r.leaf,a(r,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(r,s)},n.prototype._splitRoot=function(t,e){this.data=p([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,r){for(var n,i,a,s,u,f,h,l=1/0,_=1/0,p=e;p<=r-e;p++){var d=o(t,0,p,this.toBBox),m=o(t,p,r,this.toBBox),g=(i=d,a=m,s=void 0,u=void 0,f=void 0,h=void 0,s=Math.max(i.minX,a.minX),u=Math.max(i.minY,a.minY),f=Math.min(i.maxX,a.maxX),h=Math.min(i.maxY,a.maxY),Math.max(0,f-s)*Math.max(0,h-u)),v=c(d)+c(m);g<l?(l=g,n=p,_=v<_?v:_):g===l&&v<_&&(_=v,n=p)}return n||r-e},n.prototype._chooseSplitAxis=function(t,e,r){var n=t.leaf?this.compareMinX:u,i=t.leaf?this.compareMinY:f;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,i)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,r,n){t.children.sort(n);for(var i=this.toBBox,a=o(t,0,e,i),u=o(t,r-e,r,i),f=h(a)+h(u),c=e;c<r-e;c++){var l=t.children[c];s(a,t.leaf?i(l):l),f+=h(a)}for(var _=r-e-1;_>=e;_--){var p=t.children[_];s(u,t.leaf?i(p):p),f+=h(u)}return f},n.prototype._adjustParentBBoxes=function(t,e,r){for(var n=r;n>=0;n--)s(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,r=void 0;e>=0;e--)0===t[e].children.length?e>0?(r=t[e-1].children).splice(r.indexOf(t[e]),1):this.clear():a(t[e],this.toBBox)},n}))},"5e7e":function(t,e,r){"use strict";r.d(e,"b",(function(){return m})),r.d(e,"a",(function(){return g}));var n={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},i=r("da5c"),a=r("1300"),o="\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n",s="\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n",u=function(){function t(t){this.gl_=t.webGlContext;var e=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=e.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=e.createFramebuffer();var r=e.createShader(e.VERTEX_SHADER);e.shaderSource(r,t.vertexShader||o),e.compileShader(r);var n=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(n,t.fragmentShader||s),e.compileShader(n),this.renderTargetProgram_=e.createProgram(),e.attachShader(this.renderTargetProgram_,r),e.attachShader(this.renderTargetProgram_,n),e.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=e.createBuffer();var i=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];e.bindBuffer(e.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW),this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(r){this.uniforms_.push({value:t.uniforms[r],location:e.getUniformLocation(this.renderTargetProgram_,r)})}.bind(this))}return t.prototype.getGL=function(){return this.gl_},t.prototype.init=function(t){var e=this.getGL(),r=[e.drawingBufferWidth*this.scaleRatio_,e.drawingBufferHeight*this.scaleRatio_];if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;var n=0,i=e.RGBA,a=0,o=e.RGBA,s=e.UNSIGNED_BYTE,u=null;e.bindTexture(e.TEXTURE_2D,this.renderTargetTexture_),e.texImage2D(e.TEXTURE_2D,n,i,r[0],r[1],a,o,s,u),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.renderTargetTexture_,0)}},t.prototype.apply=function(t,e,r,n){var i=this.getGL(),o=t.size;if(i.bindFramebuffer(i.FRAMEBUFFER,e?e.getFrameBuffer():null),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.renderTargetTexture_),!e){var s=Object(a["c"])(i.canvas);if(!t.renderTargets[s]){var u=i.getContextAttributes();u&&u.preserveDrawingBuffer&&(i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT)),t.renderTargets[s]=!0}}i.enable(i.BLEND),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.bindBuffer(i.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),i.useProgram(this.renderTargetProgram_),i.enableVertexAttribArray(this.renderTargetAttribLocation_),i.vertexAttribPointer(this.renderTargetAttribLocation_,2,i.FLOAT,!1,0,0),i.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),i.uniform1i(this.renderTargetTextureLocation_,0);var f=t.layerStatesArray[t.layerIndex].opacity;i.uniform1f(this.renderTargetOpacityLocation_,f),this.applyUniforms(t),r&&r(i,t),i.drawArrays(i.TRIANGLES,0,6),n&&n(i,t)},t.prototype.getFrameBuffer=function(){return this.frameBuffer_},t.prototype.applyUniforms=function(t){var e,r=this.getGL(),n=1;this.uniforms_.forEach((function(i){if(e="function"===typeof i.value?i.value(t):i.value,e instanceof HTMLCanvasElement||e instanceof ImageData)i.texture||(i.texture=r.createTexture()),r.activeTexture(r["TEXTURE".concat(n)]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),e instanceof ImageData?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,e.width,e.height,0,r.UNSIGNED_BYTE,new Uint8Array(e.data)):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),r.uniform1i(i.location,n++);else if(Array.isArray(e))switch(e.length){case 2:return void r.uniform2f(i.location,e[0],e[1]);case 3:return void r.uniform3f(i.location,e[0],e[1],e[2]);case 4:return void r.uniform4f(i.location,e[0],e[1],e[2],e[3]);default:return}else"number"===typeof e&&r.uniform1f(i.location,e)}))},t}(),f=u,c=r("86e0"),h=r("38f3"),l=r("a896");function _(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function p(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}var d=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),m={PROJECTION_MATRIX:"u_projectionMatrix",OFFSET_SCALE_MATRIX:"u_offsetScaleMatrix",OFFSET_ROTATION_MATRIX:"u_offsetRotateMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution"},g={UNSIGNED_BYTE:c["g"],UNSIGNED_SHORT:c["i"],UNSIGNED_INT:c["h"],FLOAT:c["d"]},v={};function T(t){return"shared/"+t}var E=0;function x(){var t="unique/"+E;return E+=1,t}function y(t){var e=v[t];if(!e){var r=document.createElement("canvas");r.style.position="absolute",r.style.left="0",e={users:0,canvas:r},v[t]=e}return e.users+=1,e.canvas}function b(t){var e=v[t];if(e&&(e.users-=1,!(e.users>0))){var r=e.canvas,n=Object(c["j"])(r),i=n.getExtension("WEBGL_lose_context");i&&i.loseContext(),delete v[t]}}var R=function(t){function e(e){var r=t.call(this)||this,i=e||{};r.boundHandleWebGLContextLost_=r.handleWebGLContextLost.bind(r),r.boundHandleWebGLContextRestored_=r.handleWebGLContextRestored.bind(r),r.canvasCacheKey_=i.canvasCacheKey?T(i.canvasCacheKey):x(),r.canvas_=y(r.canvasCacheKey_),r.gl_=Object(c["j"])(r.canvas_),r.bufferCache_={},r.extensionCache_={},r.currentProgram_=null,r.canvas_.addEventListener(n.LOST,r.boundHandleWebGLContextLost_),r.canvas_.addEventListener(n.RESTORED,r.boundHandleWebGLContextRestored_),r.offsetRotateMatrix_=Object(l["c"])(),r.offsetScaleMatrix_=Object(l["c"])(),r.tmpMat4_=_(),r.uniformLocations_={},r.attribLocations_={},r.uniforms_=[],i.uniforms&&r.setUniforms(i.uniforms);var a=r.getGL();return r.postProcessPasses_=i.postProcesses?i.postProcesses.map((function(t){return new f({webGlContext:a,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})})):[new f({webGlContext:a})],r.shaderCompileErrors_=null,r.startTime_=Date.now(),r}return d(e,t),e.prototype.setUniforms=function(t){for(var e in this.uniforms_=[],t)this.uniforms_.push({name:e,value:t[e]});this.uniformLocations_={}},e.prototype.canvasCacheKeyMatches=function(t){return this.canvasCacheKey_===T(t)},e.prototype.getExtension=function(t){if(t in this.extensionCache_)return this.extensionCache_[t];var e=this.gl_.getExtension(t);return this.extensionCache_[t]=e,e},e.prototype.bindBuffer=function(t){var e=this.getGL(),r=Object(a["c"])(t),n=this.bufferCache_[r];if(!n){var i=e.createBuffer();n={buffer:t,webGlBuffer:i},this.bufferCache_[r]=n}e.bindBuffer(t.getType(),n.webGlBuffer)},e.prototype.flushBufferData=function(t){var e=this.getGL();this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())},e.prototype.deleteBuffer=function(t){var e=this.getGL(),r=Object(a["c"])(t),n=this.bufferCache_[r];n&&!e.isContextLost()&&e.deleteBuffer(n.webGlBuffer),delete this.bufferCache_[r]},e.prototype.disposeInternal=function(){this.canvas_.removeEventListener(n.LOST,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(n.RESTORED,this.boundHandleWebGLContextRestored_),b(this.canvasCacheKey_),delete this.gl_,delete this.canvas_},e.prototype.prepareDraw=function(t,e){var r=this.getGL(),n=this.getCanvas(),i=t.size,a=t.pixelRatio;n.width=i[0]*a,n.height=i[1]*a,n.style.width=i[0]+"px",n.style.height=i[1]+"px",r.useProgram(this.currentProgram_);for(var o=this.postProcessPasses_.length-1;o>=0;o--)this.postProcessPasses_[o].init(t);r.bindTexture(r.TEXTURE_2D,null),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,e?r.ZERO:r.ONE_MINUS_SRC_ALPHA),r.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.prepareDrawToRenderTarget=function(t,e,r){var n=this.getGL(),i=e.getSize();n.bindFramebuffer(n.FRAMEBUFFER,e.getFramebuffer()),n.viewport(0,0,i[0],i[1]),n.bindTexture(n.TEXTURE_2D,e.getTexture()),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,r?n.ZERO:n.ONE_MINUS_SRC_ALPHA),n.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.drawElements=function(t,e){var r=this.getGL();this.getExtension("OES_element_index_uint");var n=r.UNSIGNED_INT,i=4,a=e-t,o=t*i;r.drawElements(r.TRIANGLES,a,n,o)},e.prototype.finalizeDraw=function(t,e,r){for(var n=0,i=this.postProcessPasses_.length;n<i;n++)n===i-1?this.postProcessPasses_[n].apply(t,null,e,r):this.postProcessPasses_[n].apply(t,this.postProcessPasses_[n+1])},e.prototype.getCanvas=function(){return this.canvas_},e.prototype.getGL=function(){return this.gl_},e.prototype.applyFrameState=function(t){var e=t.size,r=t.viewState.rotation,n=Object(l["g"])(this.offsetScaleMatrix_);Object(l["i"])(n,2/e[0],2/e[1]);var i=Object(l["g"])(this.offsetRotateMatrix_);0!==r&&Object(l["h"])(i,-r),this.setUniformMatrixValue(m.OFFSET_SCALE_MATRIX,p(this.tmpMat4_,n)),this.setUniformMatrixValue(m.OFFSET_ROTATION_MATRIX,p(this.tmpMat4_,i)),this.setUniformFloatValue(m.TIME,.001*(Date.now()-this.startTime_)),this.setUniformFloatValue(m.ZOOM,t.viewState.zoom),this.setUniformFloatValue(m.RESOLUTION,t.viewState.resolution)},e.prototype.applyUniforms=function(t){var e,r=this.getGL(),n=0;this.uniforms_.forEach(function(i){if(e="function"===typeof i.value?i.value(t):i.value,e instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof ImageData){i.texture||(i.prevValue=void 0,i.texture=r.createTexture()),r.activeTexture(r["TEXTURE".concat(n)]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE);var a=!(e instanceof HTMLImageElement)||e.complete;a&&i.prevValue!==e&&(i.prevValue=e,r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e)),r.uniform1i(this.getUniformLocation(i.name),n++)}else if(Array.isArray(e)&&6===e.length)this.setUniformMatrixValue(i.name,p(this.tmpMat4_,e));else if(Array.isArray(e)&&e.length<=4)switch(e.length){case 2:return void r.uniform2f(this.getUniformLocation(i.name),e[0],e[1]);case 3:return void r.uniform3f(this.getUniformLocation(i.name),e[0],e[1],e[2]);case 4:return void r.uniform4f(this.getUniformLocation(i.name),e[0],e[1],e[2],e[3]);default:return}else"number"===typeof e&&r.uniform1f(this.getUniformLocation(i.name),e)}.bind(this))},e.prototype.useProgram=function(t){if(t==this.currentProgram_)return!1;var e=this.getGL();return e.useProgram(t),this.currentProgram_=t,this.uniformLocations_={},this.attribLocations_={},!0},e.prototype.compileShader=function(t,e){var r=this.getGL(),n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n},e.prototype.getProgram=function(t,e){var r=this.getGL(),n=this.compileShader(t,r.FRAGMENT_SHADER),i=this.compileShader(e,r.VERTEX_SHADER),a=r.createProgram();if(r.attachShader(a,n),r.attachShader(a,i),r.linkProgram(a),!r.getShaderParameter(n,r.COMPILE_STATUS)){var o="Fragment shader compliation failed: ".concat(r.getShaderInfoLog(n));throw new Error(o)}if(r.deleteShader(n),!r.getShaderParameter(i,r.COMPILE_STATUS)){o="Vertex shader compilation failed: ".concat(r.getShaderInfoLog(i));throw new Error(o)}if(r.deleteShader(i),!r.getProgramParameter(a,r.LINK_STATUS)){o="GL program linking failed: ".concat(r.getShaderInfoLog(i));throw new Error(o)}return a},e.prototype.getUniformLocation=function(t){return void 0===this.uniformLocations_[t]&&(this.uniformLocations_[t]=this.getGL().getUniformLocation(this.currentProgram_,t)),this.uniformLocations_[t]},e.prototype.getAttributeLocation=function(t){return void 0===this.attribLocations_[t]&&(this.attribLocations_[t]=this.getGL().getAttribLocation(this.currentProgram_,t)),this.attribLocations_[t]},e.prototype.makeProjectionTransform=function(t,e){var r=t.size,n=t.viewState.rotation,i=t.viewState.resolution,a=t.viewState.center;return Object(l["g"])(e),Object(l["b"])(e,0,0,2/(i*r[0]),2/(i*r[1]),-n,-a[0],-a[1]),e},e.prototype.setUniformFloatValue=function(t,e){this.getGL().uniform1f(this.getUniformLocation(t),e)},e.prototype.setUniformFloatVec4=function(t,e){this.getGL().uniform4fv(this.getUniformLocation(t),e)},e.prototype.setUniformMatrixValue=function(t,e){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,e)},e.prototype.enableAttributeArray_=function(t,e,r,n,i){var a=this.getAttributeLocation(t);a<0||(this.getGL().enableVertexAttribArray(a),this.getGL().vertexAttribPointer(a,e,r,!1,n,i))},e.prototype.enableAttributes=function(t){for(var e=A(t),r=0,n=0;n<t.length;n++){var i=t[n];this.enableAttributeArray_(i.name,i.size,i.type||c["d"],e,r),r+=i.size*L(i.type)}},e.prototype.handleWebGLContextLost=function(){Object(h["b"])(this.bufferCache_),this.currentProgram_=null},e.prototype.handleWebGLContextRestored=function(){},e.prototype.createTexture=function(t,e,r){var n=this.getGL(),i=r||n.createTexture(),a=0,o=n.RGBA,s=0,u=n.RGBA,f=n.UNSIGNED_BYTE;return n.bindTexture(n.TEXTURE_2D,i),e?n.texImage2D(n.TEXTURE_2D,a,o,u,f,e):n.texImage2D(n.TEXTURE_2D,a,o,t[0],t[1],s,u,f,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),i},e}(i["a"]);function A(t){for(var e=0,r=0;r<t.length;r++){var n=t[r];e+=n.size*L(n.type)}return e}function L(t){switch(t){case g.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case g.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case g.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case g.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}e["c"]=R},"7fd1":function(t,e,r){"use strict";(function(t){function n(){var e='var e="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t},n="GENERATE_BUFFERS",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,a){var u=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=a?a.vertexPosition:0,h=a?a.indexPosition:0,d=b/u;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=u,l,v,1),c.length&&i.set(c,b+3),o(i,b+=u,l,v,2),c.length&&i.set(c,b+3),o(i,b+=u,l,v,3),c.length&&i.set(c,b+3),b+=u,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o,s=r.customAttributesCount,a=2+s,u=new Float32Array(r.renderInstructions),l=u.length/a,v=4*l*(s+3),c=new Uint32Array(6*l),g=new Float32Array(v),b=0;b<u.length;b+=a)o=i(u,b,g,c,s,o);var h=e({vertexBuffer:g.buffer,indexBuffer:c.buffer,renderInstructions:u.buffer},r);f.postMessage(h,[g.buffer,c.buffer,u.buffer])}};';return new Worker("undefined"===typeof Blob?"data:application/javascript;base64,"+t.from(e,"binary").toString("base64"):URL.createObjectURL(new Blob([e],{type:"application/javascript"})))}r.d(e,"a",(function(){return n}))}).call(this,r("b639").Buffer)},"86e0":function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"c",(function(){return o})),r.d(e,"f",(function(){return s})),r.d(e,"e",(function(){return u})),r.d(e,"b",(function(){return f})),r.d(e,"g",(function(){return c})),r.d(e,"i",(function(){return h})),r.d(e,"h",(function(){return l})),r.d(e,"d",(function(){return _})),r.d(e,"j",(function(){return d}));var n=r("617d"),i=r("38f3"),a=34962,o=34963,s=35040,u=35044,f=35048,c=5121,h=5123,l=5125,_=5126,p=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function d(t,e){for(var r=Object(i["a"])({preserveDrawingBuffer:!0,antialias:!n["f"]},e),a=p.length,o=0;o<a;++o)try{var s=t.getContext(p[o],r);if(s)return s}catch(u){}return null}},aab2:function(t,e,r){"use strict";var n=r("86e0"),i=r("92fa"),a={STATIC_DRAW:n["e"],STREAM_DRAW:n["f"],DYNAMIC_DRAW:n["b"]},o=function(){function t(t,e){this.array=null,this.type=t,Object(i["a"])(t===n["a"]||t===n["c"],62),this.usage=void 0!==e?e:a.STATIC_DRAW}return t.prototype.ofSize=function(t){this.array=new(s(this.type))(t)},t.prototype.fromArray=function(t){var e=s(this.type);this.array=e.from?e.from(t):new e(t)},t.prototype.fromArrayBuffer=function(t){this.array=new(s(this.type))(t)},t.prototype.getType=function(){return this.type},t.prototype.getArray=function(){return this.array},t.prototype.getUsage=function(){return this.usage},t.prototype.getSize=function(){return this.array?this.array.length:0},t}();function s(t){switch(t){case n["a"]:return Float32Array;case n["c"]:return Uint32Array;default:return Float32Array}}e["a"]=o},d706:function(t,e,r){"use strict";var n=r("9f5e"),i=new Uint8Array(4),a=function(){function t(t,e){this.helper_=t;var r=t.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.size_=e||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}return t.prototype.setSize=function(t){Object(n["b"])(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())},t.prototype.getSize=function(){return this.size_},t.prototype.clearCachedData=function(){this.dataCacheDirty_=!0},t.prototype.readAll=function(){if(this.dataCacheDirty_){var t=this.size_,e=this.helper_.getGL();e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_},t.prototype.readPixel=function(t,e){if(t<0||e<0||t>this.size_[0]||e>=this.size_[1])return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i;this.readAll();var r=Math.floor(t)+(this.size_[1]-Math.floor(e)-1)*this.size_[0];return i[0]=this.data_[4*r],i[1]=this.data_[4*r+1],i[2]=this.data_[4*r+2],i[3]=this.data_[4*r+3],i},t.prototype.getTexture=function(){return this.texture_},t.prototype.getFramebuffer=function(){return this.framebuffer_},t.prototype.updateSize_=function(){var t=this.size_,e=this.helper_.getGL();this.texture_=this.helper_.createTexture(t,null,this.texture_),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.viewport(0,0,t[0],t[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture_,0),this.data_=new Uint8Array(t[0]*t[1]*4)},t}();e["a"]=a},da5d:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"c",(function(){return o})),r.d(e,"h",(function(){return s})),r.d(e,"d",(function(){return u})),r.d(e,"e",(function(){return f})),r.d(e,"f",(function(){return c})),r.d(e,"g",(function(){return l})),r.d(e,"i",(function(){return p})),r.d(e,"b",(function(){return m}));r("9f5e");function n(t,e){return m().createElementNS(t,e)}function i(t,e){return a(t,e,[]).join("")}function a(t,e,r){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?r.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):r.push(t.nodeValue);else{var n=void 0;for(n=t.firstChild;n;n=n.nextSibling)a(n,e,r)}return r}function o(t){return"documentElement"in t}function s(t){return(new DOMParser).parseFromString(t,"application/xml")}function u(t,e){return function(r,n){var i=t.call(void 0!==e?e:this,r,n);if(void 0!==i){var a=n[n.length-1];a.push(i)}}}function f(t,e,r){return function(n,i){var a=t.call(void 0!==r?r:this,n,i);if(void 0!==a){var o=i[i.length-1],s=void 0!==e?e:n.localName,u=void 0;s in o?u=o[s]:(u=[],o[s]=u),u.push(a)}}}function c(t,e,r){return function(n,i){var a=t.call(void 0!==r?r:this,n,i);if(void 0!==a){var o=i[i.length-1],s=void 0!==e?e:n.localName;o[s]=a}}}function h(t,e){var r=t;return function(t,i,a){var o=i[i.length-1],s=o.node,u=r;void 0===u&&(u=a);var f=void 0!==e?e:s.namespaceURI;return n(f,u)}}h();function l(t,e,r){var n,i,a=void 0!==r?r:{};for(n=0,i=t.length;n<i;++n)a[t[n]]=e;return a}function _(t,e,r,n){var i;for(i=e.firstElementChild;i;i=i.nextElementSibling){var a=t[i.namespaceURI];if(void 0!==a){var o=a[i.localName];void 0!==o&&o.call(n,i,r)}}}function p(t,e,r,n,i){return n.push(t),_(e,r,n,i),n.pop()}var d=void 0;function m(){return void 0===d&&"undefined"!==typeof document&&(d=document.implementation.createDocument("","",null)),d}},ed22:function(t,e){
/*! http://mths.be/repeat v0.2.0 by @mathias */
String.prototype.repeat||function(){"use strict";var t=function(){try{var t={},e=Object.defineProperty,r=e(t,t,t)&&e}catch(n){}return r}(),e=function(t){if(null==this)throw TypeError();var e=String(this),r=t?Number(t):0;if(r!=r&&(r=0),r<0||r==1/0)throw RangeError();var n="";while(r)r%2==1&&(n+=e),r>1&&(e+=e),r>>=1;return n};t?t(String.prototype,"repeat",{value:e,configurable:!0,writable:!0}):String.prototype.repeat=e}()}}]);
//# sourceMappingURL=chunk-38037aba.4b3dd9d0.js.map