(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b63012a2","chunk-b63012a2","chunk-b63012a2"],{"30d1":function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return f})),r.d(t,"d",(function(){return d}));var n=r("3749"),i=r("f623"),a=r("869f"),s=r("1300"),o=.5,u={Point:m,LineString:v,Polygon:E,MultiPoint:b,MultiLineString:y,MultiPolygon:T,GeometryCollection:_,Circle:l};function c(e,t){return parseInt(Object(s["c"])(e),10)-parseInt(Object(s["c"])(t),10)}function h(e,t){var r=f(e,t);return r*r}function f(e,t){return o*e/t}function l(e,t,r,i,a){var s=r.getFill(),o=r.getStroke();if(s||o){var u=e.getBuilder(r.getZIndex(),n["a"].CIRCLE);u.setFillStrokeStyle(s,o),u.drawCircle(t,i)}var c=r.getText();if(c&&c.getText()){var h=(a||e).getBuilder(r.getZIndex(),n["a"].TEXT);h.setTextStyle(c),h.drawText(t,i)}}function d(e,t,r,n,i,s,o){var u=!1,c=r.getImage();if(c){var h=c.getImageState();h==a["a"].LOADED||h==a["a"].ERROR?c.unlistenImageChange(i):(h==a["a"].IDLE&&c.load(),h=c.getImageState(),c.listenImageChange(i),u=!0)}return g(e,t,r,n,s,o),u}function g(e,t,r,n,i,a){var s=r.getGeometryFunction()(t);if(s){var o=s.simplifyTransformed(n,i),c=r.getRenderer();if(c)p(e,o,r,t);else{var h=u[o.getType()];h(e,o,r,t,a)}}}function p(e,t,r,a){if(t.getType()!=i["a"].GEOMETRY_COLLECTION){var s=e.getBuilder(r.getZIndex(),n["a"].DEFAULT);s.drawCustom(t,a,r.getRenderer())}else for(var o=t.getGeometries(),u=0,c=o.length;u<c;++u)p(e,o[u],r,a)}function _(e,t,r,n,i){var a,s,o=t.getGeometriesArray();for(a=0,s=o.length;a<s;++a){var c=u[o[a].getType()];c(e,o[a],r,n,i)}}function v(e,t,r,i,a){var s=r.getStroke();if(s){var o=e.getBuilder(r.getZIndex(),n["a"].LINE_STRING);o.setFillStrokeStyle(null,s),o.drawLineString(t,i)}var u=r.getText();if(u&&u.getText()){var c=(a||e).getBuilder(r.getZIndex(),n["a"].TEXT);c.setTextStyle(u),c.drawText(t,i)}}function y(e,t,r,i,a){var s=r.getStroke();if(s){var o=e.getBuilder(r.getZIndex(),n["a"].LINE_STRING);o.setFillStrokeStyle(null,s),o.drawMultiLineString(t,i)}var u=r.getText();if(u&&u.getText()){var c=(a||e).getBuilder(r.getZIndex(),n["a"].TEXT);c.setTextStyle(u),c.drawText(t,i)}}function T(e,t,r,i,a){var s=r.getFill(),o=r.getStroke();if(o||s){var u=e.getBuilder(r.getZIndex(),n["a"].POLYGON);u.setFillStrokeStyle(s,o),u.drawMultiPolygon(t,i)}var c=r.getText();if(c&&c.getText()){var h=(a||e).getBuilder(r.getZIndex(),n["a"].TEXT);h.setTextStyle(c),h.drawText(t,i)}}function m(e,t,r,i,s){var o,u=r.getImage(),c=r.getText();if(s&&(e=s,o=u&&c&&c.getText()?{}:void 0),u){if(u.getImageState()!=a["a"].LOADED)return;var h=e.getBuilder(r.getZIndex(),n["a"].IMAGE);h.setImageStyle(u,o),h.drawPoint(t,i)}if(c&&c.getText()){var f=e.getBuilder(r.getZIndex(),n["a"].TEXT);f.setTextStyle(c,o),f.drawText(t,i)}}function b(e,t,r,i,s){var o,u=r.getImage(),c=r.getText();if(s&&(e=s,o=u&&c&&c.getText()?{}:void 0),u){if(u.getImageState()!=a["a"].LOADED)return;var h=e.getBuilder(r.getZIndex(),n["a"].IMAGE);h.setImageStyle(u,o),h.drawMultiPoint(t,i)}if(c&&c.getText()){var f=(s||e).getBuilder(r.getZIndex(),n["a"].TEXT);f.setTextStyle(c,o),f.drawText(t,i)}}function E(e,t,r,i,a){var s=r.getFill(),o=r.getStroke();if(s||o){var u=e.getBuilder(r.getZIndex(),n["a"].POLYGON);u.setFillStrokeStyle(s,o),u.drawPolygon(t,i)}var c=r.getText();if(c&&c.getText()){var h=(a||e).getBuilder(r.getZIndex(),n["a"].TEXT);h.setTextStyle(c),h.drawText(t,i)}}},ac3a:function(e,t,r){"use strict";var n=r("ae50"),i=r("f623"),a=r("a43f"),s=r("496f"),o=r("aab2"),u=r("faf4"),c=r("3333"),h=r("070d"),f=r("5e7e"),l=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),d={GENERATE_BUFFERS:"GENERATE_BUFFERS"},g=function(e){function t(t,r){var n=e.call(this,t)||this,i=r||{};return n.helper=new f["c"]({postProcesses:i.postProcesses,uniforms:i.uniforms}),void 0!==i.className&&(n.helper.getCanvas().className=i.className),n}return l(t,e),t.prototype.disposeInternal=function(){this.helper.dispose(),e.prototype.disposeInternal.call(this)},t.prototype.dispatchRenderEvent_=function(e,t){var r=this.getLayer();if(r.hasListener(e)){var n=new c["a"](e,null,t,null);r.dispatchEvent(n)}},t.prototype.preRender=function(e){this.dispatchRenderEvent_(h["a"].PRERENDER,e)},t.prototype.postRender=function(e){this.dispatchRenderEvent_(h["a"].POSTRENDER,e)},t}(u["a"]);function p(e,t){var r=t||[],n=256,i=n-1;return r[0]=Math.floor(e/n/n/n)/i,r[1]=Math.floor(e/n/n)%n/i,r[2]=Math.floor(e/n)%n/i,r[3]=e%n/i,r}function _(e){var t=0,r=256,n=r-1;return t+=Math.round(e[0]*r*r*r*n),t+=Math.round(e[1]*r*r*n),t+=Math.round(e[2]*r*n),t+=Math.round(e[3]*n),t}var v=g,y=r("d706"),T=r("86e0"),m=r("a896"),b=r("92fa"),E=r("0af5"),I=r("7fd1"),R=r("1300"),S=r("1e8d"),x=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),A=function(e){function t(t,r){var n=this,i=r.uniforms||{},s=Object(m["c"])();i[f["b"].PROJECTION_MATRIX]=s,n=e.call(this,t,{className:r.className,uniforms:i,postProcesses:r.postProcesses})||this,n.sourceRevision_=-1,n.verticesBuffer_=new o["a"](T["a"],T["b"]),n.hitVerticesBuffer_=new o["a"](T["a"],T["b"]),n.indicesBuffer_=new o["a"](T["c"],T["b"]),n.program_=n.helper.getProgram(r.fragmentShader,r.vertexShader),n.hitDetectionEnabled_=!(!r.hitFragmentShader||!r.hitVertexShader),n.hitProgram_=n.hitDetectionEnabled_&&n.helper.getProgram(r.hitFragmentShader,r.hitVertexShader);var u=r.attributes?r.attributes.map((function(e){return{name:"a_"+e.name,size:1,type:f["a"].FLOAT}})):[];n.attributes=[{name:"a_position",size:2,type:f["a"].FLOAT},{name:"a_index",size:1,type:f["a"].FLOAT}].concat(u),n.hitDetectionAttributes=[{name:"a_position",size:2,type:f["a"].FLOAT},{name:"a_index",size:1,type:f["a"].FLOAT},{name:"a_hitColor",size:4,type:f["a"].FLOAT},{name:"a_featureUid",size:1,type:f["a"].FLOAT}].concat(u),n.customAttributes=r.attributes?r.attributes:[],n.previousExtent_=Object(E["j"])(),n.currentTransform_=s,n.renderTransform_=Object(m["c"])(),n.invertRenderTransform_=Object(m["c"])(),n.renderInstructions_=new Float32Array(0),n.hitRenderInstructions_=new Float32Array(0),n.hitRenderTarget_=n.hitDetectionEnabled_&&new y["a"](n.helper),n.worker_=Object(I["a"])(),n.worker_.addEventListener("message",function(e){var t=e.data;if(t.type===d.GENERATE_BUFFERS){var r=t.projectionTransform;t.hitDetection?(this.hitVerticesBuffer_.fromArrayBuffer(t.vertexBuffer),this.helper.flushBufferData(this.hitVerticesBuffer_)):(this.verticesBuffer_.fromArrayBuffer(t.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_)),this.indicesBuffer_.fromArrayBuffer(t.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=r,Object(m["d"])(this.invertRenderTransform_,this.renderTransform_),t.hitDetection?this.hitRenderInstructions_=new Float32Array(e.data.renderInstructions):this.renderInstructions_=new Float32Array(e.data.renderInstructions),this.getLayer().changed()}}.bind(n)),n.featureCache_={},n.featureCount_=0;var c=n.getLayer().getSource();return n.sourceListenKeys_=[Object(S["a"])(c,a["a"].ADDFEATURE,n.handleSourceFeatureAdded_,n),Object(S["a"])(c,a["a"].CHANGEFEATURE,n.handleSourceFeatureChanged_,n),Object(S["a"])(c,a["a"].REMOVEFEATURE,n.handleSourceFeatureDelete_,n),Object(S["a"])(c,a["a"].CLEAR,n.handleSourceFeatureClear_,n)],c.forEachFeature(function(e){this.featureCache_[Object(R["c"])(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.featureCount_++}.bind(n)),n}return x(t,e),t.prototype.handleSourceFeatureAdded_=function(e){var t=e.feature;this.featureCache_[Object(R["c"])(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++},t.prototype.handleSourceFeatureChanged_=function(e){var t=e.feature;this.featureCache_[Object(R["c"])(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()}},t.prototype.handleSourceFeatureDelete_=function(e){var t=e.feature;delete this.featureCache_[Object(R["c"])(t)],this.featureCount_--},t.prototype.handleSourceFeatureClear_=function(){this.featureCache_={},this.featureCount_=0},t.prototype.renderFrame=function(e){this.preRender(e);var t=this.indicesBuffer_.getSize();this.helper.drawElements(0,t),this.helper.finalizeDraw(e);var r=this.helper.getCanvas(),n=e.layerStatesArray[e.layerIndex],i=n.opacity;return i!==parseFloat(r.style.opacity)&&(r.style.opacity=String(i)),this.hitDetectionEnabled_&&(this.renderHitDetection(e),this.hitRenderTarget_.clearCachedData()),this.postRender(e),r},t.prototype.prepareFrame=function(e){var t=this.getLayer(),r=t.getSource(),i=e.viewState,a=!e.viewHints[s["a"].ANIMATING]&&!e.viewHints[s["a"].INTERACTING],o=!Object(E["o"])(this.previousExtent_,e.extent),u=this.sourceRevision_<r.getRevision();if(u&&(this.sourceRevision_=r.getRevision()),a&&(o||u)){var c=i.projection,h=i.resolution,f=t instanceof n["a"]?t.getRenderBuffer():0,l=Object(E["c"])(e.extent,f*h);r.loadFeatures(l,h,c),this.rebuildBuffers_(e),this.previousExtent_=e.extent.slice()}return this.helper.makeProjectionTransform(e,this.currentTransform_),Object(m["f"])(this.currentTransform_,this.invertRenderTransform_),this.helper.useProgram(this.program_),this.helper.prepareDraw(e),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0},t.prototype.rebuildBuffers_=function(e){var t=Object(m["c"])();this.helper.makeProjectionTransform(e,t);var r,n,a=(2+this.customAttributes.length)*this.featureCount_;if(this.renderInstructions_&&this.renderInstructions_.length===a||(this.renderInstructions_=new Float32Array(a)),this.hitDetectionEnabled_){var s=(7+this.customAttributes.length)*this.featureCount_;this.hitRenderInstructions_&&this.hitRenderInstructions_.length===s||(this.hitRenderInstructions_=new Float32Array(s))}var o,u=[],c=[],h=0,f=0;for(var l in this.featureCache_)if(r=this.featureCache_[l],n=r.geometry,n&&n.getType()===i["a"].POINT){u[0]=n.getFlatCoordinates()[0],u[1]=n.getFlatCoordinates()[1],Object(m["a"])(t,u),o=p(f+6,c),this.renderInstructions_[h++]=u[0],this.renderInstructions_[h++]=u[1],this.hitDetectionEnabled_&&(this.hitRenderInstructions_[f++]=u[0],this.hitRenderInstructions_[f++]=u[1],this.hitRenderInstructions_[f++]=o[0],this.hitRenderInstructions_[f++]=o[1],this.hitRenderInstructions_[f++]=o[2],this.hitRenderInstructions_[f++]=o[3],this.hitRenderInstructions_[f++]=Number(l));for(var g=void 0,_=0;_<this.customAttributes.length;_++)g=this.customAttributes[_].callback(r.feature,r.properties),this.renderInstructions_[h++]=g,this.hitDetectionEnabled_&&(this.hitRenderInstructions_[f++]=g)}var v={type:d.GENERATE_BUFFERS,renderInstructions:this.renderInstructions_.buffer,customAttributesCount:this.customAttributes.length};if(v["projectionTransform"]=t,this.worker_.postMessage(v,[this.renderInstructions_.buffer]),this.renderInstructions_=null,this.hitDetectionEnabled_){var y={type:d.GENERATE_BUFFERS,renderInstructions:this.hitRenderInstructions_.buffer,customAttributesCount:5+this.customAttributes.length};y["projectionTransform"]=t,y["hitDetection"]=!0,this.worker_.postMessage(y,[this.hitRenderInstructions_.buffer]),this.hitRenderInstructions_=null}},t.prototype.forEachFeatureAtCoordinate=function(e,t,r,n,i){if(Object(b["a"])(this.hitDetectionEnabled_,66),this.hitRenderInstructions_){var a=Object(m["a"])(t.coordinateToPixelTransform,e.slice()),s=this.hitRenderTarget_.readPixel(a[0]/2,a[1]/2),o=[s[0]/255,s[1]/255,s[2]/255,s[3]/255],u=_(o),c=this.hitRenderInstructions_[u],h=Math.floor(c).toString(),f=this.getLayer().getSource(),l=f.getFeatureByUid(h);return l?n(l,this.getLayer(),null):void 0}},t.prototype.renderHitDetection=function(e){if(this.hitVerticesBuffer_.getSize()){this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.useProgram(this.hitProgram_),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0),this.helper.bindBuffer(this.hitVerticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.hitDetectionAttributes);var t=this.indicesBuffer_.getSize();this.helper.drawElements(0,t)}},t.prototype.disposeInternal=function(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach((function(e){Object(S["c"])(e)})),this.sourceListenKeys_=null,e.prototype.disposeInternal.call(this)},t}(v);t["a"]=A}}]);
//# sourceMappingURL=chunk-b63012a2.35cd3e90.js.map