(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6251d9eb"],{1939:function(t,e,r){"use strict";var n=r("e134"),i=r("0ec0"),a=r("01d4"),o=r("7f98"),s=r("2efc"),u=r("acc1"),f=r("aab2"),c=r("86e0"),h=r("0b0e"),_=r("38f3"),l=r("0999"),T=r("345d"),E=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function d(t,e,r){var n=r?t.LINEAR:t.NEAREST;t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)}function g(t,e,r,n){d(t,e,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}function p(t,e,r,n,i,a){var o,s,u=t.getGL();if(r instanceof Float32Array){o=u.FLOAT,t.getExtension("OES_texture_float");var f=t.getExtension("OES_texture_float_linear");s=null!==f}else o=u.UNSIGNED_BYTE,s=!0;d(u,e,a&&s);var c,h=r.byteLength/n[1],_=1;switch(h%8===0?_=8:h%4===0?_=4:h%2===0&&(_=2),i){case 1:c=u.LUMINANCE;break;case 2:c=u.LUMINANCE_ALPHA;break;case 3:c=u.RGB;break;case 4:c=u.RGBA;break;default:throw new Error("Unsupported number of bands: ".concat(i))}var l=u.getParameter(u.UNPACK_ALIGNMENT);u.pixelStorei(u.UNPACK_ALIGNMENT,_),u.texImage2D(u.TEXTURE_2D,0,c,n[0],n[1],0,c,o,r),u.pixelStorei(u.UNPACK_ALIGNMENT,l)}var m=null;function v(){var t=document.createElement("canvas");t.width=1,t.height=1,m=t.getContext("2d")}var b=function(t){function e(e){var r=t.call(this)||this;r.tile,r.textures=[],r.handleTileChange_=r.handleTileChange_.bind(r),r.size=Object(T["c"])(e.grid.getTileSize(e.tile.tileCoord[0])),r.tilePixelRatio_=e.tilePixelRatio||1,r.gutter_=e.gutter||0,r.bandCount=NaN,r.helper_=e.helper;var n=new f["a"](c["a"],c["e"]);return n.fromArray([0,1,1,1,1,0,0,0]),r.helper_.flushBufferData(n),r.coords=n,r.setTile(e.tile),r}return E(e,t),e.prototype.setTile=function(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(a["a"].CHANGE,this.handleTileChange_),this.tile=t,this.textures.length=0,this.loaded=t.getState()===u["a"].LOADED,this.loaded)this.uploadTile_();else{if(t instanceof o["a"]){var e=t.getImage();e instanceof Image&&!e.crossOrigin&&(e.crossOrigin="anonymous")}t.addEventListener(a["a"].CHANGE,this.handleTileChange_)}},e.prototype.uploadTile_=function(){var t=this.helper_,e=t.getGL(),r=this.tile;if(r instanceof o["a"]||r instanceof s["a"]){var n=r.getImage();if(0!==this.gutter_){var i=this.tilePixelRatio_*this.gutter_,a=Math.round(n.width-2*i),u=Math.round(n.height-2*i),f=Object(l["a"])(a,u);r.interpolate||Object(_["a"])(f,h["a"]),f.drawImage(n,i,i,a,u,0,0,a,u),n=f.canvas}var c=e.createTexture();return this.textures.push(c),this.bandCount=4,void g(e,c,n,r.interpolate)}var T=[this.size[0]*this.tilePixelRatio_,this.size[1]*this.tilePixelRatio_],E=r.getData(),d=E instanceof Float32Array,m=T[0]*T[1],v=d?Float32Array:Uint8Array,b=v.BYTES_PER_ELEMENT,R=E.byteLength/T[1];this.bandCount=Math.floor(R/b/T[0]);var y=Math.ceil(this.bandCount/4);if(1===y){c=e.createTexture();return this.textures.push(c),void p(t,c,E,T,this.bandCount,r.interpolate)}for(var x=new Array(y),A=0;A<y;++A){c=e.createTexture();this.textures.push(c);var L=A<y-1?4:this.bandCount%4;x[A]=new v(m*L)}for(var U=0,S=0,P=T[0]*this.bandCount,D=0;D<T[1];++D){for(var C=0;C<P;++C){var O=E[S+C],N=Math.floor(U/this.bandCount),G=C%this.bandCount,I=(A=Math.floor(G/4),x[A]),w=(L=I.length/m,G%4);I[N*L+w]=O,++U}S+=R/b}for(A=0;A<y;++A){c=this.textures[A],I=x[A],L=I.length/m;p(t,c,I,T,L,r.interpolate)}},e.prototype.handleTileChange_=function(){this.tile.getState()===u["a"].LOADED&&(this.loaded=!0,this.uploadTile_(),this.dispatchEvent(a["a"].CHANGE))},e.prototype.disposeInternal=function(){var t=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(var e=0;e<this.textures.length;++e)t.deleteTexture(this.textures[e]);this.tile.removeEventListener(a["a"].CHANGE,this.handleTileChange_)},e.prototype.getPixelData=function(t,e){if(!this.loaded)return null;if(t=Math.floor(this.tilePixelRatio_*t),e=Math.floor(this.tilePixelRatio_*e),this.tile instanceof n["a"]){var r=this.tile.getData(),i=Math.floor(this.tilePixelRatio_*this.size[0]);if(r instanceof DataView){var a=r.byteLength/(this.size[0]*this.size[1]),o=e*i*a+t*a,s=r.buffer.slice(o,o+a);return new DataView(s)}var u=e*i*this.bandCount+t*this.bandCount;return r.slice(u,u+this.bandCount)}var f;m||v(),m.clearRect(0,0,1,1);var c=this.tile.getImage();try{m.drawImage(c,t,e,1,1,0,0,1,1),f=m.getImageData(0,0,1,1).data}catch(h){return null}return f},e}(i["a"]);e["a"]=b},"5e7e":function(t,e,r){"use strict";r.d(e,"b",(function(){return E})),r.d(e,"a",(function(){return d}));var n={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},i=r("da5c"),a=r("1300"),o="\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n",s="\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n",u=function(){function t(t){this.gl_=t.webGlContext;var e=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=e.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=e.createFramebuffer();var r=e.createShader(e.VERTEX_SHADER);e.shaderSource(r,t.vertexShader||o),e.compileShader(r);var n=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(n,t.fragmentShader||s),e.compileShader(n),this.renderTargetProgram_=e.createProgram(),e.attachShader(this.renderTargetProgram_,r),e.attachShader(this.renderTargetProgram_,n),e.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=e.createBuffer();var i=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];e.bindBuffer(e.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW),this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(r){this.uniforms_.push({value:t.uniforms[r],location:e.getUniformLocation(this.renderTargetProgram_,r)})}.bind(this))}return t.prototype.getGL=function(){return this.gl_},t.prototype.init=function(t){var e=this.getGL(),r=[e.drawingBufferWidth*this.scaleRatio_,e.drawingBufferHeight*this.scaleRatio_];if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;var n=0,i=e.RGBA,a=0,o=e.RGBA,s=e.UNSIGNED_BYTE,u=null;e.bindTexture(e.TEXTURE_2D,this.renderTargetTexture_),e.texImage2D(e.TEXTURE_2D,n,i,r[0],r[1],a,o,s,u),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.renderTargetTexture_,0)}},t.prototype.apply=function(t,e,r,n){var i=this.getGL(),o=t.size;if(i.bindFramebuffer(i.FRAMEBUFFER,e?e.getFrameBuffer():null),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.renderTargetTexture_),!e){var s=Object(a["c"])(i.canvas);if(!t.renderTargets[s]){var u=i.getContextAttributes();u&&u.preserveDrawingBuffer&&(i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT)),t.renderTargets[s]=!0}}i.enable(i.BLEND),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.bindBuffer(i.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),i.useProgram(this.renderTargetProgram_),i.enableVertexAttribArray(this.renderTargetAttribLocation_),i.vertexAttribPointer(this.renderTargetAttribLocation_,2,i.FLOAT,!1,0,0),i.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),i.uniform1i(this.renderTargetTextureLocation_,0);var f=t.layerStatesArray[t.layerIndex].opacity;i.uniform1f(this.renderTargetOpacityLocation_,f),this.applyUniforms(t),r&&r(i,t),i.drawArrays(i.TRIANGLES,0,6),n&&n(i,t)},t.prototype.getFrameBuffer=function(){return this.frameBuffer_},t.prototype.applyUniforms=function(t){var e,r=this.getGL(),n=1;this.uniforms_.forEach((function(i){if(e="function"===typeof i.value?i.value(t):i.value,e instanceof HTMLCanvasElement||e instanceof ImageData)i.texture||(i.texture=r.createTexture()),r.activeTexture(r["TEXTURE".concat(n)]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),e instanceof ImageData?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,e.width,e.height,0,r.UNSIGNED_BYTE,new Uint8Array(e.data)):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),r.uniform1i(i.location,n++);else if(Array.isArray(e))switch(e.length){case 2:return void r.uniform2f(i.location,e[0],e[1]);case 3:return void r.uniform3f(i.location,e[0],e[1],e[2]);case 4:return void r.uniform4f(i.location,e[0],e[1],e[2],e[3]);default:return}else"number"===typeof e&&r.uniform1f(i.location,e)}))},t}(),f=u,c=r("86e0"),h=r("38f3"),_=r("a896"),l=r("be6c"),T=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),E={PROJECTION_MATRIX:"u_projectionMatrix",OFFSET_SCALE_MATRIX:"u_offsetScaleMatrix",OFFSET_ROTATION_MATRIX:"u_offsetRotateMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution"},d={UNSIGNED_BYTE:c["g"],UNSIGNED_SHORT:c["i"],UNSIGNED_INT:c["h"],FLOAT:c["d"]},g={};function p(t){return"shared/"+t}var m=0;function v(){var t="unique/"+m;return m+=1,t}function b(t){var e=g[t];if(!e){var r=document.createElement("canvas");r.style.position="absolute",r.style.left="0",e={users:0,canvas:r},g[t]=e}return e.users+=1,e.canvas}function R(t){var e=g[t];if(e&&(e.users-=1,!(e.users>0))){var r=e.canvas,n=Object(c["j"])(r),i=n.getExtension("WEBGL_lose_context");i&&i.loseContext(),delete g[t]}}var y=function(t){function e(e){var r=t.call(this)||this,i=e||{};r.boundHandleWebGLContextLost_=r.handleWebGLContextLost.bind(r),r.boundHandleWebGLContextRestored_=r.handleWebGLContextRestored.bind(r),r.canvasCacheKey_=i.canvasCacheKey?p(i.canvasCacheKey):v(),r.canvas_=b(r.canvasCacheKey_),r.gl_=Object(c["j"])(r.canvas_),r.bufferCache_={},r.extensionCache_={},r.currentProgram_=null,r.canvas_.addEventListener(n.LOST,r.boundHandleWebGLContextLost_),r.canvas_.addEventListener(n.RESTORED,r.boundHandleWebGLContextRestored_),r.offsetRotateMatrix_=Object(_["c"])(),r.offsetScaleMatrix_=Object(_["c"])(),r.tmpMat4_=Object(l["a"])(),r.uniformLocations_={},r.attribLocations_={},r.uniforms_=[],i.uniforms&&r.setUniforms(i.uniforms);var a=r.getGL();return r.postProcessPasses_=i.postProcesses?i.postProcesses.map((function(t){return new f({webGlContext:a,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})})):[new f({webGlContext:a})],r.shaderCompileErrors_=null,r.startTime_=Date.now(),r}return T(e,t),e.prototype.setUniforms=function(t){for(var e in this.uniforms_=[],t)this.uniforms_.push({name:e,value:t[e]});this.uniformLocations_={}},e.prototype.canvasCacheKeyMatches=function(t){return this.canvasCacheKey_===p(t)},e.prototype.getExtension=function(t){if(t in this.extensionCache_)return this.extensionCache_[t];var e=this.gl_.getExtension(t);return this.extensionCache_[t]=e,e},e.prototype.bindBuffer=function(t){var e=this.getGL(),r=Object(a["c"])(t),n=this.bufferCache_[r];if(!n){var i=e.createBuffer();n={buffer:t,webGlBuffer:i},this.bufferCache_[r]=n}e.bindBuffer(t.getType(),n.webGlBuffer)},e.prototype.flushBufferData=function(t){var e=this.getGL();this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())},e.prototype.deleteBuffer=function(t){var e=this.getGL(),r=Object(a["c"])(t),n=this.bufferCache_[r];n&&!e.isContextLost()&&e.deleteBuffer(n.webGlBuffer),delete this.bufferCache_[r]},e.prototype.disposeInternal=function(){this.canvas_.removeEventListener(n.LOST,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(n.RESTORED,this.boundHandleWebGLContextRestored_),R(this.canvasCacheKey_),delete this.gl_,delete this.canvas_},e.prototype.prepareDraw=function(t,e){var r=this.getGL(),n=this.getCanvas(),i=t.size,a=t.pixelRatio;n.width=i[0]*a,n.height=i[1]*a,n.style.width=i[0]+"px",n.style.height=i[1]+"px",r.useProgram(this.currentProgram_);for(var o=this.postProcessPasses_.length-1;o>=0;o--)this.postProcessPasses_[o].init(t);r.bindTexture(r.TEXTURE_2D,null),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,e?r.ZERO:r.ONE_MINUS_SRC_ALPHA),r.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.prepareDrawToRenderTarget=function(t,e,r){var n=this.getGL(),i=e.getSize();n.bindFramebuffer(n.FRAMEBUFFER,e.getFramebuffer()),n.viewport(0,0,i[0],i[1]),n.bindTexture(n.TEXTURE_2D,e.getTexture()),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,r?n.ZERO:n.ONE_MINUS_SRC_ALPHA),n.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.drawElements=function(t,e){var r=this.getGL();this.getExtension("OES_element_index_uint");var n=r.UNSIGNED_INT,i=4,a=e-t,o=t*i;r.drawElements(r.TRIANGLES,a,n,o)},e.prototype.finalizeDraw=function(t,e,r){for(var n=0,i=this.postProcessPasses_.length;n<i;n++)n===i-1?this.postProcessPasses_[n].apply(t,null,e,r):this.postProcessPasses_[n].apply(t,this.postProcessPasses_[n+1])},e.prototype.getCanvas=function(){return this.canvas_},e.prototype.getGL=function(){return this.gl_},e.prototype.applyFrameState=function(t){var e=t.size,r=t.viewState.rotation,n=Object(_["g"])(this.offsetScaleMatrix_);Object(_["i"])(n,2/e[0],2/e[1]);var i=Object(_["g"])(this.offsetRotateMatrix_);0!==r&&Object(_["h"])(i,-r),this.setUniformMatrixValue(E.OFFSET_SCALE_MATRIX,Object(l["b"])(this.tmpMat4_,n)),this.setUniformMatrixValue(E.OFFSET_ROTATION_MATRIX,Object(l["b"])(this.tmpMat4_,i)),this.setUniformFloatValue(E.TIME,.001*(Date.now()-this.startTime_)),this.setUniformFloatValue(E.ZOOM,t.viewState.zoom),this.setUniformFloatValue(E.RESOLUTION,t.viewState.resolution)},e.prototype.applyUniforms=function(t){var e,r=this.getGL(),n=0;this.uniforms_.forEach(function(i){if(e="function"===typeof i.value?i.value(t):i.value,e instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof ImageData){i.texture||(i.prevValue=void 0,i.texture=r.createTexture()),r.activeTexture(r["TEXTURE".concat(n)]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE);var a=!(e instanceof HTMLImageElement)||e.complete;a&&i.prevValue!==e&&(i.prevValue=e,r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e)),r.uniform1i(this.getUniformLocation(i.name),n++)}else if(Array.isArray(e)&&6===e.length)this.setUniformMatrixValue(i.name,Object(l["b"])(this.tmpMat4_,e));else if(Array.isArray(e)&&e.length<=4)switch(e.length){case 2:return void r.uniform2f(this.getUniformLocation(i.name),e[0],e[1]);case 3:return void r.uniform3f(this.getUniformLocation(i.name),e[0],e[1],e[2]);case 4:return void r.uniform4f(this.getUniformLocation(i.name),e[0],e[1],e[2],e[3]);default:return}else"number"===typeof e&&r.uniform1f(this.getUniformLocation(i.name),e)}.bind(this))},e.prototype.useProgram=function(t){if(t==this.currentProgram_)return!1;var e=this.getGL();return e.useProgram(t),this.currentProgram_=t,this.uniformLocations_={},this.attribLocations_={},!0},e.prototype.compileShader=function(t,e){var r=this.getGL(),n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n},e.prototype.getProgram=function(t,e){var r=this.getGL(),n=this.compileShader(t,r.FRAGMENT_SHADER),i=this.compileShader(e,r.VERTEX_SHADER),a=r.createProgram();if(r.attachShader(a,n),r.attachShader(a,i),r.linkProgram(a),!r.getShaderParameter(n,r.COMPILE_STATUS)){var o="Fragment shader compliation failed: ".concat(r.getShaderInfoLog(n));throw new Error(o)}if(r.deleteShader(n),!r.getShaderParameter(i,r.COMPILE_STATUS)){o="Vertex shader compilation failed: ".concat(r.getShaderInfoLog(i));throw new Error(o)}if(r.deleteShader(i),!r.getProgramParameter(a,r.LINK_STATUS)){o="GL program linking failed: ".concat(r.getShaderInfoLog(i));throw new Error(o)}return a},e.prototype.getUniformLocation=function(t){return void 0===this.uniformLocations_[t]&&(this.uniformLocations_[t]=this.getGL().getUniformLocation(this.currentProgram_,t)),this.uniformLocations_[t]},e.prototype.getAttributeLocation=function(t){return void 0===this.attribLocations_[t]&&(this.attribLocations_[t]=this.getGL().getAttribLocation(this.currentProgram_,t)),this.attribLocations_[t]},e.prototype.makeProjectionTransform=function(t,e){var r=t.size,n=t.viewState.rotation,i=t.viewState.resolution,a=t.viewState.center;return Object(_["g"])(e),Object(_["b"])(e,0,0,2/(i*r[0]),2/(i*r[1]),-n,-a[0],-a[1]),e},e.prototype.setUniformFloatValue=function(t,e){this.getGL().uniform1f(this.getUniformLocation(t),e)},e.prototype.setUniformFloatVec4=function(t,e){this.getGL().uniform4fv(this.getUniformLocation(t),e)},e.prototype.setUniformMatrixValue=function(t,e){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,e)},e.prototype.enableAttributeArray_=function(t,e,r,n,i){var a=this.getAttributeLocation(t);a<0||(this.getGL().enableVertexAttribArray(a),this.getGL().vertexAttribPointer(a,e,r,!1,n,i))},e.prototype.enableAttributes=function(t){for(var e=x(t),r=0,n=0;n<t.length;n++){var i=t[n];this.enableAttributeArray_(i.name,i.size,i.type||c["d"],e,r),r+=i.size*A(i.type)}},e.prototype.handleWebGLContextLost=function(){Object(h["b"])(this.bufferCache_),this.currentProgram_=null},e.prototype.handleWebGLContextRestored=function(){},e.prototype.createTexture=function(t,e,r){var n=this.getGL(),i=r||n.createTexture(),a=0,o=n.RGBA,s=0,u=n.RGBA,f=n.UNSIGNED_BYTE;return n.bindTexture(n.TEXTURE_2D,i),e?n.texImage2D(n.TEXTURE_2D,a,o,u,f,e):n.texImage2D(n.TEXTURE_2D,a,o,t[0],t[1],s,u,f,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),i},e}(i["a"]);function x(t){for(var e=0,r=0;r<t.length;r++){var n=t[r];e+=n.size*A(n.type)}return e}function A(t){switch(t){case d.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case d.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case d.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case d.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}e["c"]=y},"7fd1":function(t,e,r){"use strict";(function(t){function n(){var e='var e="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t},n="GENERATE_BUFFERS",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,a){var u=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=a?a.vertexPosition:0,h=a?a.indexPosition:0,d=b/u;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=u,l,v,1),c.length&&i.set(c,b+3),o(i,b+=u,l,v,2),c.length&&i.set(c,b+3),o(i,b+=u,l,v,3),c.length&&i.set(c,b+3),b+=u,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o,s=r.customAttributesCount,a=2+s,u=new Float32Array(r.renderInstructions),l=u.length/a,v=4*l*(s+3),c=new Uint32Array(6*l),g=new Float32Array(v),b=0;b<u.length;b+=a)o=i(u,b,g,c,s,o);var h=e({vertexBuffer:g.buffer,indexBuffer:c.buffer,renderInstructions:u.buffer},r);f.postMessage(h,[g.buffer,c.buffer,u.buffer])}};';return new Worker("undefined"===typeof Blob?"data:application/javascript;base64,"+t.from(e,"binary").toString("base64"):URL.createObjectURL(new Blob([e],{type:"application/javascript"})))}r.d(e,"a",(function(){return n}))}).call(this,r("b639").Buffer)},"86e0":function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"c",(function(){return o})),r.d(e,"f",(function(){return s})),r.d(e,"e",(function(){return u})),r.d(e,"b",(function(){return f})),r.d(e,"g",(function(){return c})),r.d(e,"i",(function(){return h})),r.d(e,"h",(function(){return _})),r.d(e,"d",(function(){return l})),r.d(e,"j",(function(){return E}));var n=r("617d"),i=r("38f3"),a=34962,o=34963,s=35040,u=35044,f=35048,c=5121,h=5123,_=5125,l=5126,T=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function E(t,e){for(var r=Object(i["a"])({preserveDrawingBuffer:!0,antialias:!n["f"]},e),a=T.length,o=0;o<a;++o)try{var s=t.getContext(T[o],r);if(s)return s}catch(u){}return null}},"8df1":function(t,e,r){"use strict";var n=function(){function t(t,e){this.name=t,this.data=e,this.texture_=null}return t.prototype.getTexture=function(t){if(!this.texture_){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=e}return this.texture_},t}();e["a"]=n},aab2:function(t,e,r){"use strict";var n=r("86e0"),i=r("92fa"),a={STATIC_DRAW:n["e"],STREAM_DRAW:n["f"],DYNAMIC_DRAW:n["b"]},o=function(){function t(t,e){this.array=null,this.type=t,Object(i["a"])(t===n["a"]||t===n["c"],62),this.usage=void 0!==e?e:a.STATIC_DRAW}return t.prototype.ofSize=function(t){this.array=new(s(this.type))(t)},t.prototype.fromArray=function(t){var e=s(this.type);this.array=e.from?e.from(t):new e(t)},t.prototype.fromArrayBuffer=function(t){this.array=new(s(this.type))(t)},t.prototype.getType=function(){return this.type},t.prototype.getArray=function(){return this.array},t.prototype.getUsage=function(){return this.usage},t.prototype.getSize=function(){return this.array?this.array.length:0},t}();function s(t){switch(t){case n["a"]:return Float32Array;case n["c"]:return Uint32Array;default:return Float32Array}}e["a"]=o},be6c:function(t,e,r){"use strict";function n(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return i}))},d706:function(t,e,r){"use strict";var n=r("9f5e"),i=new Uint8Array(4),a=function(){function t(t,e){this.helper_=t;var r=t.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.size_=e||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}return t.prototype.setSize=function(t){Object(n["b"])(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())},t.prototype.getSize=function(){return this.size_},t.prototype.clearCachedData=function(){this.dataCacheDirty_=!0},t.prototype.readAll=function(){if(this.dataCacheDirty_){var t=this.size_,e=this.helper_.getGL();e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_},t.prototype.readPixel=function(t,e){if(t<0||e<0||t>this.size_[0]||e>=this.size_[1])return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i;this.readAll();var r=Math.floor(t)+(this.size_[1]-Math.floor(e)-1)*this.size_[0];return i[0]=this.data_[4*r],i[1]=this.data_[4*r+1],i[2]=this.data_[4*r+2],i[3]=this.data_[4*r+3],i},t.prototype.getTexture=function(){return this.texture_},t.prototype.getFramebuffer=function(){return this.framebuffer_},t.prototype.updateSize_=function(){var t=this.size_,e=this.helper_.getGL();this.texture_=this.helper_.createTexture(t,null,this.texture_),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.viewport(0,0,t[0],t[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture_,0),this.data_=new Uint8Array(t[0]*t[1]*4)},t}();e["a"]=a},da5d:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"c",(function(){return o})),r.d(e,"h",(function(){return s})),r.d(e,"d",(function(){return u})),r.d(e,"e",(function(){return f})),r.d(e,"f",(function(){return c})),r.d(e,"g",(function(){return _})),r.d(e,"i",(function(){return T})),r.d(e,"b",(function(){return d}));r("9f5e");function n(t,e){return d().createElementNS(t,e)}function i(t,e){return a(t,e,[]).join("")}function a(t,e,r){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?r.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):r.push(t.nodeValue);else{var n=void 0;for(n=t.firstChild;n;n=n.nextSibling)a(n,e,r)}return r}function o(t){return"documentElement"in t}function s(t){return(new DOMParser).parseFromString(t,"application/xml")}function u(t,e){return function(r,n){var i=t.call(void 0!==e?e:this,r,n);if(void 0!==i){var a=n[n.length-1];a.push(i)}}}function f(t,e,r){return function(n,i){var a=t.call(void 0!==r?r:this,n,i);if(void 0!==a){var o=i[i.length-1],s=void 0!==e?e:n.localName,u=void 0;s in o?u=o[s]:(u=[],o[s]=u),u.push(a)}}}function c(t,e,r){return function(n,i){var a=t.call(void 0!==r?r:this,n,i);if(void 0!==a){var o=i[i.length-1],s=void 0!==e?e:n.localName;o[s]=a}}}function h(t,e){var r=t;return function(t,i,a){var o=i[i.length-1],s=o.node,u=r;void 0===u&&(u=a);var f=void 0!==e?e:s.namespaceURI;return n(f,u)}}h();function _(t,e,r){var n,i,a=void 0!==r?r:{};for(n=0,i=t.length;n<i;++n)a[t[n]]=e;return a}function l(t,e,r,n){var i;for(i=e.firstElementChild;i;i=i.nextElementSibling){var a=t[i.namespaceURI];if(void 0!==a){var o=a[i.localName];void 0!==o&&o.call(n,i,r)}}}function T(t,e,r,n,i){return n.push(t),l(e,r,n,i),n.pop()}var E=void 0;function d(){return void 0===E&&"undefined"!==typeof document&&(E=document.implementation.createDocument("","",null)),E}}}]);
//# sourceMappingURL=chunk-6251d9eb.ed7675ae.js.map