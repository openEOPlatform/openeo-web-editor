(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b560485"],{"0b4b":function(e,t,s){},"0dd6b":function(e,t,s){},"1b7a":function(e,t,s){"use strict";s("7ae6")},"206d":function(e,t,s){},3986:function(e,t,s){},5472:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{directives:[{name:"show",rawName:"v-show",value:e.element,expression:"element"}],attrs:{type:"button",title:e.isFullscreen?"Close fullscreen":"Show fullscreen"},on:{click:e.toggleFullscreen}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.isFullscreen,expression:"isFullscreen"}]},[s("i",{staticClass:"fas fa-compress"})]),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.isFullscreen,expression:"!isFullscreen"}]},[s("i",{staticClass:"fas fa-expand"})])])},a=[],n=s("3115"),r=s("025e"),o={name:"FullscreenButton",mixins:[n["a"]],props:{element:{required:!0}},data(){return{isFullscreen:!1,keyDownFn:null,oldZIndex:"auto"}},mounted(){this.keyDownFn=this.onkeyDown.bind(this);let e=this.getElement();e&&e.addEventListener("keydown",this.keyDownFn)},beforeDestroy(){let e=this.getElement();e&&e.removeEventListener("keydown",this.keyDownFn)},computed:{...r["a"].mapState("editor",["hightestModalZIndex"])},methods:{...r["a"].mapMutations("editor",["openModal","closeModal"]),onkeyDown(e){!this.isFullscreen||"F11"!==e.key&&"Escape"!==e.key||(this.toggleFullscreen(),e.preventDefault(),e.stopPropagation())},getElement(){return"string"===typeof this.element?document.querySelector(this.element):"function"===typeof this.element?this.element():this.element},toggleFullscreen(){let e=this.getElement();this.isFullscreen?(this.isFullscreen=!1,e.classList.remove("fullscreen"),e.style.zIndex=this.oldZIndex,this.closeModal()):(this.isFullscreen=!0,e.classList.add("fullscreen"),this.openModal(),this.oldZIndex=e.style.zIndex,e.style.zIndex=this.hightestModalZIndex),this.$emit("changed",this.isFullscreen),this.emit("stopTour")}}},l=o,c=(s("90f4"),s("2877")),d=Object(c["a"])(l,i,a,!1,null,null,null);t["a"]=d.exports},"58d3":function(e,t,s){"use strict";s("f08e")},"60bc":function(e,t,s){"use strict";s("0b4b")},6219:function(e,t,s){},"76b6":function(e,t,s){},"7ae6":function(e,t,s){},"7b86":function(e,t,s){"use strict";s("3986")},"877a":function(e,t,s){"use strict";s("6219")},"90f4":function(e,t,s){"use strict";s("206d")},9961:function(e,t,s){"use strict";s("76b6")},"9def":function(e,t,s){"use strict";s.d(t,"a",(function(){return E})),s.d(t,"b",(function(){return P}));var i=Object.defineProperty,a=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,s)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,d=(e,t)=>{for(var s in t||(t={}))o.call(t,s)&&c(e,s,t[s]);if(r)for(var s of r(t))l.call(t,s)&&c(e,s,t[s]);return e},u=(e,t)=>a(e,n(t)),h=(e,t)=>{var s={};for(var i in e)o.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&r)for(var i of r(e))t.indexOf(i)<0&&l.call(e,i)&&(s[i]=e[i]);return s};function p(e,t,s,i,a,n,r,o){var l,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=s,c._compiled=!0),i&&(c.functional=!0),n&&(c._scopeId="data-v-"+n),r?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},c._ssrRegister=l):a&&(l=o?function(){a.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:c}}const m={name:"splitpanes",props:{horizontal:{type:Boolean},pushOtherPanes:{type:Boolean,default:!0},dblClickSplitter:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean}},provide(){return{requestUpdate:this.requestUpdate,onPaneAdd:this.onPaneAdd,onPaneRemove:this.onPaneRemove,onPaneClick:this.onPaneClick}},data:()=>({container:null,ready:!1,panes:[],touch:{mouseDown:!1,dragging:!1,activeSplitter:null},splitterTaps:{splitter:null,timeoutId:null}}),computed:{panesCount(){return this.panes.length},indexedPanes(){return this.panes.reduce((e,t)=>(e[t.id]=t)&&e,{})}},methods:{updatePaneComponents(){this.panes.forEach(e=>{e.update&&e.update({[this.horizontal?"height":"width"]:this.indexedPanes[e.id].size+"%"})})},bindEvents(){document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),document.addEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.addEventListener("touchmove",this.onMouseMove,{passive:!1}),document.addEventListener("touchend",this.onMouseUp))},unbindEvents(){document.removeEventListener("mousemove",this.onMouseMove,{passive:!1}),document.removeEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.removeEventListener("touchmove",this.onMouseMove,{passive:!1}),document.removeEventListener("touchend",this.onMouseUp))},onMouseDown(e,t){this.bindEvents(),this.touch.mouseDown=!0,this.touch.activeSplitter=t},onMouseMove(e){this.touch.mouseDown&&(e.preventDefault(),this.touch.dragging=!0,this.calculatePanesSize(this.getCurrentMouseDrag(e)),this.$emit("resize",this.panes.map(e=>({min:e.min,max:e.max,size:e.size}))))},onMouseUp(){this.touch.dragging&&this.$emit("resized",this.panes.map(e=>({min:e.min,max:e.max,size:e.size}))),this.touch.mouseDown=!1,setTimeout(()=>{this.touch.dragging=!1,this.unbindEvents()},100)},onSplitterClick(e,t){"ontouchstart"in window&&(e.preventDefault(),this.dblClickSplitter&&(this.splitterTaps.splitter===t?(clearTimeout(this.splitterTaps.timeoutId),this.splitterTaps.timeoutId=null,this.onSplitterDblClick(e,t),this.splitterTaps.splitter=null):(this.splitterTaps.splitter=t,this.splitterTaps.timeoutId=setTimeout(()=>{this.splitterTaps.splitter=null},500)))),this.touch.dragging||this.$emit("splitter-click",this.panes[t])},onSplitterDblClick(e,t){let s=0;this.panes=this.panes.map((e,i)=>(e.size=i===t?e.max:e.min,i!==t&&(s+=e.min),e)),this.panes[t].size-=s,this.$emit("pane-maximize",this.panes[t])},onPaneClick(e,t){this.$emit("pane-click",this.indexedPanes[t])},getCurrentMouseDrag(e){const t=this.container.getBoundingClientRect(),{clientX:s,clientY:i}="ontouchstart"in window&&e.touches?e.touches[0]:e;return{x:s-t.left,y:i-t.top}},getCurrentDragPercentage(e){e=e[this.horizontal?"y":"x"];const t=this.container[this.horizontal?"clientHeight":"clientWidth"];return this.rtl&&!this.horizontal&&(e=t-e),100*e/t},calculatePanesSize(e){const t=this.touch.activeSplitter;let s={prevPanesSize:this.sumPrevPanesSize(t),nextPanesSize:this.sumNextPanesSize(t),prevReachedMinPanes:0,nextReachedMinPanes:0};const i=0+(this.pushOtherPanes?0:s.prevPanesSize),a=100-(this.pushOtherPanes?0:s.nextPanesSize),n=Math.max(Math.min(this.getCurrentDragPercentage(e),a),i);let r=[t,t+1],o=this.panes[r[0]]||null,l=this.panes[r[1]]||null;const c=o.max<100&&n>=o.max+s.prevPanesSize,d=l.max<100&&n<=100-(l.max+this.sumNextPanesSize(t+1));if(c||d)c?(o.size=o.max,l.size=Math.max(100-o.max-s.prevPanesSize-s.nextPanesSize,0)):(o.size=Math.max(100-l.max-s.prevPanesSize-this.sumNextPanesSize(t+1),0),l.size=l.max);else{if(this.pushOtherPanes){const e=this.doPushOtherPanes(s,n);if(!e)return;({sums:s,panesToResize:r}=e),o=this.panes[r[0]]||null,l=this.panes[r[1]]||null}null!==o&&(o.size=Math.min(Math.max(n-s.prevPanesSize-s.prevReachedMinPanes,o.min),o.max)),null!==l&&(l.size=Math.min(Math.max(100-n-s.nextPanesSize-s.nextReachedMinPanes,l.min),l.max))}},doPushOtherPanes(e,t){const s=this.touch.activeSplitter,i=[s,s+1];return t<e.prevPanesSize+this.panes[i[0]].min&&(i[0]=this.findPrevExpandedPane(s).index,e.prevReachedMinPanes=0,i[0]<s&&this.panes.forEach((t,a)=>{a>i[0]&&a<=s&&(t.size=t.min,e.prevReachedMinPanes+=t.min)}),e.prevPanesSize=this.sumPrevPanesSize(i[0]),void 0===i[0])?(e.prevReachedMinPanes=0,this.panes[0].size=this.panes[0].min,this.panes.forEach((t,i)=>{i>0&&i<=s&&(t.size=t.min,e.prevReachedMinPanes+=t.min)}),this.panes[i[1]].size=100-e.prevReachedMinPanes-this.panes[0].min-e.prevPanesSize-e.nextPanesSize,null):t>100-e.nextPanesSize-this.panes[i[1]].min&&(i[1]=this.findNextExpandedPane(s).index,e.nextReachedMinPanes=0,i[1]>s+1&&this.panes.forEach((t,a)=>{a>s&&a<i[1]&&(t.size=t.min,e.nextReachedMinPanes+=t.min)}),e.nextPanesSize=this.sumNextPanesSize(i[1]-1),void 0===i[1])?(e.nextReachedMinPanes=0,this.panes[this.panesCount-1].size=this.panes[this.panesCount-1].min,this.panes.forEach((t,i)=>{i<this.panesCount-1&&i>=s+1&&(t.size=t.min,e.nextReachedMinPanes+=t.min)}),this.panes[i[0]].size=100-e.prevPanesSize-e.nextReachedMinPanes-this.panes[this.panesCount-1].min-e.nextPanesSize,null):{sums:e,panesToResize:i}},sumPrevPanesSize(e){return this.panes.reduce((t,s,i)=>t+(i<e?s.size:0),0)},sumNextPanesSize(e){return this.panes.reduce((t,s,i)=>t+(i>e+1?s.size:0),0)},findPrevExpandedPane(e){const t=[...this.panes].reverse().find(t=>t.index<e&&t.size>t.min);return t||{}},findNextExpandedPane(e){const t=this.panes.find(t=>t.index>e+1&&t.size>t.min);return t||{}},checkSplitpanesNodes(){const e=Array.from(this.container.children);e.forEach(e=>{const t=e.classList.contains("splitpanes__pane"),s=e.classList.contains("splitpanes__splitter");if(!t&&!s)return e.parentNode.removeChild(e),void console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed.")})},addSplitter(e,t,s=!1){const i=e-1,a=document.createElement("div");a.classList.add("splitpanes__splitter"),s||(a.onmousedown=e=>this.onMouseDown(e,i),"undefined"!==typeof window&&"ontouchstart"in window&&(a.ontouchstart=e=>this.onMouseDown(e,i)),a.onclick=e=>this.onSplitterClick(e,i+1)),this.dblClickSplitter&&(a.ondblclick=e=>this.onSplitterDblClick(e,i+1)),t.parentNode.insertBefore(a,t)},removeSplitter(e){e.onmousedown=void 0,e.onclick=void 0,e.ondblclick=void 0,e.parentNode.removeChild(e)},redoSplitters(){const e=Array.from(this.container.children);e.forEach(e=>{e.className.includes("splitpanes__splitter")&&this.removeSplitter(e)});let t=0;e.forEach(e=>{e.className.includes("splitpanes__pane")&&(!t&&this.firstSplitter?this.addSplitter(t,e,!0):t&&this.addSplitter(t,e),t++)})},requestUpdate(e){var t=e,{target:s}=t,i=h(t,["target"]);const a=this.indexedPanes[s._uid];Object.entries(i).forEach(([e,t])=>a[e]=t)},onPaneAdd(e){let t=-1;Array.from(e.$el.parentNode.children).some(s=>(s.className.includes("splitpanes__pane")&&t++,s===e.$el));const s=parseFloat(e.minSize),i=parseFloat(e.maxSize);this.panes.splice(t,0,{id:e._uid,index:t,min:isNaN(s)?0:s,max:isNaN(i)?100:i,size:null===e.size?null:parseFloat(e.size),givenSize:e.size,update:e.update}),this.panes.forEach((e,t)=>e.index=t),this.ready&&this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({addedPane:this.panes[t]}),this.$emit("pane-add",{index:t,panes:this.panes.map(e=>({min:e.min,max:e.max,size:e.size}))})})},onPaneRemove(e){const t=this.panes.findIndex(t=>t.id===e._uid),s=this.panes.splice(t,1)[0];this.panes.forEach((e,t)=>e.index=t),this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({removedPane:u(d({},s),{index:t})}),this.$emit("pane-remove",{removed:s,panes:this.panes.map(e=>({min:e.min,max:e.max,size:e.size}))})})},resetPaneSizes(e={}){e.addedPane||e.removedPane?this.panes.some(e=>null!==e.givenSize||e.min||e.max<100)?this.equalizeAfterAddOrRemove(e):this.equalize():this.initialPanesSizing(),this.ready&&this.$emit("resized",this.panes.map(e=>({min:e.min,max:e.max,size:e.size})))},equalize(){const e=100/this.panesCount;let t=0,s=[],i=[];this.panes.forEach(a=>{a.size=Math.max(Math.min(e,a.max),a.min),t-=a.size,a.size>=a.max&&s.push(a.id),a.size<=a.min&&i.push(a.id)}),t>.1&&this.readjustSizes(t,s,i)},initialPanesSizing(){this.panesCount;let e=100,t=[],s=[],i=0;this.panes.forEach(a=>{e-=a.size,null!==a.size&&i++,a.size>=a.max&&t.push(a.id),a.size<=a.min&&s.push(a.id)});let a=100;e>.1&&(this.panes.forEach(t=>{null===t.size&&(t.size=Math.max(Math.min(e/(this.panesCount-i),t.max),t.min)),a-=t.size}),a>.1&&this.readjustSizes(e,t,s))},equalizeAfterAddOrRemove({addedPane:e,removedPane:t}={}){let s=100/this.panesCount,i=0,a=[],n=[];e&&null!==e.givenSize&&(s=(100-e.givenSize)/(this.panesCount-1)),this.panes.forEach(e=>{i-=e.size,e.size>=e.max&&a.push(e.id),e.size<=e.min&&n.push(e.id)}),Math.abs(i)<.1||(this.panes.forEach(t=>{e&&null!==e.givenSize&&e.id===t.id||(t.size=Math.max(Math.min(s,t.max),t.min)),i-=t.size,t.size>=t.max&&a.push(t.id),t.size<=t.min&&n.push(t.id)}),i>.1&&this.readjustSizes(i,a,n))},readjustSizes(e,t,s){let i;i=e>0?e/(this.panesCount-t.length):e/(this.panesCount-s.length),this.panes.forEach((a,n)=>{if(e>0&&!t.includes(a.id)){const t=Math.max(Math.min(a.size+i,a.max),a.min),s=t-a.size;e-=s,a.size=t}else if(!s.includes(a.id)){const t=Math.max(Math.min(a.size+i,a.max),a.min),s=t-a.size;e-=s,a.size=t}a.update({[this.horizontal?"height":"width"]:this.indexedPanes[a.id].size+"%"})}),Math.abs(e)>.1&&this.$nextTick(()=>{this.ready&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")})}},watch:{panes:{deep:!0,immediate:!1,handler(){this.updatePaneComponents()}},horizontal(){this.updatePaneComponents()},firstSplitter(){this.redoSplitters()},dblClickSplitter(e){const t=[...this.container.querySelectorAll(".splitpanes__splitter")];t.forEach((t,s)=>{t.ondblclick=e?e=>this.onSplitterDblClick(e,s):void 0})}},beforeDestroy(){this.ready=!1},mounted(){this.container=this.$refs.container,this.checkSplitpanesNodes(),this.redoSplitters(),this.resetPaneSizes(),this.$emit("ready"),this.ready=!0},render(e){return e("div",{ref:"container",class:["splitpanes","splitpanes--"+(this.horizontal?"horizontal":"vertical"),{"splitpanes--dragging":this.touch.dragging}]},this.$slots.default)}};let f,v;const g={};var w=p(m,f,v,!1,b,null,null,null);function b(e){for(let t in g)this[t]=g[t]}var P=function(){return w.exports}(),y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"splitpanes__pane",style:e.style,on:{click:function(t){return e.onPaneClick(t,e._uid)}}},[e._t("default")],2)},x=[];const S={name:"pane",inject:["requestUpdate","onPaneAdd","onPaneRemove","onPaneClick"],props:{size:{type:[Number,String],default:null},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},data:()=>({style:{}}),mounted(){this.onPaneAdd(this)},beforeDestroy(){this.onPaneRemove(this)},methods:{update(e){this.style=e}},computed:{sizeNumber(){return this.size||0===this.size?parseFloat(this.size):null},minSizeNumber(){return parseFloat(this.minSize)},maxSizeNumber(){return parseFloat(this.maxSize)}},watch:{sizeNumber(e){this.requestUpdate({target:this,size:e})},minSizeNumber(e){this.requestUpdate({target:this,min:e})},maxSizeNumber(e){this.requestUpdate({target:this,max:e})}}},z={};var C=p(S,y,x,!1,_,null,null,null);function _(e){for(let t in z)this[t]=z[t]}var E=function(){return C.exports}()},c319:function(e,t,s){"use strict";s("0dd6b")},cbd9:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"discovery-toolbar"},[s("SearchBox",{model:{value:e.searchTerm,callback:function(t){e.searchTerm=t},expression:"searchTerm"}}),s("div",{staticClass:"search-results"},[s("Collections",{staticClass:"category",attrs:{collections:e.collections,searchTerm:e.searchTerm,offerDetails:!1,collapsed:e.collapsed},scopedSlots:e._u([{key:"summary",fn:function(t){var i=t.item;return[s("div",{staticClass:"discovery-entity",attrs:{draggable:e.supportsLoadCollection},on:{dragstart:function(t){return e.onDrag(t,"collection",i)}}},[s("div",{staticClass:"discovery-info",on:{click:function(t){return e.showCollectionInfo(i.id)}}},[s("strong",{attrs:{title:i.id}},[e._v(e._s(i.id))]),i.title?s("small",{attrs:{title:i.title}},[e._v(e._s(i.title))]):e._e()]),e.hasCollectionPreview(i)?s("button",{staticClass:"discovery-button",attrs:{type:"button",title:"View on map"},on:{click:function(t){return e.showCollectionPreview(i)}}},[s("i",{staticClass:"fas fa-map"})]):e._e()])]}}])}),s("Processes",{staticClass:"category",attrs:{processes:e.allProcesses,searchTerm:e.searchTerm,offerDetails:!1,collapsed:e.collapsed},scopedSlots:e._u([{key:"summary",fn:function(t){var i=t.item;return[s("div",{staticClass:"discovery-entity",attrs:{draggable:"true"},on:{dragstart:function(t){return e.onDrag(t,"process",i)}}},[s("div",{staticClass:"discovery-info",on:{click:function(t){return e.showProcess(i)}}},["user"===i.namespace?s("i",{staticClass:"custom-process fas fa-xs fa-sitemap",attrs:{title:"Custom Process"}}):"backend"!==i.namespace?s("i",{staticClass:"custom-process fas fa-xs fa-tag",attrs:{title:"Process from namespace '"+i.namespace+"'"}}):e._e(),s("strong",{attrs:{title:i.id}},[e._v(e._s(i.id))]),i.summary?s("small",{attrs:{title:i.summary}},[e._v(e._s(i.summary))]):e._e()])])]}}])}),e.hasUdfRuntimes?s("UdfRuntimes",{staticClass:"category",attrs:{runtimes:e.udfRuntimes,searchTerm:e.searchTerm,offerDetails:!1,collapsed:e.collapsed},scopedSlots:e._u([{key:"summary",fn:function(t){var i=t.summary,a=t.item;return[s("div",{staticClass:"discovery-entity",attrs:{draggable:e.supportsRunUdf},on:{dragstart:function(t){return e.onDrag(t,"udf",{runtime:i.identifier,version:a.default})}}},[s("div",{staticClass:"discovery-info",on:{click:function(t){return e.showUdfInfo(i.identifier,a)}}},[s("strong",{attrs:{title:i.identifier}},[e._v(e._s(i.identifier)+" ("+e._s(a.default)+")")]),i.summary?s("small",{attrs:{title:i.summary}},[e._v(e._s(i.summary))]):e._e()])])]}}],null,!1,92063951)}):e._e(),s("FileFormats",{staticClass:"category",attrs:{formats:e.fileFormats,showInput:!1,heading:"Export File Formats",searchTerm:e.searchTerm,offerDetails:!1,collapsed:e.collapsed},scopedSlots:e._u([{key:"summary",fn:function(t){var i=t.item;return[s("div",{staticClass:"discovery-entity",attrs:{draggable:e.supportsSaveResult},on:{dragstart:function(t){return e.onDrag(t,"fileformat",i)}}},[s("div",{staticClass:"discovery-info",on:{click:function(t){return e.showFileFormatInfo(i)}}},[s("strong",{attrs:{title:i.name}},[e._v(e._s(i.name))]),i.title?s("small",{attrs:{title:i.title}},[e._v(e._s(i.title))]):e._e()])])]}}])})],1)],1)},a=[],n=s("3115"),r=s("025e"),o=s("69d2"),l=s("a0e2"),c=s("9b5d"),d=s("2979"),u=s("d235"),h={name:"DiscoveryToolbar",mixins:[n["a"]],components:{Collections:o["a"],FileFormats:l["a"],Processes:c["a"],SearchBox:d["default"],UdfRuntimes:u["a"]},props:{onAddProcess:{type:Function,required:!0},collectionPreview:{type:Boolean,default:!1},persist:{type:Boolean,default:!1}},data(){return{internalSearchTerm:"",collapsed:!0}},computed:{...r["a"].mapState(["collections","udfRuntimes"]),...r["a"].mapState("editor",["discoverySearchTerm"]),...r["a"].mapGetters(["supports","collectionDefaults","fileFormats","processes"]),supportsLoadCollection(){return this.processes.has("load_collection")},supportsRunUdf(){return this.processes.has("run_udf")},supportsSaveResult(){return this.processes.has("save_result")},hasUdfRuntimes(){return r["a"].size(this.udfRuntimes)},allProcesses(){return this.processes.all()},searchTerm:{get(){return this.persist?this.discoverySearchTerm:this.internalSearchTerm},set(e){this.persist?this.setDiscoverySearchTerm(e):this.internalSearchTerm=e}}},watch:{searchTerm:{immediate:!0,handler(e,t){!e&&t?this.collapsed=!0:e&&!t&&(this.collapsed=!1)}}},methods:{...r["a"].mapMutations("editor",["setDiscoverySearchTerm"]),onDrag(e,t,s){let i=this.getNode(t,s);e.dataTransfer.setData("application/vnd.openeo-node",JSON.stringify(i)),e.dataTransfer.setData("text/plain",JSON.stringify(i,null,2))},showCollectionInfo(e){this.emit("showCollection",e)},hasCollectionPreview(e){return Boolean(this.collectionPreview&&r["a"].getPreviewLinkFromSTAC(e))},showCollectionPreview(e){this.emit("showCollectionPreview",e)},showProcess(e){this.emit("showProcess",e)},showUdfInfo(e,t){this.emit("showModal","UdfRuntimeModal",{id:e,data:t,version:t.default})},showFileFormatInfo(e){let t={id:e.name,format:this.fileFormats.output[e.name],type:"output"};this.emit("showModal","FileFormatModal",t)},getNode(e,t){switch(e){case"collection":return{process_id:"load_collection",arguments:this.collectionDefaults(t.id)};case"process":return{process_id:t.id,namespace:t.namespace,arguments:{}};case"udf":return{process_id:"run_udf",arguments:t};case"fileformat":return{process_id:"save_result",arguments:{format:t.name,options:{}}}}}}},p=h,m=(s("7b86"),s("877a"),s("2877")),f=Object(m["a"])(p,i,a,!1,null,"e5b627b0",null);t["a"]=f.exports},ceb0:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Tabs",{ref:"tabs",staticClass:"editor",attrs:{id:"customProcessContent",position:"bottom"}},[s("Tab",{attrs:{id:"visual",name:"Visual Model",icon:"fa-project-diagram",selected:!0,allowShow:e.canSwitchView},on:{show:e.showModel}},[s("VisualEditor",{ref:"graphBuilder",staticClass:"visualEditorTab",attrs:{editable:e.editable,parent:e.parent,parentSchema:e.parentSchema,value:e.modelValue,title:e.title,id:e.id+"_visual",showDiscoveryToolbar:e.showDiscoveryToolbar,defaultValue:e.defaultValue},on:{input:e.commit,error:e.onError},scopedSlots:e._u([{key:"file-toolbar",fn:function(){return[e._t("file-toolbar")]},proxy:!0},{key:"toolbar",fn:function(){return[e._t("toolbar")]},proxy:!0}],null,!0)})],1),s("Tab",{attrs:{id:"source",name:"Code",icon:"fa-code",allowShow:e.canSwitchView},on:{show:e.showCode}},[s("TextEditor",{ref:"sourceEditor",staticClass:"textEditorTab",attrs:{editable:e.editable,value:e.codeValue,title:e.title,id:e.id+"_text",language:"processgraph"},on:{input:e.commit,error:e.onError},scopedSlots:e._u([{key:"file-toolbar",fn:function(){return[e._t("file-toolbar")]},proxy:!0},{key:"toolbar",fn:function(){return[e._t("toolbar")]},proxy:!0}],null,!0)})],1)],1)},a=[],n=s("025e"),r=s("e7ea"),o=s("bdb2"),l=s("8c66"),c=s("0f29"),d={name:"Editor",components:{VisualEditor:l["a"],TextEditor:c["a"],Tabs:r["default"],Tab:o["default"]},props:{id:{type:String,default:()=>"editor_"+Date.now()},editable:{type:Boolean,default:!0},value:{type:Object,default:()=>null},title:{type:String},parent:{type:Object,default:null},parentSchema:{type:Object,default:null},showDiscoveryToolbar:{type:Boolean,default:!1},defaultValue:{}},watch:{value(){this.updateTab()}},data(){return{modelValue:null,codeValue:null,error:null}},mounted(){this.updateTab()},methods:{...n["a"].mapActions(["loadProcess"]),showModel(){this.error=null,this.modelValue=this.value},showCode(){this.error=null,this.codeValue=this.value,this.$refs.sourceEditor.updateState()},updateTab(){"source"===this.$refs.tabs.getActiveTabId()?this.showCode():this.showModel()},commit(e){this.error=null,this.$emit("input",e)},onError(e){this.error=e},activeEditor(){return"source"===this.$refs.tabs.getActiveTabId()?this.$refs.sourceEditor:this.$refs.graphBuilder},async insertProcess(e){try{await this.loadProcess({id:e.process_id,namespace:e.namespace}),this.activeEditor().insertProcess(e)}catch(t){n["a"].exception(this,t)}},canSwitchView(){return!this.editable||null===this.error||(n["a"].exception(this,this.error,"Process Invalid Error"),!1)}}},u=d,h=(s("58d3"),s("2877")),p=Object(h["a"])(u,i,a,!1,null,null,null);t["default"]=p.exports},d24e:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"FilePanel"},on:{dragenter:function(t){return e.dropZoneInfo(!0)},dragleave:function(t){return e.dropZoneInfo(!1)},drop:function(t){return e.uploadFiles(t)},dragover:function(t){return e.allowDrop(t)}}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showUploadDropHint,expression:"showUploadDropHint"}],staticClass:"dropZone"},[e._v("To upload files, drop them here.")]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.supportsCreate,expression:"supportsCreate"}],staticClass:"addFile"},[s("input",{ref:"uploadUserFile",staticClass:"uploadUserFile",attrs:{type:"file",name:"uploadUserFile",multiple:""},on:{change:e.uploadFiles}})]),s("div",{staticClass:"percent"},[s("div",{staticClass:"used",class:{error:e.uploadErrored},style:"width: "+this.uploadProgress+"%; opacity: "+this.uploadFadeOut})]),s("DataTable",{ref:"table",attrs:{data:e.data,columns:e.columns},scopedSlots:e._u([{key:"actions",fn:function(t){return[s("button",{directives:[{name:"show",rawName:"v-show",value:e.supportsRead,expression:"supportsRead"}],attrs:{title:"Download"},on:{click:function(s){return e.downloadFile(t.row)}}},[s("i",{staticClass:"fas fa-download"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supportsDelete,expression:"supportsDelete"}],attrs:{title:"Delete"},on:{click:function(s){return e.deleteFile(t.row)}}},[s("i",{staticClass:"fas fa-trash"})])]}}])})],1)},a=[],n=s("41a2"),r=s("025e"),o={name:"FilePanel",mixins:[Object(n["a"])("files","file","files")],data(){return{columns:{path:{name:"Path",primaryKey:!0,sortFn:r["a"].sortByPath,sort:"asc"},size:{name:"Size",format:"FileSize",filterable:!1},modified:{name:"Last modified",format:"Timestamp"},actions:{name:"Actions",filterable:!1,sort:!1}},uploadProgress:0,uploadProgressPerFile:[],uploadErrored:!1,uploadFadeOut:1,showUploadDropHint:0}},watch:{uploadProgressPerFile:{deep:!0,handler(){this.uploadProgress=this.uploadProgressPerFile.reduce((e,t)=>e+t,0)/this.uploadProgressPerFile.length,this.uploadProgress>99.9999&&this.finishAllUploads()}}},methods:{allowDrop(e){this.supportsCreate&&(e.preventDefault(),e.stopPropagation())},dropZoneInfo(e){this.showUploadDropHint+=e?1:-1},uploadFiles(e){this.showUploadDropHint=0;var t=[];if(e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length?(t=e.dataTransfer.files,e.preventDefault(),e.stopPropagation()):e.target&&e.target.files&&e.target.files.length&&(t=e.target.files),this.supportsCreate)if(0!==t.length){this.uploadProgressPerFile=[],this.uploadProgress=0,this.uploadErrored=!1;for(let e=0;e<t.length;e++)this.uploadFile(t[e],e)}else r["a"].info(this,"Please select files to upload.");else r["a"].error(this,"Uploading files is not supported.")},async uploadFile(e,t){if(this.uploadProgressPerFile.push(0),"string"===typeof e.name)try{await this.create({parameters:[e,null,e=>this.$set(this.uploadProgressPerFile,t,e)]}),this.$set(this.uploadProgressPerFile,t,100),r["a"].ok(this,"File upload completed.",e.name)}catch(s){console.error(s),r["a"].exception(this,s,"Upload File Error: "+e.name)}},finishAllUploads(){this.$refs.uploadUserFile.value="";var e=setInterval(()=>{this.uploadFadeOut-=.05,this.uploadFadeOut<0&&(this.uploadProgress=0,this.uploadFadeOut=1,clearInterval(e))},100)},downloadFile(e){e.downloadFile(e.path)},deleteFile(e){confirm(`Do you really want to delete the file "${e.path}"?`)&&this.delete({data:e}).catch(t=>r["a"].exception(this,t,"Delete File Error: "+e.path))}}},l=o,c=(s("9961"),s("2877")),d=Object(c["a"])(l,i,a,!1,null,null,null);t["a"]=d.exports},d700:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dataViewer"},[e.isError?s("div",{staticClass:"message error"},[s("i",{staticClass:"fas fa-exclamation-circle"}),s("span",[e._v(" Sorry, the Editor was unable to read the data."),s("br"),s("br"),e._v("The following error occured:"),s("br"),s("em",[e._v(e._s(e.content.message))])])]):"string"===typeof e.content?s("pre",{staticClass:"text"},[e._v(e._s(e.content))]):null!==e.content?s("Tabs",{attrs:{id:e.tabsId,position:"bottom"}},[s("Tab",{attrs:{id:"visual",name:"Visual",icon:"fa-list",selected:!0}},[s("ObjectTree",{staticClass:"tree",attrs:{data:e.content}})],1),s("Tab",{attrs:{id:"source",name:"Code",icon:"fa-code"},on:{show:e.showCode}},[s("TextEditor",{ref:"sourceEditor",staticClass:"textEditorTab",attrs:{editable:!1,value:e.content,id:e.tabsId+"_text",language:e.codeLanguage}})],1)],1):s("div",{staticClass:"noDataMessage"},[s("i",{staticClass:"fas fa-spinner fa-spin"}),e._v(" Loading data...")])],1)},a=[],n=(s("d9e2"),s("3115")),r=s("0a37"),o=s("e7ea"),l=s("bdb2"),c=s("0f29"),d=s("025e"),u=s("2b70"),h={name:"DataViewer",mixins:[n["a"]],props:{data:{type:Object,required:!0}},components:{ObjectTree:r["default"],Tabs:o["default"],Tab:l["default"],TextEditor:c["a"]},computed:{...d["a"].mapState(["connection"]),isError(){return this.content instanceof Error}},data(){return{content:null,tabsId:"data_viewer_"+Date.now(),codeLanguage:null}},watch:{data(){this.processData(this.data)}},created(){this.processData(this.data)},methods:{showCode(){this.$refs.sourceEditor.updateState()},async processData(e){if(d["a"].isObject(e)&&"undefined"!==typeof e.blob)switch(e.type){case"application/json":d["a"].blobToText(e,e=>{try{var t=JSON.parse(e.target.result);this.content=t,this.codeLanguage="json"}catch(s){this.content=s}});break;case"text/plain":case"text/csv":d["a"].blobToText(e,e=>{this.content=e.target.result});break;default:u["OpenEO"].Environment.saveToFile(e,d["a"].makeFileName("result",e.type)),this.error("Sorry, content type not supported. Trying to download the file...")}else if(d["a"].isObject(e)&&e.url)try{let t=await this.connection.download(e.url,!1);this.processData({blob:t,type:e.type||blob.type})}catch(t){d["a"].exception(this,t,"Download File Error")}else this.content=e},error(e){this.content=new Error(e)}}},p=h,m=(s("c319"),s("2877")),f=Object(m["a"])(p,i,a,!1,null,"fdc203da",null);t["a"]=f.exports},ed22:function(e,t){
/*! http://mths.be/repeat v0.2.0 by @mathias */
String.prototype.repeat||function(){"use strict";var e=function(){try{var e={},t=Object.defineProperty,s=t(e,e,e)&&t}catch(i){}return s}(),t=function(e){if(null==this)throw TypeError();var t=String(this),s=e?Number(e):0;if(s!=s&&(s=0),s<0||s==1/0)throw RangeError();var i="";while(s)s%2==1&&(i+=t),s>1&&(t+=t),s>>=1;return i};e?e(String.prototype,"repeat",{value:t,configurable:!0,writable:!0}):String.prototype.repeat=t}()},f08e:function(e,t,s){},f0fa:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("DataTable",{ref:"table",staticClass:"CustomProcessPanel",attrs:{data:e.data,columns:e.columns},scopedSlots:e._u([{key:"actions",fn:function(t){return[s("button",{directives:[{name:"show",rawName:"v-show",value:e.supportsRead,expression:"supportsRead"}],attrs:{title:"Details"},on:{click:function(s){return e.processInfo(t.row)}}},[s("i",{staticClass:"fas fa-info"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supportsRead,expression:"supportsRead"}],attrs:{title:"Edit process"},on:{click:function(s){return e.showInEditor(t.row)}}},[s("i",{staticClass:"fas fa-project-diagram"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supportsDelete,expression:"supportsDelete"}],attrs:{title:"Delete"},on:{click:function(s){return e.deleteProcess(t.row)}}},[s("i",{staticClass:"fas fa-trash"})])]}}])},[s("template",{slot:"toolbar"},[s("button",{directives:[{name:"show",rawName:"v-show",value:e.supportsCreate,expression:"supportsCreate"}],attrs:{title:"Add new custom process",disabled:!this.hasProcess},on:{click:e.addProcessFromScript}},[s("i",{staticClass:"fas fa-plus"}),e._v(" Add")])])],2)},a=[],n=s("3115"),r=s("41a2"),o=s("025e"),l=s("2b70"),c={name:"CustomProcessPanel",mixins:[Object(r["a"])("userProcesses","custom process","custom processes",!1),n["a"]],data(){return{columns:{id:{name:"ID",primaryKey:!0,sort:"asc"},summary:{name:"Summary"},actions:{name:"Actions",filterable:!1,sort:!1}}}},computed:{...o["a"].mapState("editor",["process"]),...o["a"].mapGetters(["processes"]),...o["a"].mapGetters("editor",["hasProcess"])},mounted(){this.listen("replaceProcess",this.replaceProcess)},methods:{showInEditor(e){this.refreshElement(e,e=>this.emit("editProcess",e))},getIdField(e){return{value:e,name:"name",description:"A unique identifier. Must contain only letters (`a`-`z`), digits (`0`-`9`) and underscores (`_`). `snake_case` is recommended.",label:"Name",schema:{type:"string",pattern:"^\\w+$"},default:null}},addProcessFromScript(){let e=[];this.process.id?this.process.id.match("^\\w+$")?this.processes.has(this.process.id,"user")&&(e.push({label:"Warning!",description:"A process with the given name exists! If you click 'Save' below, you confirm that you want to override the existing process. If you don't want to override the existing process, please choose a different name below.",info:!0}),e.push(this.getIdField(this.process.id))):(e.push({label:"Please note...",description:"The given process name is invalid, please choose another one below.",info:!0}),e.push(this.getIdField(this.process.id))):e.push(this.getIdField());let t=e=>this.addProcess(this.normalize(this.process,e));e.length>0?this.emit("showDataForm","Store a new custom process",e,t):t()},normalize(e,t={}){return Object.assign({},"function"===typeof e.toJSON?e.toJSON():e,t)},addProcess(e){this.create({parameters:[e.id,e]}).catch(t=>o["a"].exception(this,t,"Store Process Error"+(e.id?": "+e.id:"")))},processInfo(e){this.emit("showProcess",e)},replaceProcess(e,t){e instanceof l["UserProcess"]&&this.updateMetadata(e,t)},async updateMetadata(e,t){try{let s=await this.update({data:e,parameters:this.normalize(e,t)});o["a"].ok(this,'Process "'+o["a"].getResourceTitle(s)+'" successfully updated.')}catch(s){o["a"].exception(this,s,"Update Process Error"+(e.id?": "+e.id:""))}},deleteProcess(e){confirm(`Do you really want to delete the process "${o["a"].getResourceTitle(e)}"?`)&&this.delete({data:e}).catch(t=>o["a"].exception(this,t,"Delete Process Error"+(e.id?": "+e.id:"")))}}},d=c,u=(s("1b7a"),s("2877")),h=Object(u["a"])(d,i,a,!1,null,null,null);t["a"]=h.exports}}]);
//# sourceMappingURL=chunk-6b560485.fcc4fda4.js.map