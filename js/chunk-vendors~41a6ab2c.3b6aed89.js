(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors~41a6ab2c"],{1371:function(e,t,s){const r=s("b4da"),i=s("2a0d"),a=s("bc3a").default,n=s("382f"),o=s("618e"),c=s("fcba"),l=["id","summary","description","categories","parameters","returns","deprecated","experimental","exceptions","examples","links"];class p{static async fromVersion(e=null){let t="https://processes.openeo.org/processes.json";return"string"===typeof e&&(t="https://processes.openeo.org/"+e+"/processes.json"),await p.fromURL(t)}static async fromURL(e){let t=await a(e);return new p(t.data)}constructor(e,t=null,s){if(this.id=s,this.parent=t,this.parentNode=null,this.parentParameter=null,this.nodes={},this.idCounter={},this.callbackParameterCache={},this.parameters=void 0,this.processes=null,e instanceof c)this.processes=e;else if(n.isObject(e)&&Array.isArray(e.processes))this.processes=new c(e.processes);else{if(!Array.isArray(e))throw new Error("Processes are invalid; must be array or object according to the API.");this.processes=new c(e)}this.processes.all().forEach(e=>this.createFunction(e))}createFunction(e){if("undefined"!==typeof this[e.id])throw new Error("Can't create function for process '"+e.id+"'. Already exists in Builder class.");this[e.id]=function(...t){return this.process(e.id,t)}}addProcessSpec(e,t=null){if(!n.isObject(e))throw new Error("Process '"+e.id+"' must be an object.");t||(t="backend"),this.processes.add(e,t),"backend"===t&&this.createFunction(e)}setParent(e,t){this.parentNode=e,this.parentParameter=t}createCallbackParameter(e){return this.callbackParameterCache[e]||(this.callbackParameterCache[e]=i.create(this,e)),this.callbackParameterCache[e]}getParentCallbackParameters(){let e=[];if(this.parentNode&&this.parentParameter)try{e=o.getCallbackParametersForProcess(this.parentNode.spec,this.parentParameter).map(e=>this.createCallbackParameter(e.name))}catch(t){console.warn(t)}return e}addParameter(e,t=!0){if(void 0!==this.getParentCallbackParameters().find(t=>t.name===e.name))return;let s=this;if(t)while(s.parent)s=s.parent;Array.isArray(s.parameters)||(s.parameters=[]);let r=s.parameters.findIndex(t=>t.name===e.name);-1!==r?Object.assign(s.parameters[r],e):s.parameters.push(e)}spec(e,t=null){return this.processes.get(e,t)}math(e){const t=s("b328");let r=new t(e);return r.setBuilder(this),r.generate(!1)}supports(e,t=null){return Boolean(this.spec(e,t))}process(e,t={},s=null){let i=null;if(e.includes("@")){let t;[e,...t]=e.split("@"),i=t.join("@")}let a=new r(this,e,t,s,i);return this.nodes[a.id]=a,a}toJSON(){let e={process_graph:n.mapObjectValues(this.nodes,e=>e.toJSON())};return l.forEach(t=>{"undefined"!==typeof this[t]&&(e[t]=this[t])}),e}generateId(e=""){return e=e.replace("_","").substr(0,6),this.idCounter[e]?this.idCounter[e]++:this.idCounter[e]=1,e+this.idCounter[e]}}e.exports=p},"15f0":function(e,t,s){const r=s("618e"),i=s("6118"),a=s("382f");class n{constructor(e=null,t){if(a.isObject(e)||Array.isArray(e))if(this.unspecified=!1,this.schemas=r.normalizeJsonSchema(e,!0).map(e=>new i(e,this,t)),"undefined"===typeof t){let e=this.schemas.map(e=>e.default()).filter(e=>"undefined"!==typeof e);this.default=e[0]}else this.default=t;else this.unspecified=!0,this.schemas=[];this.refs=[]}toJSON(){return this.schemas.map(e=>e.toJSON())}isEditable(){return this.unspecified||this.schemas.filter(e=>e.isEditable()&&!e.isNull()).length>0}is(e){var t=this.dataTypes();return 1===t.length&&t[0]===e}nativeDataType(){return this.dataType(!0)}dataType(e=!1){var t=this.dataTypes(!0,e),s=t.indexOf("null");return 1===t.length?t[0]:2===t.length&&-1!==s?t[0===s?1:0]:"mixed"}dataTypes(e=!1,t=!1){var s=this.schemas.map(e=>e.dataType(t)).filter((e,t,s)=>s.indexOf(e)===t);return 0===s.length||s.includes("any")?["any"]:e?s:s.filter(e=>"null"!==e)}nullable(){return this.unspecified||this.schemas.filter(e=>e.nullable()).length>0}}e.exports=n},"180f":function(e,t,s){const r=s("2d51"),i=s("d1ab");class a extends r{constructor(e,t){super(e,["id","title","description","process","url","type","enabled","configuration","attributes","created","plan","costs","budget"]),this.id=t,this.title=void 0,this.description=void 0,this.process=void 0,this.url=void 0,this.type=void 0,this.enabled=void 0,this.configuration=void 0,this.attributes=void 0,this.created=void 0,this.plan=void 0,this.costs=void 0,this.budget=void 0}async describeService(){let e=await this.connection._get("/services/"+this.id);return this.setAll(e.data)}async updateService(e){return await this.connection._patch("/services/"+this.id,this._convertToRequest(e)),this._supports("describeService")?await this.describeService():this.setAll(e)}async deleteService(){await this.connection._delete("/services/"+this.id)}debugService(){return new i(this.connection,"/services/"+this.id+"/logs")}monitorService(e,t=60,s=!0){if("function"!==typeof e||t<1)return;let r=this.connection.capabilities();if(!r.hasFeature("describeService"))throw new Error("Monitoring Services not supported by the back-end.");let i=this.enabled,a=null,n=null;r.hasFeature("debugService")&&s&&(n=this.debugService());let o=async()=>{this.getDataAge()>1&&await this.describeService();let t=n?await n.nextLogs():[];(i!==this.enabled||t.length>0)&&e(this,t),i=this.enabled};setTimeout(o,0),a=setInterval(o,1e3*t);let c=()=>{a&&(clearInterval(a),a=null)};return c}}e.exports=a},"1be6":function(e,t){class s{static getName(){return"Browser"}static getUrl(){return window.location.toString()}static setUrl(e){throw new Error("setUrl is not supported in a browser environment.")}static handleErrorResponse(e){return new Promise((t,s)=>{let r=new FileReader;r.onerror=e=>{r.abort(),s(e.target.error)},r.onload=()=>{let e=r.result instanceof ArrayBuffer?String.fromCharCode.apply(null,new Uint16Array(r.result)):r.result,s="string"===typeof e?JSON.parse(e):e;t(s)},r.readAsText(e.response.data)})}static getResponseType(){return"blob"}static base64encode(e){return btoa(e)}static fileNameForUpload(e){return e.name.split(/(\\|\/)/g).pop()}static dataForUpload(e){return e}static async downloadResults(e,t,s){throw new Error("downloadResults is not supported in a browser environment.")}static saveToFile(e,t){return new Promise((s,r)=>{try{e instanceof Blob||(e=new Blob([e],{type:"application/octet-stream"}));let r=window.URL.createObjectURL(e),i=document.createElement("a");i.style.display="none",i.href=r,i.setAttribute("download",t||"download"),"undefined"===typeof i.download&&i.setAttribute("target","_blank"),document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(r),s()}catch(i){console.error(i),r(i)}})}}e.exports=s},"1f2f":function(e,t,s){const r=s("382f"),i=s("ab25"),a=s("4f10"),n={cube:"datacube",eo:"eo",label:"label",pc:"pointcloud",proj:"projection",sar:"sar",sat:"sat",sci:"scientific",view:"view"},o={"item:license":"license","item:providers":"providers","eo:instrument":"instruments","eo:platform":"platform","eo:constellation":"constellation","eo:epsg":"proj:epsg","eo:off_nadir":"view:off_nadir","eo:azimuth":"view:azimuth","eo:sun_azimuth":"view:sun_azimuth","eo:sun_elevation":"view:sun_elevation","dtr:start_datetime":"start_datetime","dtr:end_datetime":"end_datetime","pc:schema":"pc:schemas","sar:type":"sar:product_type","sar:polarization":"sar:polarizations","sar:instrument":"instruments","sar:platform":"platform","sar:constellation":"constellation","sar:off_nadir":"sat:off_nadir_angle","sar:relative_orbit":"sat:relative_orbit","sar:pass_direction":"sat:orbit_state"},c=["cube:dimensions","sci:publications","sci:doi","sci:citation"],l=["spatial","temporal","bands","other"];class p{static convertCollectionsToLatestSpec(e,t){if(i.compare(t,"0.3.x","<="))throw"Migrating from API version 0.3.0 and older is not supported.";return e=r.deepClone(e),Array.isArray(e.collections)?e.collections=e.collections.map(e=>p.convertCollectionToLatestSpec(e,t)).filter(e=>"string"===typeof e.id):e.collections=[],e.links=a.migrateLinks(e.links,t),e}static convertCollectionToLatestSpec(e,t){if(i.compare(t,"0.3.x","<="))throw"Migrating from API version 0.3.0 and older is not supported.";let s=r.deepClone(e);if("string"!==typeof s.id||0===s.id.length)return{};if(i.validate(s.stac_version)&&!i.compare(s.stac_version,"0.9.0","<")||(s.stac_version="0.9.0"),r.isObject(s.extent)||(s.extent={}),i.compare(t,"0.4.x","=")){if(Array.isArray(s.extent.spatial)&&(s.extent.spatial={bbox:[s.extent.spatial]}),Array.isArray(s.extent.temporal)&&(s.extent.temporal={interval:[s.extent.temporal]}),r.isObject(s.properties)){r.isObject(s.other_properties)||(s.other_properties={});for(let e in s.properties)s.other_properties[e]={values:[s.properties[e]]}}delete s.properties;let e=r.isObject(s.other_properties)?s.other_properties:{};for(let t in e){let i=e[t];r.isObject(i)&&(Array.isArray(i.extent)||Array.isArray(i.values))?Array.isArray(i.extent)?e[t]={min:i.extent[0],max:i.extent[1]}:-1===i.values.findIndex(e=>!Array.isArray(e))?i.values.length<=1?e[t]=i.values[0]:e[t]=i.values.reduce((e,t)=>e.concat(t)):e[t]=i.values:("undefined"===typeof s[t]&&(s[t]=i),delete e[t])}delete s.other_properties,r.isObject(s.summaries)||(s.summaries={});for(let t in e){let r=e[t];"sar:pass_direction"===t&&(r=r.map(e=>null===e?"geostationary":e)),("sar:resolution"===t||"sar:pixel_spacing"===t||"sar:looks"===t)&&Array.isArray(r)&&r.length>=2?(s.summaries[t+"_range"]=r.slice(0,1),s.summaries[t+"_azimuth"]=r.slice(1,2),r.length>2&&(s.summaries[t+"_equivalent_number"]=r.slice(2,3))):"string"===typeof o[t]?s.summaries[o[t]]=r:c.includes(t)&&Array.isArray(r)&&1===r.length?s[t]=r[0]:s.summaries[t]=r}}if("string"!==typeof s.description&&(s.description=""),r.isObject(s.extent.spatial)||(s.extent.spatial={}),r.isObject(s.extent.temporal)||(s.extent.temporal={}),"string"!==typeof s.license&&(s.license="proprietary"),r.isObject(s.summaries)||(s.summaries={}),r.isObject(s["cube:dimensions"]))for(var p in s["cube:dimensions"])r.isObject(s["cube:dimensions"][p])&&!l.includes(s["cube:dimensions"][p].type)&&(s["cube:dimensions"][p].type="other");else s["cube:dimensions"]={};s.links=a.migrateLinks(s.links);var d=Array.isArray(s.stac_extensions)?s.stac_extensions:[];for(var u in s){let e=null,t=u.split(":",1);"deprecated"===u||"version"===u?e="version":"string"===typeof n[t]&&(e=n[t]),null===e||d.includes(e)||d.push(e)}return d.sort(),s.stac_extensions=d,s}}e.exports=p},2356:function(e,t,s){const r=s("382f");class i{constructor(e){if(!r.isObject(e))throw new Error("No capabilities retrieved.");if(!e.api_version)throw new Error("Invalid capabilities: No API version retrieved");if(!Array.isArray(e.endpoints))throw new Error("Invalid capabilities: No endpoints retrieved");this.data=e,this.features=this.data.endpoints.map(e=>e.methods.map(t=>(t+" "+e.path).toLowerCase())).reduce((e,t)=>e.concat(t),[]),this.featureMap={capabilities:!0,listFileTypes:"get /file_formats",listServiceTypes:"get /service_types",listUdfRuntimes:"get /udf_runtimes",listCollections:"get /collections",describeCollection:"get /collections/{collection_id}",listCollectionItems:"get /collections/{collection_id}/items",listProcesses:"get /processes",describeProcess:"get /processes",listAuthProviders:!0,authenticateOIDC:"get /credentials/oidc",authenticateBasic:"get /credentials/basic",describeAccount:"get /me",listFiles:"get /files",getFile:"get /files",uploadFile:"put /files/{path}",downloadFile:"get /files/{path}",deleteFile:"delete /files/{path}",validateProcess:"post /validation",listUserProcesses:"get /process_graphs",describeUserProcess:"get /process_graphs/{process_graph_id}",getUserProcess:"get /process_graphs/{process_graph_id}",setUserProcess:"put /process_graphs/{process_graph_id}",replaceUserProcess:"put /process_graphs/{process_graph_id}",deleteUserProcess:"delete /process_graphs/{process_graph_id}",computeResult:"post /result",listJobs:"get /jobs",createJob:"post /jobs",listServices:"get /services",createService:"post /services",getJob:"get /jobs/{job_id}",describeJob:"get /jobs/{job_id}",updateJob:"patch /jobs/{job_id}",deleteJob:"delete /jobs/{job_id}",estimateJob:"get /jobs/{job_id}/estimate",debugJob:"get /jobs/{job_id}/logs",startJob:"post /jobs/{job_id}/results",stopJob:"delete /jobs/{job_id}/results",listResults:"get /jobs/{job_id}/results",downloadResults:"get /jobs/{job_id}/results",describeService:"get /services/{service_id}",getService:"get /services/{service_id}",updateService:"patch /services/{service_id}",deleteService:"delete /services/{service_id}",debugService:"get /services/{service_id}/logs"}}toJSON(){return this.data}apiVersion(){return this.data.api_version}backendVersion(){return this.data.backend_version}title(){return"string"===typeof this.data.title?this.data.title:""}description(){return"string"===typeof this.data.description?this.data.description:""}isStable(){return!0===this.data.production}links(){return Array.isArray(this.data.links)?this.data.links:[]}listFeatures(){let e=[];for(let t in this.featureMap)(!0===this.featureMap[t]||this.features.includes(this.featureMap[t]))&&e.push(t);return e.sort()}hasFeature(e){return!0===this.featureMap[e]||this.features.some(t=>t===this.featureMap[e])}currency(){return r.isObject(this.data.billing)&&"string"===typeof this.data.billing.currency?this.data.billing.currency:null}listPlans(){if(r.isObject(this.data.billing)&&Array.isArray(this.data.billing.plans)){let e="string"===typeof this.data.billing.default_plan?this.data.billing.default_plan.toLowerCase():null;return this.data.billing.plans.map(t=>{let s={default:e===t.name.toLowerCase()};return Object.assign({},t,s)})}return[]}}e.exports=i},2447:function(e,t,s){const r=s("382f"),i=s("ab25"),a=s("4f10"),n="0.0.0";class o{static guessApiVersion(e){if(!r.isObject(e))return n;if(i.validate(e.api_version))return e.api_version;if(i.validate(e.version))return e.version;if(Array.isArray(e.endpoints)){if(e.endpoints.find(e=>"/file_formats"===e.path||"/conformance"===e.path||"/files"===e.path))return"1.0.0";if(e.endpoints.find(e=>"/output_formats"===e.path||"/files/{user_id}"===e.path))return"0.4.2";if(!e.backend_version&&!e.title&&!e.description&&!e.links)return"0.3.1"}return n}static convertCapabilitiesToLatestSpec(e,t=null,s=!0,o=!0,c="unknown",l="Unknown",p="0.0.0"){if(null===t&&(t=this.guessApiVersion(e)),t===n)return{};if(i.compare(t,"0.3.x","<="))throw"Migrating from API version 0.3.0 and older is not supported.";let d=r.deepClone(e);return d.api_version=s?"1.0.0":t,r.isObject(d.billing)?d.billing=this.convertBillingToLatestSpec(d.billing,t):delete d.billing,d.endpoints=this.convertEndpointsToLatestSpec(d.endpoints,t,o),!s&&i.compare(t,"0.4.x","=")?d.stac_version="0.6.2":(s||"string"!==typeof d.stac_version)&&(d.stac_version="0.9.0"),"boolean"!==typeof d.production&&(d.production=!(!i.compare(t,"1.0.0-rc.1","=")&&!i.compare(t,"1.0.0-rc.2","="))),"string"!==typeof d.backend_version&&(d.backend_version=p),"string"!==typeof d.id&&(d.id=c),"string"!==typeof d.title&&(d.title=l),"string"!==typeof d.description&&(d.description=""),d.links=a.migrateLinks(d.links,t),d}static convertBillingToLatestSpec(e,t){if(i.compare(t,"0.3.x","<="))throw"Migrating from API version 0.3.0 and older is not supported.";return e=r.isObject(e)?r.deepClone(e):{},"string"!==typeof e.currency&&(e.currency=null),e}static convertEndpointsToLatestSpec(e,t,s=!1){if(i.compare(t,"0.3.x","<="))throw"Migrating from API version 0.3.0 and older is not supported.";if(!Array.isArray(e))return[];if(e=r.deepClone(e),s){let s=i.compare(t,"0.4.x","="),r=i.compare(t,"1.0.0-rc.2","<"),n=function(e){let t="/process_graphs/{process_graph_id}",s=e.findIndex(e=>e.path===t);return s>=0?-1===e[s].methods.indexOf("PUT")&&e[s].methods.push("PUT"):e.push({path:t,methods:["PUT"]}),e};for(var a in e){let t=e[a];if(s)switch(t.path){case"/output_formats":t.path="/file_formats";break;case"/files/{user_id}":t.path="/files";break;case"/files/{user_id}/{path}":t.path="/files/{path}";break}if(r)switch(t.path){case"/process_graphs":let s=t.methods.indexOf("POST");s>=0&&(t.methods.splice(s,1),n(e));break;case"/process_graphs/{process_graph_id}":let r=t.methods.indexOf("PATCH");r>=0&&(t.methods.splice(r,1),n(e));break}}}return e}static convertOutputFormatsToLatestSpec(e,t){return this.convertFileFormatsToLatestSpec(e,t)}static convertFileFormatsToLatestSpec(e,t){if(i.compare(t,"0.3.x","<="))throw"Migrating from API version 0.3.0 and older is not supported.";return e=r.isObject(e)?r.deepClone(e):{},i.compare(t,"0.4.x","=")&&r.isObject(e)&&(e={output:e}),e.input=l(e.input,t),e.output=l(e.output,t),e}static convertServiceTypesToLatestSpec(e,t){if(i.compare(t,"0.3.x","<="))throw"Migrating from API version 0.3.0 and older is not supported.";if(!r.isObject(e))return{};e=r.deepClone(e);for(let s in e)r.isObject(e[s])||(e[s]={}),i.compare(t,"0.4.x","=")&&(delete e[s].attributes,r.isObject(e[s].parameters)&&(e[s].configuration=e[s].parameters),delete e[s].parameters,Array.isArray(e[s].variables)&&(e[s].process_parameters=e[s].variables.map(e=>{let t={name:e.variable_id,description:"string"===typeof e.description?e.description:"",schema:{type:["string"===typeof e.type?e.type:"string","null"]}};return"undefined"!==typeof e.default&&(t.default=e.default),t})),delete e[s].variables),r.isObject(e[s].configuration)?e[s].configuration=a.migrateDiscoveryParameters(e[s].configuration,t):e[s].configuration={},Array.isArray(e[s].process_parameters)||(e[s].process_parameters=[]),"undefined"!==typeof e[s].links&&(e[s].links=a.migrateLinks(e[s].links,t));return e}static convertUdfRuntimesToLatestSpec(e,t){if(i.compare(t,"0.3.x","<="))throw"Migrating from API version 0.3.0 and older is not supported.";if(!r.isObject(e))return{};e=r.deepClone(e);for(let s in e){if(i.compare(t,"0.4.x","=")){if(!r.isObject(e[s])){delete e[s];continue}null===e[s].description&&(e[s].description="")}"string"!==typeof e[s].type&&("string"===typeof e[s].docker?e[s].type="docker":e[s].type="language"),"undefined"!==typeof e[s].links&&(e[s].links=a.migrateLinks(e[s].links,t))}return e}}const c=["raster","vector","table","other"];function l(e,t){r.isObject(e)||(e={});for(let s in e)r.isObject(e[s].parameters)?e[s].parameters=a.migrateDiscoveryParameters(e[s].parameters,t):e[s].parameters={},Array.isArray(e[s].gis_data_types)?e[s].gis_data_types=e[s].gis_data_types.filter(e=>c.includes(e)):e[s].gis_data_types=[],"undefined"!==typeof e[s].links&&(e[s].links=a.migrateLinks(e[s].links,t));return e}e.exports=o},"2a0d":function(e,t,s){"use strict";class r{static create(e,t){let s=new r(t,null);if("undefined"!==typeof Proxy)return new Proxy(s,{nodeCache:{},get(t,r,i){if(!Reflect.has(t,r)){if(!this.nodeCache[r]){let t={data:s};"string"===typeof r&&r.match(/^(0|[1-9]\d*)$/)?t.index=parseInt(r,10):t.label=r,this.nodeCache[r]=e.process("array_element",t)}return this.nodeCache[r]}return Reflect.get(t,r,i)},set(e,t,s,r){if(!Reflect.has(e,t))throw new Error("Simplified array access is read-only");return Reflect.set(e,t,s,r)}});throw new Error("Simplified array access not supported, use array_element directly")}constructor(e,t={},s="",r){this.name=e,this.spec={name:e,schema:"string"===typeof t?{type:t}:t,description:s},"undefined"!==typeof r&&(this.spec.optional=!0,this.spec.default=r)}toJSON(){return this.spec}ref(){return{from_parameter:this.name}}}e.exports=r},"2b70":function(e,t,s){const r=s("bc3a").default,{AbortController:i}=s("abc5"),a=s("382f"),n=s("ab25"),o=s("2cc5"),c=s("7c24"),l=s("d1ab"),p=s("42dc"),d=s("f697"),u=s("180f"),h=s("f3f5"),f=s("d0ab"),m=s("67b9"),y=s("2356"),g=s("d590"),b=s("1371"),w=s("b4da"),v=s("2a0d"),A=s("b328"),_="1.0.0-rc.2",O="1.x.x";class j{static async connect(e,t={}){let s=a.normalizeUrl(e,"/.well-known/openeo"),i=e,o=null;try{if(o=await r.get(s,{timeout:5e3}),!a.isObject(o.data)||!Array.isArray(o.data.versions))throw new Error("Well-Known Document doesn't list any versions.")}catch(l){console.warn("Can't read well-known document, connecting directly to the specified URL as fallback mechanism. Reason: "+l.message)}if(a.isObject(o)){let e=n.findLatest(o.data.versions,!0,_,O);if(null===e)throw new Error("Server not supported. Client only supports the API versions between "+_+" and "+O);i=e.url}let c=await j.connectDirect(i,t);return c.url=e,c}static async connectDirect(e,t={}){let s=new o(e,t),r=await s.init();if(n.compare(r.apiVersion(),_,"<")||n.compare(r.apiVersion(),O,">"))throw new Error("Client only supports the API versions between "+_+" and "+O);return s}static clientVersion(){return"2.5.1"}}j.Environment=s("7ab3"),e.exports={AbortController:i,AuthProvider:h,BasicProvider:f,Capabilities:y,Connection:o,FileTypes:g,Job:c,Logs:l,OidcProvider:m,OpenEO:j,Service:u,UserFile:p,UserProcess:d,Builder:b,BuilderNode:w,Parameter:v,Formula:A}},"2c72":function(e,t,s){const r=s("382f"),i=s("ab25"),a=s("4f10");class n{static convertProcessesToLatestSpec(e,t){if(i.compare(t,"0.3.x","<="))throw"Migrating from API version 0.3.0 and older is not supported.";return e=r.deepClone(e),Array.isArray(e.processes)?e.processes=e.processes.map(e=>n.convertProcessToLatestSpec(e,t)).filter(e=>"string"===typeof e.id):e.processes=[],e.links=a.migrateLinks(e.links,t),e}static convertProcessToLatestSpec(e,t){if(i.compare(t,"0.3.x","<="))throw"Migrating from API version 0.3.0 and older is not supported.";if(e=r.deepClone(e),"string"!==typeof e.id||0===e.id.length)return{};if(i.compare(t,"0.4.x","=")){if(!Array.isArray(e.parameter_order)||0===e.parameter_order.length){e.parameter_order=[];for(let t in e.parameters)e.parameter_order.push(t)}let t=[];for(let s of e.parameter_order){let i={name:s};r.isObject(e.parameters[s])&&Object.assign(i,e.parameters[s]),i.required||(i.optional=!0),delete i.required,t.push(i)}delete e.parameter_order,e.parameters=t}if("string"!==typeof e.description&&(e.description=""),Array.isArray(e.parameters))for(var s=e.parameters.length-1;s>=0;s--){let i=e.parameters[s];r.isObject(i)?("string"!==typeof i.description&&(i.description=""),e.parameters[s]=o(i,t)):e.parameters.splice(s,1)}else e.parameters=[];return r.isObject(e.returns)||(e.returns={}),e.returns=o(e.returns,t,!1),Array.isArray(e.examples)&&(e.examples=e.examples.filter(e=>r.isObject(e)&&r.isObject(e.arguments))),"undefined"!==typeof e.links&&(e.links=a.migrateLinks(e.links,t)),e}}function o(e,t,s=!0){var r={};if(e.schema&&"object"===typeof e.schema&&(r=e.schema),i.compare(t,"0.4.x","=")){for(let t of["anyOf","oneOf"])if(Array.isArray(r[t])){s&&"undefined"!==typeof r.default&&(e.default=r.default),r=r[t];break}let a=i.compare(t,"0.4.x")<=0&&"undefined"!==typeof e.media_type,n=Array.isArray(r)?r:[r];for(let t of n)t=c(t),s&&"undefined"!==typeof t.default&&(e.default=t.default,delete t.default),a&&(t.contentMediaType=e.media_type);a&&delete e.media_type}return i.compare(t,"0.4.x",">")&&"undefined"!==typeof e.default&&(e.optional=!0),e.schema=r,e}function c(e){if(r.isObject(e)&&"undefined"!==typeof e.type&&"string"===typeof e.format){switch(e.format){case"url":e.format="uri";break;case"proj-definition":e.deprecated=!0;break;case"callback":if(e.format="process-graph",r.isObject(e.parameters)){let t=[];for(let s in e.parameters){let r=e.parameters[s],i={name:s,description:"string"===typeof r.description?r.description:"",schema:r};t.push(i)}e.parameters=t}break}e.subtype=e.format,["date-time","time","date","uri"].includes(e.format)||delete e.format}for(let t in e)e[t]&&"object"===typeof e[t]&&(e[t]=c(e[t]));return e}e.exports=n},"2cc5":function(e,t,s){const r=s("7ab3"),i=s("382f"),a=s("fcba"),n=s("bc3a").default,o=s("7f1d"),c=s("f3f5"),l=s("d0ab"),p=s("67b9"),d=s("2356"),u=s("d590"),h=s("42dc"),f=s("7c24"),m=s("f697"),y=s("180f"),g=s("1371"),b=s("b4da");class w{constructor(e,t={},s=null){this.url=s,this.baseUrl=i.normalizeUrl(e),this.authProviderList=null,this.authProvider=null,this.capabilitiesObject=null,this.listeners={},this.options=t,this.processes=new a([],Boolean(t.addNamespaceToProcess)),this.processes.listeners.push((...e)=>this.emit("processesChanged",...e))}async init(){let e=await this._get("/");return this.capabilitiesObject=new d(e.data),this.capabilitiesObject}async refreshProcessCache(){if(0===this.processes.count())return;let e=this.processes.namespaces().map(e=>{let t=()=>Promise.resolve();if("user"===e){let e=this.processes.namespace("user");this.isAuthenticated()?this.capabilities().hasFeature("listUserProcesses")&&(t=()=>this.listUserProcesses(e)):t=()=>this.processes.remove(null,"user")?Promise.resolve():Promise.reject(new Error("Can't clear user processes"))}else this.capabilities().hasFeature("listProcesses")&&(t=()=>this.listProcesses(e));return t().catch(t=>console.warn(`Could not update processes for namespace '${e}' due to an error: ${t.message}`))});return await Promise.all(e)}getBaseUrl(){return this.baseUrl}getUrl(){return this.url||this.baseUrl}capabilities(){return this.capabilitiesObject}async listFileTypes(){let e=await this._get("/file_formats");return new u(e.data)}async listServiceTypes(){let e=await this._get("/service_types");return e.data}async listUdfRuntimes(){let e=await this._get("/udf_runtimes");return e.data}async listCollections(){let e=await this._get("/collections");return i.isObject(e.data)&&Array.isArray(e.data.collections)&&(e.data.collections=e.data.collections.map(e=>o.collection(e))),e.data}async describeCollection(e){let t=await this._get("/collections/"+e);return o.collection(t.data)}async*listCollectionItems(e,t=null,s=null,r=null){let a=1,n="/collections/"+e+"/items";while(n){let e={};1===a&&(Array.isArray(t)&&(e.bbox=t.join(",")),Array.isArray(s)&&(e.datetime=s.map(e=>e instanceof Date?e.toISOString():"string"===typeof e?e:"..").join("/")),r>0&&(e.limit=r));let c=await this._get(n,e);i.isObject(c.data)&&Array.isArray(c.data.features)&&(c.data.features=c.data.features.map(e=>o.item(e))),yield c.data,a++,n=this._getLinkHref(c.data.links)}}normalizeNamespace(e){const t=e.match(/^https?:\/\/.*\/processes\/(@?[\w\-.~:]+)\/?/i);return t&&t.length>1?t[1]:e}async listProcesses(e=null){e||(e="backend");let t="backend"===e?"/processes":"/processes/"+this.normalizeNamespace(e),s=await this._get(t);if(!i.isObject(s.data)||!Array.isArray(s.data.processes))throw new Error("Invalid response received for processes");return this.processes.remove(null,e),this.processes.addAll(s.data.processes,e),Object.assign(s.data,{processes:this.processes.namespace(e)})}async describeProcess(e,t=null){if(t||(t="backend"),"backend"===t)await this.listProcesses();else{let s=await this._get(`/processes/${this.normalizeNamespace(t)}/${e}`);if(!i.isObject(s.data)||"string"!==typeof s.data.id)throw new Error("Invalid response received for process");this.processes.add(s.data,t)}return this.processes.get(e,t)}async buildProcess(e){return await this.listProcesses(),new g(this.processes,null,e)}async listAuthProviders(){if(null!==this.authProviderList)return this.authProviderList;this.authProviderList=[];let e=this.capabilities();if(e.hasFeature("authenticateOIDC")){let e=await this._get("/credentials/oidc"),t=this.getOidcProviderFactory();if(i.isObject(e.data)&&Array.isArray(e.data.providers)&&"function"===typeof t)for(let s in e.data.providers){let r=t(e.data.providers[s]);r instanceof c&&this.authProviderList.push(r)}}return e.hasFeature("authenticateBasic")&&this.authProviderList.push(new l(this)),this.authProviderList}setOidcProviderFactory(e){this.oidcProviderFactory=e}getOidcProviderFactory(){return"function"===typeof this.oidcProviderFactory?this.oidcProviderFactory:p.isSupported()?e=>new p(this,e):null}async authenticateBasic(e,t){let s=new l(this);await s.login(e,t)}isAuthenticated(){return null!==this.authProvider}emit(e,...t){"function"===typeof this.listeners[e]&&this.listeners[e](...t)}on(e,t){this.listeners[e]=t}off(e){delete this.listeners[e]}getAuthProvider(){return this.authProvider}setAuthProvider(e){e!==this.authProvider&&(this.authProvider=e instanceof c?e:null,this.emit("authProviderChanged",this.authProvider),this.refreshProcessCache())}setAuthToken(e,t,s){let r=new c(e,this,{id:t,title:"Custom",description:""});return r.setToken(s),this.setAuthProvider(r),r}async describeAccount(){let e=await this._get("/me");return e.data}async listFiles(){let e=await this._get("/files"),t=e.data.files.map(e=>new h(this,e.path).setAll(e));return this._toResponseArray(t,e.data)}async uploadFile(e,t=null,s=null,i=null){null===t&&(t=r.fileNameForUpload(e));let a=await this.getFile(t);return await a.uploadFile(e,s,i)}async getFile(e){return new h(this,e)}_normalizeUserProcess(e,t={}){return e instanceof m?e=e.toJSON():e instanceof b?(e.result=!0,e=e.parent.toJSON()):i.isObject(e)&&!i.isObject(e.process_graph)&&(e={process_graph:e}),Object.assign({},t,{process:e})}async validateProcess(e){let t=await this._post("/validation",this._normalizeUserProcess(e).process);if(Array.isArray(t.data.errors))return t.data.errors;throw new Error("Invalid validation response received.")}async listUserProcesses(e=[]){let t=await this._get("/process_graphs");if(!i.isObject(t.data)||!Array.isArray(t.data.processes))throw new Error("Invalid response received for processes");this.processes.remove(null,"user");let s=t.data.processes.map(t=>{let s=e.find(e=>e.id===t.id);return s||(s=new m(this,t.id)),s.setAll(t)}),r=e.length>0?s.map(e=>e.toJSON()):t.data.processes;return this.processes.addAll(r,"user"),this._toResponseArray(s,t.data)}async setUserProcess(e,t){let s=new m(this,e);return await s.replaceUserProcess(t)}async getUserProcess(e){let t=new m(this,e);return await t.describeUserProcess()}async computeResult(e,t=null,s=null,a=null){let n=this._normalizeUserProcess(e,{plan:t,budget:s}),o=await this._post("/result",n,r.getResponseType(),a),c={data:o.data,costs:null,type:null,logs:[]};"number"===typeof o.headers["openeo-costs"]&&(c.costs=o.headers["openeo-costs"]),"string"===typeof o.headers["content-type"]&&(c.type=o.headers["content-type"]);let l=Array.isArray(o.headers.link)?o.headers.link:[o.headers.link];for(let r of l){if("string"!==typeof r)continue;let e=r.match(/^<([^>]+)>;\s?rel="monitor"/i);if(Array.isArray(e)&&e.length>1)try{let t=await this._get(e[1]);i.isObject(t.data)&&Array.isArray(t.data.logs)&&(c.logs=t.data.logs)}catch(p){console.warn(p)}}return c}async downloadResult(e,t,s=null,i=null,a=null){let n=await this.computeResult(e,s,i,a);await r.saveToFile(n.data,t)}async listJobs(e=[]){let t=await this._get("/jobs"),s=t.data.jobs.map(t=>{let s=e.find(e=>e.id===t.id);return s||(s=new f(this,t.id)),s.setAll(t)});return this._toResponseArray(s,t.data)}async createJob(e,t=null,s=null,r=null,i=null,a={}){a=Object.assign({},a,{title:t,description:s,plan:r,budget:i});let n=this._normalizeUserProcess(e,a),o=await this._post("/jobs",n);if("string"!==typeof o.headers["openeo-identifier"])throw new Error("Response did not contain a Job ID. Job has likely been created, but may not show up yet.");let c=new f(this,o.headers["openeo-identifier"]).setAll(n);return this.capabilities().hasFeature("describeJob")?await c.describeJob():c}async getJob(e){let t=new f(this,e);return await t.describeJob()}async listServices(e=[]){let t=await this._get("/services"),s=t.data.services.map(t=>{let s=e.find(e=>e.id===t.id);return s||(s=new y(this,t.id)),s.setAll(t)});return this._toResponseArray(s,t.data)}async createService(e,t,s=null,r=null,i=!0,a={},n=null,o=null,c={}){let l=this._normalizeUserProcess(e,Object.assign({title:s,description:r,type:t,enabled:i,configuration:a,plan:n,budget:o},c)),p=await this._post("/services",l);if("string"!==typeof p.headers["openeo-identifier"])throw new Error("Response did not contain a Service ID. Service has likely been created, but may not show up yet.");let d=new y(this,p.headers["openeo-identifier"]).setAll(l);return this.capabilities().hasFeature("describeService")?d.describeService():d}async getService(e){let t=new y(this,e);return await t.describeService()}_toResponseArray(e,t){return e.links=Array.isArray(t.links)?t.links:[],e["federation:missing"]=Array.isArray(t["federation:missing"])?t["federation:missing"]:[],e}_getLinkHref(e,t="next"){if(Array.isArray(e)){let s=e.find(e=>i.isObject(e)&&e.rel===t&&"string"===typeof e.href);if(s)return s.href}return null}async _get(e,t,s){return await this._send({method:"get",responseType:s,url:e,timeout:"/"===e?5e3:0,params:t})}async _post(e,t,s,r=null){let i={method:"post",responseType:s,url:e,data:t};return await this._send(i,r)}async _put(e,t){return await this._send({method:"put",url:e,data:t})}async _patch(e,t){return await this._send({method:"patch",url:e,data:t})}async _delete(e){return await this._send({method:"delete",url:e})}async download(e,t){let s=await this._send({method:"get",responseType:r.getResponseType(),url:e,authorization:t});return s.data}async _send(e,t=null){e.baseURL=this.baseUrl,!this.isAuthenticated()||"undefined"!==typeof e.authorization&&!0!==e.authorization||(e.headers||(e.headers={}),e.headers.Authorization="Bearer "+this.authProvider.getToken()),e.responseType||(e.responseType="json"),t&&(e.signal=t.signal);try{return await n(e)}catch(s){const t=e=>"string"===typeof e&&-1!==e.indexOf("/json"),n=(e,t)=>("string"===typeof t.message&&(e.message=t.message),e.code="string"===typeof t.code?t.code:"",e.id=t.id,e.links=Array.isArray(t.links)?t.links:[],e);if(i.isObject(s.response)&&i.isObject(s.response.data)&&(t(s.response.data.type)||i.isObject(s.response.headers)&&t(s.response.headers["content-type"]))){if(e.responseType!==r.getResponseType())throw n(s,s.response.data);try{let e=await r.handleErrorResponse(s);throw n(s,e)}catch(a){console.error(a)}}throw s}}}e.exports=w},"2d51":function(e,t){class s{constructor(e,t=[]){this.connection=e,this.apiToClientNames={},this.clientToApiNames={},this.lastRefreshTime=0,this.extra={};for(let s in t){let e,r;Array.isArray(t[s])?(e=t[s][0],r=t[s][1]):(e=t[s],r=t[s]),this.apiToClientNames[e]=r,this.clientToApiNames[r]=e}}toJSON(){let e={};for(let t in this.clientToApiNames){let s=this.clientToApiNames[t];"undefined"!==typeof this[t]&&(e[s]=this[t])}return Object.assign(e,this.extra)}setAll(e){for(let t in e)"undefined"===typeof this.apiToClientNames[t]?this.extra[t]=e[t]:this[this.apiToClientNames[t]]=e[t];return this.lastRefreshTime=Date.now(),this}getDataAge(){return(Date.now()-this.lastRefreshTime)/1e3}getAll(){let e={};for(let t in this.apiToClientNames){let s=this.apiToClientNames[t];"undefined"!==typeof this[s]&&(e[s]=this[s])}return Object.assign(e,this.extra)}get(e){return"undefined"!==typeof this.extra[e]?this.extra[e]:null}_convertToRequest(e){let t={};for(let s in e)"undefined"===typeof this.clientToApiNames[s]?t[s]=e[s]:t[this.clientToApiNames[s]]=e[s];return t}_supports(e){return this.connection.capabilities().hasFeature(e)}}e.exports=s},"382f":function(e,t,s){var r=s("9f6a");class i{static isObject(e){return"object"===typeof e&&e===Object(e)&&!Array.isArray(e)}static hasText(e){return"string"===typeof e&&e.length>0}static equals(e,t){return r(e,t)}static pickFromObject(e,t){e=Object(e),"string"===typeof t&&(t=[t]);const s={};return t.forEach(t=>s[t]=e[t]),s}static omitFromObject(e,t){e=Object(e),"string"===typeof t&&(t=[t]);var s=Object.assign({},e);for(let r of t)delete s[r];return s}static mapObject(e,t){const s=Object.keys(e),r=new Array(s.length);return s.forEach((s,i)=>{r[i]=t(e[s],s,e)}),r}static mapObjectValues(e,t){e=Object(e);const s={};return Object.keys(e).forEach(r=>{s[r]=t(e[r],r,e)}),s}static unique(e,t=!1){return t?e.filter((e,t,s)=>s.findIndex(t=>i.equals(e,t))===t):[...new Set(e)]}static size(e){return"object"===typeof e&&null!==e?Array.isArray(e)?e.length:Object.keys(e).length:0}static isNumeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}static deepClone(e){return JSON.parse(JSON.stringify(e))}static normalizeUrl(e,t=null){let s=e.replace(/\/$/,"");return"string"===typeof t&&("/"!==t.substr(0,1)&&(t="/"+t),s+=t.replace(/\/$/,"")),s}static replacePlaceholders(e,t={}){if("string"===typeof e&&i.isObject(t))for(var s in t){let r=t[s];e=e.replace("{"+s+"}",Array.isArray(r)?r.join("; "):r)}return e}static compareStringCaseInsensitive(e,t){return"string"!==typeof e&&(e=String(e)),"string"!==typeof t&&(t=String(t)),e.localeCompare(t,void 0,{numeric:!0,sensitivity:"base"})}static prettifyString(e,t="; "){return Array.isArray(e)||(e=[String(e)]),e=e.map(e=>{if(e.length>=3){const t=(e,t,s)=>t+" "+s.toUpperCase();return e=e.includes("_")?e.replace(/([a-zA-Z\d])_([a-zA-Z\d])/g,t):e.includes("-")?e.replace(/([a-zA-Z\d])-([a-zA-Z\d])/g,t):e.replace(/([a-z])([A-Z])/g,t),e.charAt(0).toUpperCase()+e.substr(1)}return e}),e.join(t)}static friendlyLinks(e,t=!0,s=["self"]){let r=[];if(!Array.isArray(e))return r;for(let a of e)a=Object.assign({},a),"string"===typeof a.rel&&s.includes(a.rel.toLowerCase())||("string"===typeof a.title&&0!==a.title.length||("string"===typeof a.rel&&a.rel.length>1?a.title=i.prettifyString(a.rel):a.title=a.href.replace(/^https?:\/\/(www.)?/i,"").replace(/\/$/i,"")),r.push(a));return t&&r.sort((e,t)=>i.compareStringCaseInsensitive(e.title,t.title)),r}}e.exports=i},"42dc":function(e,t,s){const r=s("7ab3"),i=s("2d51");class a extends i{constructor(e,t){super(e,["path","size","modified"]),this.path=t,this.size=void 0,this.modified=void 0}async retrieveFile(){return await this.connection.download("/files/"+this.path,!0)}async downloadFile(e){let t=await this.connection.download("/files/"+this.path,!0);return await r.saveToFile(t,e)}async uploadFile(e,t=null,s=null){let i={method:"put",url:"/files/"+this.path,data:r.dataForUpload(e),headers:{"Content-Type":"application/octet-stream"}};"function"===typeof t&&(i.onUploadProgress=e=>{let s=Math.round(100*e.loaded/e.total);t(s,this)});let a=await this.connection._send(i,s);return this.setAll(a.data)}async deleteFile(){await this.connection._delete("/files/"+this.path)}}e.exports=a},"4f10":function(e,t,s){const r=s("382f"),i=s("ab25");class a{static migrateLinks(e,t,s="related"){return Array.isArray(e)?e.filter(e=>r.isObject(e)&&"string"===typeof e.href).map(e=>("string"!==typeof e.rel&&(e.rel=s),e)):[]}static migrateDiscoveryParameters(e,t){if(i.compare(t,"1.0.0-rc.2","<="))for(var s in e){if(!r.isObject(e[s])){delete e[s];continue}let t=e[s].type;"string"===typeof t&&(e[s].type=[t,"null"]);let i=e[s].example;"undefined"!==typeof i&&(e[s].examples=[i],delete e[s].example)}return e}}e.exports=a},"56c1":function(e,t,s){const r=s("15f0");class i extends r{constructor(e){super(e.schema,e.default),Object.assign(this,e)}}e.exports=i},"5f3f":function(e,t){let s={Token:{Operator:"Operator",Identifier:"Identifier",Number:"Number"}};const r={"⁰":0,"¹":1,"²":2,"³":3,"⁴":4,"⁵":5,"⁶":6,"⁷":7,"⁸":8,"⁹":9},i=Object.keys(r).join("");s.Lexer=function(){let e="",t=0,r=0,a=0,n=s.Token;function o(){let s=r;return s<t?e.charAt(s):"\0"}function c(){let s="\0",i=r;return i<t&&(s=e.charAt(i),r+=1),s}function l(e){return"\t"===e||" "===e||" "===e}function p(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}function d(e){return e>="0"&&e<="9"}function u(e,t){return{type:e,value:t,start:a,end:r-1}}function h(){let e;while(r<t){if(e=o(),!l(e))break;c()}}function f(){let e=o();if(("+-*/()^,"+i).indexOf(e)>=0)return u(n.Operator,c())}function m(e){return"_"===e||"#"===e||"$"===e||p(e)}function y(e){return"-"===e||"."===e||"~"===e||"@"===e}function g(e,t=!1){return"_"===e||p(e)||d(e)||t&&y(e)}function b(){let e=o();if(!m(e))return;let t=c(),s=!1;while(1){let r=o();if("$"===e)"$"!==r&&(e="");else if("@"===r)s=!0;else if(!g(r,s))break;t+=c()}return u(n.Identifier,t)}function w(){let e,s;if(e=o(),d(e)||"."===e){if(s="","."!==e){s=c();while(1){if(e=o(),!d(e))break;s+=c()}}if("."===e){s+=c();while(1){if(e=o(),!d(e))break;s+=c()}}if("e"===e||"E"===e){if(s+=c(),e=o(),"+"!==e&&"-"!==e&&!d(e))throw e="character "+e,r>=t&&(e="<end>"),new SyntaxError("Unexpected "+e+" after the exponent sign");s+=c();while(1){if(e=o(),!d(e))break;s+=c()}}if("."===s)throw new SyntaxError("Expecting decimal digits after the dot sign");return u(n.Number,s)}}function v(s){e=s,t=s.length,r=0}function A(){let e;if(h(),!(r>=t)){if(a=r,e=w(),"undefined"!==typeof e)return e;if(e=f(),"undefined"!==typeof e)return e;if(e=b(),"undefined"!==typeof e)return e;throw new SyntaxError("Unknown token from character "+o())}}function _(){let e,t=r;try{e=A(),delete e.start,delete e.end}catch(s){e=void 0}return r=t,e}return{reset:v,next:A,peek:_}},s.Parser=function(){let e=new s.Lexer,t=s.Token;function a(e,s){return"undefined"!==typeof e&&e.type===t.Operator&&s.includes(e.value)}function n(){let t,s,r=[];while(1){if(s=f(),"undefined"===typeof s)break;if(r.push(s),t=e.peek(),!a(t,","))break;e.next()}return r}function o(t){let s=[],r=e.next();if(!a(r,"("))throw new SyntaxError('Expecting ( in a function call "'+t+'"');if(r=e.peek(),a(r,")")||(s=n()),r=e.next(),!a(r,")"))throw new SyntaxError('Expecting ) in a function call "'+t+'"');return{FunctionCall:{name:t,args:s}}}function c(){let s,r=e.peek();if("undefined"===typeof r)throw new SyntaxError("Unexpected termination of expression");if(r.type===t.Identifier)return r=e.next(),a(e.peek(),"(")?o(r.value):{Identifier:r.value};if(r.type===t.Number)return r=e.next(),{Number:r.value};if(a(r,"(")){if(e.next(),s=f(),r=e.next(),!a(r,")"))throw new SyntaxError("Expecting )");return{Expression:s}}throw new SyntaxError("Parse error, can not process token "+r.value)}function l(){let t,s=e.peek();return a(s,"-+")?(s=e.next(),t=l(),{Unary:{operator:s.value,expression:t}}):c()}function p(e){return"number"===typeof r[e]?{Number:r[e]}:null}function d(){let t=l(),s=e.peek();while(a(s,"^"+i))s=e.next(),t={Binary:{operator:"^",left:t,right:"^"!==s.value?p(s.value):l()}},s=e.peek();return t}function u(){let t=d(),s=e.peek();while(a(s,"*/"))s=e.next(),t={Binary:{operator:s.value,left:t,right:d()}},s=e.peek();return t}function h(){let t=u(),s=e.peek();while(a(s,"+-"))s=e.next(),t={Binary:{operator:s.value,left:t,right:u()}},s=e.peek();return t}function f(){return h()}function m(t){e.reset(t);let s=f(),r=e.next();if("undefined"!==typeof r)throw new SyntaxError("Unexpected token "+r.value);return{Expression:s}}return{parse:m}},e.exports=s},6118:function(e,t,s){const r=s("382f");class i{constructor(e,t=null,s){this.schema=e,"undefined"===typeof this.schema.default&&(this.schema.default=s),this.parent=t}toJSON(){return Object.assign({},this.schema,{default:this.default()})}isAny(){return"any"===this.dataType()}isNull(){return"null"===this.schema.type}nullable(){return this.isNull()||this.isAny()}isEditable(){return!i.NON_EDITABLE.includes(this.dataType())}dataType(e=!1){let t=this.schema.type||"any";return e?t:this.schema.subtype||t}nativeDataType(){return this.dataType(!0)}isEnum(){return Array.isArray(this.schema.enum)&&this.schema.enum.length>0}getEnumChoices(){return this.isEnum()?this.schema.enum:[]}getCallbackParameters(){return Array.isArray(this.schema.parameters)?this.schema.parameters:[]}group(){return r.hasText(this.schema.group)?this.schema.group:i.DEFAULT_GROUP}title(){return r.hasText(this.schema.title)?this.schema.title:r.prettifyString(this.dataType())}description(){return r.hasText(this.schema.description)?this.schema.description:""}default(){return"function"===typeof this.schema.default?this.schema.default():this.schema.default}}i.DEFAULT_GROUP="Other",i.NON_EDITABLE=["raster-cube","vector-cube","labeled-array"],e.exports=i},"618e":function(e,t,s){const r=s("382f");class i{static normalizeJsonSchema(e,t=!1){e=r.isObject(e)?[e]:Array.isArray(e)?e:[];let s=[];for(let i of e)if(Array.isArray(i.allOf))s.push(Object.assign({},...i.allOf));else if(Array.isArray(i.oneOf)||Array.isArray(i.anyOf)){let e=r.omitFromObject(i,["oneOf","anyOf"]),t=i.oneOf||i.anyOf;for(let r of t)s.push(Object.assign({},e,r))}else s.push(i);if(!t)return s;e=[];for(let r of s)Array.isArray(r.type)?e=e.concat(r.type.map(e=>Object.assign({},r,{type:e}))):e.push(r);return e}static getCallbackParameters(e,t=[]){if(!r.isObject(e)||!e.schema)return[];let s,a=i.normalizeJsonSchema(e.schema);while(s=t.shift())a=a.map(e=>i.normalizeJsonSchema(i.getElementJsonSchema(e,s))),a=a.concat(...a);let n=[];for(let i of a)if(Array.isArray(i.parameters)){if(n.length>0&&!r.equals(n,i.parameters))throw new Error("Multiple schemas with different callback parameters found.");n=i.parameters}return n}static getCallbackParametersForProcess(e,t,s=[]){if(!r.isObject(e)||!Array.isArray(e.parameters))return[];let a=e.parameters.find(e=>e.name===t);return i.getCallbackParameters(a,s)}static getNativeTypesForJsonSchema(e,t=!1){if(r.isObject(e)&&Array.isArray(e.type)){let s=r.unique(e.type).filter(e=>i.JSON_SCHEMA_TYPES.includes(e));return s.length>0&&s.length<i.JSON_SCHEMA_TYPES.length?s:t?[]:i.JSON_SCHEMA_TYPES}return r.isObject(e)&&"string"===typeof e.type&&i.JSON_SCHEMA_TYPES.includes(e.type)?[e.type]:t?[]:i.JSON_SCHEMA_TYPES}static getElementJsonSchema(e,t=null){let s=i.getNativeTypesForJsonSchema(e);if(r.isObject(e)&&s.includes("array")&&"string"!==typeof t){if(r.isObject(e.items))return e.items;if(Array.isArray(e.items)){if(null!==t&&r.isObject(e.items[t]))return e.items[t];if(r.isObject(e.additionalItems))return e.additionalItems}}if(r.isObject(e)&&s.includes("object")){if(null!==t&&r.isObject(e.properties)&&r.isObject(e.properties[t]))return e.properties[t];if(r.isObject(e.additionalProperties))return e.additionalProperties}return{}}}i.JSON_SCHEMA_TYPES=["string","number","integer","boolean","array","object","null"],e.exports=i},"67b9":function(e,t,s){const r=s("382f"),i=s("f3f5"),a=s("7ab3"),n=s("dd17");class o extends i{static isSupported(){return r.isObject(n)&&Boolean(n.UserManager)}static async signinCallback(e=null,t={}){let s=a.getUrl();e||(e=new o(null,{}),e.setGrant(s.includes("?")?"authorization_code+pkce":"implicit"));let r=e.getOptions(t),i=new n.UserManager(r);return await i.signinCallback(s)}constructor(e,t){super("oidc",e,t),this.manager=null,this.listeners={},this.user=null,this.clientId=null,this.grant="authorization_code+pkce",this.issuer=t.issuer||"",this.scopes=Array.isArray(t.scopes)&&t.scopes.length>0?t.scopes:["openid"],this.refreshTokenScope="offline_access",this.links=Array.isArray(t.links)?t.links:[],this.defaultClients=Array.isArray(t.default_clients)?t.default_clients:[],this.defaultClient=this.detectDefaultClient()}addListener(e,t,s="default"){this.manager.events["add"+e](t),this.listeners[`${s}:${e}`]=t}removeListener(e,t="default"){this.manager.events["remove"+e](this.listeners[e]),delete this.listeners[`${t}:${e}`]}async login(e={},t=!1){if(!this.issuer||"string"!==typeof this.issuer)throw new Error("No Issuer URL available for OpenID Connect");this.manager=new n.UserManager(this.getOptions(e,t)),this.addListener("UserLoaded",async()=>this.setUser(await this.manager.getUser()),"js-client"),this.addListener("AccessTokenExpired",()=>this.setUser(null),"js-client"),"popup"===o.uiMethod?await this.manager.signinPopup():await this.manager.signinRedirect()}async logout(){if(null!==this.manager){try{"popup"===o.uiMethod?await this.manager.signoutPopup():await this.manager.signoutRedirect({post_logout_redirect_uri:a.getUrl()})}catch(e){console.warn(e)}super.logout(),this.removeListener("UserLoaded","js-client"),this.removeListener("AccessTokenExpired","js-client"),this.manager=null,this.setUser(null)}}getOptions(e={},t=!1){let s=this.getResponseType(),r=this.scopes.slice(0);return t&&!r.includes(this.refreshTokenScope)&&r.push(this.refreshTokenScope),Object.assign({client_id:this.clientId,redirect_uri:o.redirectUrl,authority:this.issuer.replace("/.well-known/openid-configuration",""),scope:r.join(" "),validateSubOnSilentRenew:!0,response_type:s,response_mode:s.includes("code")?"query":"fragment"},e)}getResponseType(){switch(this.grant){case"authorization_code+pkce":return"code";case"implicit":return"token id_token";default:throw new Error("Grant Type not supported")}}setGrant(e){switch(e){case"authorization_code+pkce":case"implicit":this.grant=e;break;default:throw new Error("Grant Type not supported")}}setClientId(e){this.clientId=e}setUser(e){e?(this.user=e,this.setToken(e.access_token)):(this.user=null,this.setToken(null))}detectDefaultClient(){for(let e of o.grants){let t=this.defaultClients.find(t=>Boolean(t.grant_types.includes(e)&&Array.isArray(t.redirect_urls)&&t.redirect_urls.find(e=>e.startsWith(o.redirectUrl))));if(t)return this.setGrant(e),this.setClientId(t.id),this.defaultClient=t,t}return null}}o.uiMethod="redirect",o.redirectUrl=a.getUrl().split("#")[0].split("?")[0].replace(/\/$/,""),o.grants=["authorization_code+pkce","implicit"],e.exports=o},"7ab3":function(e,t,s){"undefined"===typeof window?e.exports=s("9205"):e.exports=s("1be6")},"7c24":function(e,t,s){const r=s("7ab3"),i=s("2d51"),a=s("d1ab"),n=s("382f"),o=s("7f1d"),c=["finished","canceled","error"];class l extends i{constructor(e,t){super(e,["id","title","description","process","status","progress","created","updated","plan","costs","budget"]),this.id=t,this.title=void 0,this.description=void 0,this.process=void 0,this.status=void 0,this.progress=void 0,this.created=void 0,this.updated=void 0,this.plan=void 0,this.costs=void 0,this.budget=void 0}async describeJob(){let e=await this.connection._get("/jobs/"+this.id);return this.setAll(e.data)}async updateJob(e){return await this.connection._patch("/jobs/"+this.id,this._convertToRequest(e)),this._supports("describeJob")?await this.describeJob():this.setAll(e)}async deleteJob(){await this.connection._delete("/jobs/"+this.id)}async estimateJob(){let e=await this.connection._get("/jobs/"+this.id+"/estimate");return e.data}debugJob(){return new a(this.connection,"/jobs/"+this.id+"/logs")}monitorJob(e,t=60,s=!0){if("function"!==typeof e||t<1)return;let r=this.connection.capabilities();if(!r.hasFeature("describeJob"))throw new Error("Monitoring Jobs not supported by the back-end.");let i=this.status,a=null,n=null;r.hasFeature("debugJob")&&s&&(n=this.debugJob());let o=async()=>{this.getDataAge()>1&&await this.describeJob();let t=n?await n.nextLogs():[];(i!==this.status||t.length>0)&&e(this,t),i=this.status,c.includes(this.status)&&l()};setTimeout(o,0),a=setInterval(o,1e3*t);let l=()=>{a&&(clearInterval(a),a=null)};return l}async startJob(){return await this.connection._post("/jobs/"+this.id+"/results",{}),this._supports("describeJob")?await this.describeJob():this}async stopJob(){return await this.connection._delete("/jobs/"+this.id+"/results"),this._supports("describeJob")?await this.describeJob():this}async getResultsAsStac(){let e=await this.connection._get("/jobs/"+this.id+"/results");if(!n.isObject(e)||!n.isObject(e.data))throw new Error("Results received from the back-end are invalid");let t=o.stac(e.data);return n.isObject(t.assets)||(t.assets={}),"Feature"===t.type?"number"===typeof e.headers["openeo-costs"]&&(t.properties.costs=e.headers["openeo-costs"]):"number"===typeof e.headers["openeo-costs"]&&(t.costs=e.headers["openeo-costs"]),t}async listResults(){let e=await this.getResultsAsStac();return n.isObject(e.assets)?Object.values(e.assets):[]}async downloadResults(e){let t=await this.listResults();return await r.downloadResults(this.connection,t,e)}}e.exports=l},9205:function(e,t,s){(function(t){const r=s("3e8f"),i=s("0b16"),a=s("df7c"),n=s("d485");class o{static getName(){return"Node"}static getUrl(){return o.url}static setUrl(e){o.url=e}static handleErrorResponse(e){return new Promise((s,r)=>{let i=[];e.response.data.on("data",e=>i.push(e)),e.response.data.on("error",e=>r(e)),e.response.data.on("end",()=>s(JSON.parse(t.concat(i).toString())))})}static getResponseType(){return"stream"}static base64encode(e){let s;return s=e instanceof t?e:t.from(e.toString(),"binary"),s.toString("base64")}static fileNameForUpload(e){return a.basename(e)}static dataForUpload(e){return r.createReadStream(e)}static async downloadResults(e,t,s){let r=[];const c=t.map(async t=>{let c=i.parse(t.href),l=a.join(s,a.basename(c.pathname)),p=await e.download(t.href,!1);if(!(p instanceof n.Readable))throw new Error("Data retrieved is not a Stream");await o.saveToFile(p,l),r.push(l)});return await Promise.all(c),r}static saveToFile(e,t){return new Promise((s,i)=>{let a=r.createWriteStream(t);a.on("close",e=>{if(e)return i(e);s()}),e.pipe(a)})}}o.url="",e.exports=o}).call(this,s("b639").Buffer)},ab25:function(e,t,s){const r=s("b697");class i{static compare(e,t,s=null){return null!==s?r.compare(e,t,s):r(e,t)}static validate(e){return r.validate(e)}static findCompatible(e,t=!0,s=null,r=null){if(!Array.isArray(e)||0===e.length)return[];let a=e.filter(e=>{if("string"===typeof e.url&&i.validate(e.api_version)){let t=i.validate(s),a=i.validate(r);return t&&a?i.compare(e.api_version,s,">=")&&i.compare(e.api_version,r,"<="):t?i.compare(e.api_version,s,">="):!a||i.compare(e.api_version,r,"<=")}return!1});return 0===a.length?[]:a.sort((e,s)=>{let r=!0===e.production,a=!0===s.production;return t&&r!==a?r?-1:1:-1*i.compare(e.api_version,s.api_version)})}static findLatest(e,t=!0,s=null,r=null){let a=i.findCompatible(e,t,s,r);return a.length>0?a[0]:null}}e.exports=i},b328:function(e,t,s){const r=s("5f3f"),i=s("2a0d"),a=s("b4da");class n{constructor(e){let t=new r.Parser;this.tree=t.parse(e),this.builder=null}setBuilder(e){this.builder=e}generate(e=!0){let t=this.parseTree(this.tree);if(!(t instanceof a))throw new Error("Invalid formula specified.");return e&&(t.result=!0),t}parseTree(e){let t=Object.keys(e)[0];switch(t){case"Number":return parseFloat(e.Number);case"Identifier":return this.getRef(e.Identifier);case"Expression":return this.parseTree(e.Expression);case"FunctionCall":{let t=[];for(let s in e.FunctionCall.args)t.push(this.parseTree(e.FunctionCall.args[s]));return this.builder.process(e.FunctionCall.name,t)}case"Binary":return this.addOperatorProcess(e.Binary.operator,this.parseTree(e.Binary.left),this.parseTree(e.Binary.right));case"Unary":{let t=this.parseTree(e.Unary.expression);return"-"===e.Unary.operator?"number"===typeof t?-t:this.addOperatorProcess("*",-1,t):t}default:throw new Error("Operation "+t+" not supported.")}}getRef(e){if("true"===e)return!0;if("false"===e)return!1;if("null"===e)return null;if("string"===typeof e&&e.startsWith("#")){let t=e.substring(1);if(t in this.builder.nodes)return{from_node:t}}let t=this.builder.getParentCallbackParameters();if("string"===typeof e&&t.length>0){let s=e.match(/^\$+/),r=s?s[0].length:0;if(r>0&&t.length>=r){let s=e.substring(r);return t[r-1][s]}}let s=new i(e);return this.builder.addParameter(s),s}addOperatorProcess(e,t,s){let r=n.operatorMapping[e],i=this.builder.spec(r);if(r&&i){let a={};if(!Array.isArray(i.parameters)||i.parameters.length<2)throw new Error("Process for operator "+e+" must have at least two parameters");return a[i.parameters[0].name||"x"]=t,a[i.parameters[1].name||"y"]=s,this.builder.process(r,a)}throw new Error("Operator "+e+" not supported")}}n.operatorMapping={"-":"subtract","+":"add","/":"divide","*":"multiply","^":"power"},e.exports=n},b4da:function(e,t,s){const r=s("382f"),i=s("2a0d");class a{constructor(e,t,s={},r=null,i=null){if(this.parent=e,this.spec=this.parent.spec(t,i),!this.spec)throw new Error("Process doesn't exist: "+t);this.id=e.generateId(t),this.namespace=i,this.arguments=Array.isArray(s)?this.namedArguments(s):s,this._description=r,this.result=!1,this.addParametersToProcess(this.arguments)}namedArguments(e){if(e.length>(this.spec.parameters||[]).length)throw new Error("More arguments specified than parameters available.");let t={};if(Array.isArray(this.spec.parameters))for(let s=0;s<this.spec.parameters.length;s++)t[this.spec.parameters[s].name]=e[s];return t}addParametersToProcess(e){for(let t in e){let s=e[t];s instanceof i?r.isObject(s.spec.schema)&&this.parent.addParameter(s.spec):s instanceof a?this.addParametersToProcess(s.arguments):(Array.isArray(s)||r.isObject(s))&&this.addParametersToProcess(s)}}description(e){return"undefined"===typeof e?this._description:(this._description=e,this)}exportArgument(e,t){const n=s("b328");if(r.isObject(e)){if(e instanceof a||e instanceof i)return e.ref();if(e instanceof n){let s=this.createBuilder(this,t);return e.setBuilder(s),e.generate(),s.toJSON()}if(e instanceof Date)return e.toISOString();if("function"===typeof e.toJSON)return e.toJSON();{let s={};for(let r in e)"undefined"!==typeof e[r]&&(s[r]=this.exportArgument(e[r],t));return s}}return Array.isArray(e)?e.map(e=>this.exportArgument(e),t):"function"===typeof e?this.exportCallback(e,t):e}createBuilder(e=null,t=null){const r=s("1371");let i=new r(this.parent.processes,this.parent);return null!==e&&null!==t&&i.setParent(e,t),i}exportCallback(e,t){let s=this.createBuilder(this,t),i=s.getParentCallbackParameters(),n=e.bind(s)(...i,s);if(Array.isArray(n)&&s.supports("array_create")?n=s.array_create(n):!r.isObject(n)&&s.supports("constant")&&(n=s.constant(n)),n instanceof a)return n.result=!0,s.toJSON();throw new Error("Callback must return BuilderNode")}toJSON(){let e={process_id:this.spec.id,arguments:{}};this.namespace&&(e.namespace=this.namespace);for(let t in this.arguments)"undefined"!==typeof this.arguments[t]&&(e.arguments[t]=this.exportArgument(this.arguments[t],t));return"function"!==typeof this.description?e.description=this.description:"string"===typeof this._description&&(e.description=this._description),this.result&&(e.result=!0),e}ref(){return{from_node:this.id}}}e.exports=a},d0ab:function(e,t,s){const r=s("7ab3"),i=s("382f"),a=s("f3f5");class n extends a{constructor(e){super("basic",e,{id:null,title:"HTTP Basic",description:"Login with username and password using the method HTTP Basic."})}async login(e,t){let s=await this.connection._send({method:"get",responseType:"json",url:"/credentials/basic",headers:{Authorization:"Basic "+r.base64encode(e+":"+t)}});if(!i.isObject(s.data)||"string"!==typeof s.data.access_token)throw new Error("No access_token returned.");this.setToken(s.data.access_token)}}e.exports=n},d1ab:function(e,t,s){const r=s("382f");class i{constructor(e,t){this.connection=e,this.endpoint=t,this.lastId=""}async nextLogs(e=null){let t=await this.next(e);return Array.isArray(t.logs)?t.logs:[]}async next(e=null){let t={offset:this.lastId};e>0&&(t.limit=e);let s=await this.connection._get(this.endpoint,t);return Array.isArray(s.data.logs)&&s.data.logs.length>0?(s.data.logs=s.data.logs.filter(e=>r.isObject(e)&&"string"===typeof e.id),this.lastId=s.data.logs[s.data.logs.length-1].id):s.data.logs=[],s.data.links=Array.isArray(s.data.links)?s.data.links:[],s.data}}e.exports=i},d590:function(e,t,s){const r=s("382f");class i{constructor(e){if(this.data={input:{},output:{}},r.isObject(e)){for(let t of["input","output"])for(let s in e[t])r.isObject(e[t])&&(this.data[t][s.toUpperCase()]=e[t][s]);this["federation:missing"]=e["federation:missing"]}}toJSON(){return this.data}getInputTypes(){return this.data.input}getOutputTypes(){return this.data.output}getInputType(e){return this._findType(e,"input")}getOutputType(e){return this._findType(e,"output")}_findType(e,t){return e=e.toUpperCase(),e in this.data[t]?this.data[t][e]:null}}e.exports=i},f016:function(e,t,s){"use strict";function r(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var r=0;r<e.length;r++){var i=e.charAt(r),a=i.charCodeAt(0);if(255!==t[a])throw new TypeError(i+" is ambiguous");t[a]=r}var n=e.length,o=e.charAt(0),c=Math.log(n)/Math.log(256),l=Math.log(256)/Math.log(n);function p(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";var s=0,r=0,i=0,a=t.length;while(i!==a&&0===t[i])i++,s++;var c=(a-i)*l+1>>>0,p=new Uint8Array(c);while(i!==a){for(var d=t[i],u=0,h=c-1;(0!==d||u<r)&&-1!==h;h--,u++)d+=256*p[h]>>>0,p[h]=d%n>>>0,d=d/n>>>0;if(0!==d)throw new Error("Non-zero carry");r=u,i++}var f=c-r;while(f!==c&&0===p[f])f++;for(var m=o.repeat(s);f<c;++f)m+=e.charAt(p[f]);return m}function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var s=0;if(" "!==e[s]){var r=0,i=0;while(e[s]===o)r++,s++;var a=(e.length-s)*c+1>>>0,l=new Uint8Array(a);while(e[s]){var p=t[e.charCodeAt(s)];if(255===p)return;for(var d=0,u=a-1;(0!==p||d<i)&&-1!==u;u--,d++)p+=n*l[u]>>>0,l[u]=p%256>>>0,p=p/256>>>0;if(0!==p)throw new Error("Non-zero carry");i=d,s++}if(" "!==e[s]){var h=a-i;while(h!==a&&0===l[h])h++;var f=new Uint8Array(r+(a-h)),m=r;while(h!==a)f[m++]=l[h++];return f}}}function u(e){var t=d(e);if(t)return t;throw new Error("Non-base"+n+" character")}return{encode:p,decodeUnsafe:d,decode:u}}e.exports=r},f3f5:function(e,t){class s{constructor(e,t,s){this.id=s.id||null,this.title=s.title||"",this.description=s.description||"",this.type=e,this.connection=t,this.token=null}getId(){let e=this.getType();return this.getProviderId().length>0&&(e+="."+this.getProviderId()),e}getType(){return this.type}getProviderId(){return"string"===typeof this.id?this.id:""}getTitle(){return this.title}getDescription(){return this.description}getToken(){return"string"===typeof this.token?this.getType()+"/"+this.getProviderId()+"/"+this.token:null}setToken(e){this.token=e,this.connection.emit("tokenChanged",e),null!==this.token?this.connection.setAuthProvider(this):this.connection.setAuthProvider(null)}async login(...e){throw new Error("Not implemented.",e)}async logout(){this.setToken(null)}}e.exports=s},f697:function(e,t,s){const r=s("2d51"),i=s("382f");class a extends r{constructor(e,t){super(e,["id","summary","description","categories","parameters","returns","deprecated","experimental","exceptions","examples","links",["process_graph","processGraph"]]),this.id=t,this.summary=void 0,this.description=void 0,this.categories=void 0,this.parameters=void 0,this.returns=void 0,this.deprecated=void 0,this.experimental=void 0,this.exceptions=void 0,this.examples=void 0,this.links=void 0,this.processGraph=void 0}async describeUserProcess(){let e=await this.connection._get("/process_graphs/"+this.id);if(!i.isObject(e.data)||"string"!==typeof e.data.id)throw new Error("Invalid response received for user process");return this.connection.processes.add(e.data,"user"),this.setAll(e.data)}async replaceUserProcess(e){if(await this.connection._put("/process_graphs/"+this.id,this._convertToRequest(e)),this._supports("describeUserProcess"))return this.describeUserProcess();{let t=this.setAll(e);return this.connection.processes.add(t.toJSON(),"user"),t}}async deleteUserProcess(){await this.connection._delete("/process_graphs/"+this.id),this.connection.processes.remove(this.id,"user")}}e.exports=a},fbda:function(e,t,s){const r=s("2447"),i=s("1f2f"),a=s("2c72"),n=s("6118"),o=s("56c1"),c=s("15f0"),l=s("618e"),p=s("fcba"),d=s("ab25"),u=s("382f");e.exports={MigrateCapabilities:r,MigrateCollections:i,MigrateProcesses:a,ProcessDataType:n,ProcessParameter:o,ProcessSchema:c,ProcessUtils:l,ProcessRegistry:p,Versions:d,Utils:u}},fcba:function(e,t,s){const r=s("382f");class i{constructor(e=[],t=!1){if(this.listeners=[],this.processes={},this.addNamespace=t,e instanceof i)for(let s in e.processes)this.addAll(e.processes[s]);else this.addAll(e)}onChange(e,t,s){for(let r of this.listeners)r(e,t,s)}addAll(e,t="backend"){for(var s in e)this.add(e[s],t,!1);this.onChange("addAll",e,t)}add(e,t="backend",s=!0){if(!r.isObject(e))throw new Error("Invalid process; not an object.");if("string"!==typeof e.id)throw new Error("Invalid process; no id specified.");if("string"!==typeof t)throw new Error("Invalid namespace; not a string.");this.processes[t]||(this.processes[t]={}),e=Object.assign(this.addNamespace?{namespace:t}:{},e),this.processes[t][e.id]=e,s&&this.onChange("add",e,t)}count(){return r.size(this.all())}all(){let e=[];for(let t in this.processes)e=e.concat(Object.values(this.processes[t]));return e}hasNamespace(e){return"string"===typeof e&&Boolean(this.processes[e])}namespaces(){return Object.keys(this.processes).sort()}namespace(e){if("string"!==typeof e)return[];let t=this.processes[e];return t?Object.values(t):[]}has(e,t=null){return Boolean(this.get(e,t))}get(e,t=null){return"string"!==typeof e?null:null===t?this.get(e,"user")||this.get(e,"backend"):this.processes[t]&&this.processes[t][e]||null}remove(e=null,t="user"){if("string"!==typeof t)return!1;if(this.processes[t]){if("string"!==typeof e)return delete this.processes[t],this.onChange("remove",null,t),!0;if(this.processes[t][e]){let s=this.processes[t][e];return delete this.processes[t][e],0===r.size(this.processes[t])&&delete this.processes[t],this.onChange("remove",s,t),!0}}return!1}}e.exports=i}}]);
//# sourceMappingURL=chunk-vendors~41a6ab2c.3b6aed89.js.map