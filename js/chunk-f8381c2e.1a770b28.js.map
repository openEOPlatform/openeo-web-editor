{"version":3,"sources":["webpack:///./src/components/modals/ServiceInfoModal.vue?51c4","webpack:///src/components/modals/ServiceInfoModal.vue","webpack:///./src/components/modals/ServiceInfoModal.vue?58ef","webpack:///./src/components/modals/ServiceInfoModal.vue","webpack:///./src/components/TextEditor.vue?2b5c","webpack:///src/components/TextEditor.vue","webpack:///./src/components/TextEditor.vue?9144","webpack:///./src/components/TextEditor.vue","webpack:///./src/components/modals/Modal.vue?d0e2","webpack:///src/components/modals/Modal.vue","webpack:///./src/components/modals/Modal.vue?3946","webpack:///./src/components/modals/Modal.vue","webpack:///./src/components/VisualEditor.vue?413d","webpack:///./src/components/TextEditor.vue?e4e1","webpack:///./src/components/FullscreenButton.vue?0ebf","webpack:///src/components/FullscreenButton.vue","webpack:///./src/components/FullscreenButton.vue?63bb","webpack:///./src/components/FullscreenButton.vue","webpack:///./src/components/Editor.vue?9da2","webpack:///./src/components/modals/ServiceInfoModal.vue?0e6b","webpack:///./src/export/exporter.js","webpack:///./src/components/DiscoveryToolbar.vue?16e2","webpack:///./src/components/DiscoveryToolbar.vue?2366","webpack:///./src/components/modals/Modal.vue?8d5f","webpack:///./src/components/FullscreenButton.vue?3f3a","webpack:///./src/components/DiscoveryToolbar.vue?0cdb","webpack:///src/components/DiscoveryToolbar.vue","webpack:///./src/components/DiscoveryToolbar.vue?5e94","webpack:///./src/components/DiscoveryToolbar.vue","webpack:///./src/components/TextEditor.vue?9964","webpack:///./src/components/Editor.vue?bb7f","webpack:///./src/components/VisualEditor.vue?ed00","webpack:///src/components/VisualEditor.vue","webpack:///./src/components/VisualEditor.vue?fdb7","webpack:///./src/components/VisualEditor.vue","webpack:///src/components/Editor.vue","webpack:///./src/components/Editor.vue?b528","webpack:///./src/components/Editor.vue","webpack:///./src/export/javascript.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","title","on","$event","$emit","service","currency","scopedSlots","_u","key","fn","staticClass","process","proxy","staticRenderFns","name","components","Editor","Modal","Service","props","type","computed","component","class","languageString","_v","_s","_e","confirmClear","_t","canUndo","editor","undo","canRedo","redo","element","id","window","FullscreenButton","editable","default","value","required","language","placeholder","editorOptions","indentUnit","lineNumbers","indentWithTabs","matchBrackets","autoCloseBrackets","readOnly","options","data","emitValue","watch","mounted","methods","updateState","commit","pg","emit","insert","text","updateContent","insertProcess","Utils","style","zIndex","backgroundClose","ref","startMove","close","mixins","minWidth","width","show","position","dragPosition","immediate","handler","open","event","document","stopMove","move","escCloseListener","directives","rawName","expression","isFullscreen","toggleFullscreen","keyDownFn","oldZIndex","el","beforeDestroy","onkeyDown","e","getElement","ProcessImpl","BaseProcess","constructor","exporter","super","node","generateFunction","Exporter","ProcessGraph","registry","connection","isObject","indent","code","fnCounter","allowEmpty","fillUndefinedParameters","createProcessGraphInstance","processRegistry","getJsonSchemaValidator","copyProcessGraphInstanceProperties","createProcessInstance","isKeyword","keyword","getKeywords","includes","toLowerCase","comment","generateImports","generateConnection","generateAuthentication","generateBuilder","generateMetadata","generateMissingParameter","generateFunctionParams","parameters","map","p","generateResult","makeNull","makeBoolean","val","makeArray","arr","join","makeObject","obj","mapObject","makeString","str","JSON","stringify","makeNumber","num","Array","isArray","mapObjectValues","hasComment","length","newLine","generateMetadataEntry","args","onExporter","filter","newArgs","from_node","var","from_parameter","fnName","resolveArguments","callback","getArgument","getCallbackParameters","execute","replacement","generateCallback","ordered","arguments","async","resolveCallback","orderArguments","getProcessGraph","getProcess","orderedArgs","param","optional","definedValueFound","i","pop","prefix","String","match","getTab","addCode","tabs","repeat","lines","trim","split","line","push","count","getServerUrl","getUrl","params","getProcessParameters","getResultNode","validate","reset","executeNodes","getStartNodes","isMath","_isMath","model","$$v","searchTerm","collections","collapsed","item","supportsLoadCollection","onDrag","showCollectionInfo","hasCollectionPreview","showCollectionPreview","allProcesses","showProcess","namespace","summary","udfRuntimes","supportsRunUdf","runtime","identifier","version","showUdfInfo","fileFormats","supportsSaveResult","showFileFormatInfo","Collections","FileFormats","Processes","SearchBox","UdfRuntimes","onAddProcess","collectionPreview","persist","internalSearchTerm","hasUdfRuntimes","get","set","format","getNode","process_id","canSwitchView","showModel","parent","parentSchema","modelValue","showDiscoveryToolbar","defaultValue","onError","showCode","codeValue","this$1","$refs","blocks","hasSelection","deleteSelected","editProcess","addParameter","highlightFormula","showExpressionModal","compactMode","toggleCompact","perfectScale","visualEditor","enabled","isFullScreen","onDrop","allowDrop","processes","errorHandler","editParameter","openArgumentEditor","compact","selectionChanged","historyChanged","ModelBuilder","DiscoveryToolbar","formula","reader","getNameField","description","label","schema","pattern","getDescriptionField","subtype","getOptionalField","getDefaultField","toggledBy","getExperimentalField","getDeprecatedField","getSchemaField","minItems","items","info","additionalProperties","properties","message","http","enum","returns","href","rel","newData","categories","experimental","deprecated","examples","links","process_graph","js","save","openArgumentEditorForNode","processSpec","Object","selectParameterName","events","clear","VisualEditor","TextEditor","Tabs","Tab","error","updateTab","activeEditor","KEYWORDS","JavaScript","generateFormula","parse","parsed","variable","builderName","getParent","generateArguments","processId","arg","parameter","paramName","toFormulaString","escaped","toCode","resultNode","nodeToFormula","getArrayElementPlaceholder","getArgumentType","getRawArgument","index","findIndex","parentOperator","arrayElement","operator","Formula","reverseOperatorMapping","isArrayData","arrayOperatorMapping","convertValue","refNode","Error","argList","v","strongOps","weakOps"],"mappings":"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AEAoB,aAGAiQ,mBACA,OACAhQ,QACA3B,eACAqR,sBACAD,+GACAQ,qBACAlH,YACA4G,YAGAO,wBACA,OACAlQ,QACA3B,oBACAqR,qBACAD,wGACA1G,YACA4G,QACAhR,gBAEAoB,aAGAoQ,sBACA,OACAnQ,QACA3B,kBACAqR,mBACAD,qJACA1G,YACA4G,QACAhR,gBAEAoB,aAGAqQ,4CACA,wCACA,OACApQ,QACA3B,OACAqR,QACAD,mDACAE,QACA,CACApS,yBACAoB,cACAmR,WAEA,CACAvS,4BACAoB,aACA0R,WACAC,OACA3R,cACAmR,eAMA7B,eACA/P,0BACA,8CACA,OACA,6BACA,CACA8B,gBACA3B,eACAoR,4FACAC,gBACA3G,YACA4G,QACAhR,gBAGA,2CACA,CACAqB,mBACA3B,kBACAqR,mBACA3G,YACA4G,QACAhR,aACA2R,OACA3R,iBAIA,0CACA,sCACA,CACA+Q,mBACAD,qFACAc,SAEA,8FACA,0EACA,CACAvQ,mBACA3B,kBACAoR,8QACAC,eACA3G,YACA4G,QACAhR,cACA6R,sBACA7R,cACAsB,UACA,WAEAwQ,YACAC,SACAnT,sBACAoB,eAEA8Q,aACAlS,oBACAoB,cACAmR,sBAEAa,MACApT,yBACAoB,eACAiS,MACA,IACA,IACA,UAOA,CACA5Q,iBACA3B,gBACAqR,iBACAD,gIACA1G,YACA4G,QACAhR,aACA2R,OACA3R,cACAsB,UACA,aAEAwQ,YACAlT,OACAA,cACAoB,eAEApB,OACAA,oBACAoB,cACAmR,sBAEAvH,WACAhL,kBACAoB,cACAoB,YAEA8Q,SACAtT,0BAMA,CACAyC,cACA3B,aACAqR,cACAD,4EACA1G,YACA4G,QACAhR,aACA2R,OACA3R,cACAsB,UACA,OACA,OAEAwQ,YACAK,MACAvT,YACAoB,eAEAoS,KACAxT,iBACAkS,2HACA9Q,cACAoB,iBAEAxC,OACAA,cACAoB,eAEAA,MACApB,mBACAkS,kHACA9Q,oBAOA,oDACA,uIACA,8DACAqS,WACAvB,kCACAE,0BAIA,mCACA,wBACA,SACAhQ,MACA8L,WACAgE,eACAwB,cACAC,gBACAC,cACAC,YACAC,SACAC,kBAGA,eACA,iCACA,KAGA,kBAGApD,eACA,OACA,oBACA,2BACA,wBACA,uBACA,4BACA,0BACA,uBAEA,qDACA,iDACA,uCAIAa,2CACA,OACA,0BACA,wCACA,kCACA,gCACA,0CACA,sCACA,+BAEA,iCAEAX,sBACA,+DACAmD,4EACA,IACAA,UACA,OACArT,WAEA,GACAsT,uBAEA,6CACA,SACA/P,2BAGAgQ,6BACA,mCACA,qBACA,+CACA,wBACAC,4EACA3N,YACA2N,MACA,EACA,KACA9Q,IACA+Q,iBAAApJ,cACA,kBAIAyG,2DACA,OACAzR,QACAsI,aACAjF,OACAd,WACA8R,sBACAxE,UAEA,KACA,wBACAyE,UAEA,6CAEA1S,eACA,iEACA,GACA,cAGA2S,QACA,mBACA,0BAEA,mBAEAtQ,+BACA,IACA,kDACA,kBACA,4BACAgK,QAEA,2DACA,SACA/J,2BAGA,0BACA,uCACA6P,iBACA,CACAQ,aCvjBsV,I,wBCQlVjT,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,oBCKA,GACfR,cACAC,YACAyT,eACAC,kBACAC,kBACAC,kBAEAxT,OACAiB,IACAhB,YACAoB,kCAEAD,UACAnB,aACAoB,YAEAC,OACArB,YACAoB,kBAEAxC,OACAoB,aAEAyO,QACAzO,YACAoB,cAEAsN,cACA1O,YACAoB,cAEAwN,sBACA5O,aACAoB,YAEAyN,iBAEA1M,OACAd,QACA,mBAGAY,OACA,OACA0M,gBACAK,eACAwE,aAGApR,UACA,kBAEAC,YACA,mCACAmM,YACA,gBACA,4BAEAO,WACA,gBACA,0BACA,uCAEA0E,YACA,4CACA,gBAGA,kBAGAlR,UACA,gBACA,uBAEAuM,WACA,cAEA4E,eACA,kDACA,wBAGA,yBAGA,uBACA,UACA,kBAAA1S,gBAAA6L,wBACA,qCACA,SACA/J,2BAGAyL,gBACA,0CACAzL,2DACA,MC1HgV,ICQ5U,G,UAAY,eACd,EACA1E,EACAqB,GACA,EACA,KACA,KACA,OAIa,e,+HCff,MAAMkU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","file":"js/chunk-f8381c2e.1a770b28.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{attrs:{\"width\":\"80%\",\"title\":_vm.title},on:{\"closed\":function($event){return _vm.$emit('closed')}}},[_c('Service',{attrs:{\"service\":_vm.service,\"currency\":_vm.currency},scopedSlots:_vm._u([{key:\"process-graph\",fn:function(){return [_c('Editor',{staticClass:\"infoViewer\",attrs:{\"value\":_vm.service.process,\"editable\":false,\"id\":\"servicePgViewer\"}})]},proxy:true}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<Modal width=\"80%\" :title=\"title\" @closed=\"$emit('closed')\">\n\t\t<Service :service=\"service\" :currency=\"currency\">\n\t\t\t<template #process-graph>\n\t\t\t\t<Editor :value=\"service.process\" :editable=\"false\" class=\"infoViewer\" id=\"servicePgViewer\" />\n\t\t\t</template>\n\t\t</Service>\n\t</Modal>\n</template>\n\n<script>\nimport Utils from '../../utils';\nimport Modal from './Modal.vue';\nimport Editor from '../Editor.vue';\nimport Service from '@openeo/vue-components/components/Service.vue';\n\nexport default {\n\tname: 'ServiceInfoModal',\n\tcomponents: {\n\t\tEditor,\n\t\tModal,\n\t\tService\n\t},\n\tprops: {\n\t\tservice: {\n\t\t\ttype: Object\n\t\t}\n\t},\n\tcomputed: {\n\t\t...Utils.mapGetters(['currency']),\n\t\ttitle() {\n\t\t\treturn \"Web Service: \" + (this.service.title || \"#\" + this.service.id);\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.vue-component.service > h2 {\n\tdisplay: none;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ServiceInfoModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ServiceInfoModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ServiceInfoModal.vue?vue&type=template&id=18f5b0b5&\"\nimport script from \"./ServiceInfoModal.vue?vue&type=script&lang=js&\"\nexport * from \"./ServiceInfoModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ServiceInfoModal.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"textEditor\",class:_vm.languageString},[_c('div',{staticClass:\"sourceHeader\"},[(_vm.title)?_c('strong',[_vm._v(_vm._s(_vm.title))]):_vm._e(),_c('div',{staticClass:\"sourceToolbar\"},[_c('span',{staticClass:\"sepr\"},[(_vm.editable)?_c('button',{attrs:{\"type\":\"button\",\"title\":\"New script / Clear current script\"},on:{\"click\":_vm.confirmClear}},[_c('i',{staticClass:\"fas fa-file\"})]):_vm._e(),_vm._t(\"file-toolbar\")],2),(_vm.editable)?_c('span',{staticClass:\"sepr\"},[_c('button',{attrs:{\"type\":\"button\",\"disabled\":!_vm.canUndo,\"title\":\"Revert last change\"},on:{\"click\":function($event){return _vm.editor.undo()}}},[_c('i',{staticClass:\"fas fa-undo-alt\"})]),_c('button',{attrs:{\"type\":\"button\",\"disabled\":!_vm.canRedo,\"title\":\"Redo last reverted change\"},on:{\"click\":function($event){return _vm.editor.redo()}}},[_c('i',{staticClass:\"fas fa-redo-alt\"})]),_vm._t(\"edit-toolbar\")],2):_vm._e(),_c('FullscreenButton',{attrs:{\"element\":_vm.element}}),_vm._t(\"toolbar\")],2)]),_c('div',{staticClass:\"sourceCodeEditor\",attrs:{\"id\":_vm.id}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"textEditor\" :class=\"languageString\">\n\t\t<div class=\"sourceHeader\">\n\t\t\t<strong v-if=\"title\">{{ title }}</strong>\n\t\t\t<div class=\"sourceToolbar\">\n\t\t\t\t<span class=\"sepr\">\n\t\t\t\t\t<button type=\"button\" v-if=\"editable\" @click=\"confirmClear\" title=\"New script / Clear current script\"><i class=\"fas fa-file\"></i></button>\n\t\t\t\t\t<slot name=\"file-toolbar\"></slot>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"sepr\" v-if=\"editable\">\n\t\t\t\t\t<button type=\"button\" @click=\"editor.undo()\" :disabled=\"!canUndo\" title=\"Revert last change\"><i class=\"fas fa-undo-alt\"></i></button>\n\t\t\t\t\t<button type=\"button\" @click=\"editor.redo()\" :disabled=\"!canRedo\" title=\"Redo last reverted change\"><i class=\"fas fa-redo-alt\"></i></button>\n\t\t\t\t\t<slot name=\"edit-toolbar\"></slot>\n\t\t\t\t</span>\n\t\t\t\t<FullscreenButton :element=\"element\" />\n\t\t\t\t<slot name=\"toolbar\"></slot>\n\t\t\t</div>\n\t\t</div>\n\t\t<div :id=\"id\" class=\"sourceCodeEditor\"></div>\n\t</div>\n</template>\n\n<script>\nimport Utils from '../utils.js';\nimport FullscreenButton from './FullscreenButton.vue';\nimport { ProcessGraph } from '@openeo/js-processgraphs';\n\nimport CodeMirror from 'codemirror';\nimport 'codemirror/lib/codemirror.css';\n\nimport 'codemirror/mode/javascript/javascript.js';\nimport 'codemirror/mode/markdown/markdown.js';\nimport 'codemirror/mode/mathematica/mathematica.js';\nimport 'codemirror/mode/python/python.js';\nimport 'codemirror/mode/r/r.js';\n\nimport 'codemirror/addon/display/placeholder.js';\n\nimport 'codemirror/addon/edit/matchbrackets.js';\nimport 'codemirror/addon/edit/closebrackets.js';\n\nimport 'codemirror/addon/lint/lint.css';\nimport 'codemirror/addon/lint/lint.js';\nimport 'codemirror/addon/lint/json-lint.js'\nimport jsonlint from 'jsonlint-mod';\nwindow.jsonlint = jsonlint;\n\nexport default {\n\tname: 'TextEditor',\n\tcomponents: {\n\t\tFullscreenButton\n\t},\n\tprops: {\n\t\tid: String,\n\t\teditable: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tvalue: {\n\t\t\trequired: true\n\t\t},\n\t\tlanguage: {\n\t\t\ttype: String,\n\t\t\tdefault: null // json, r, python, markdown, processgraph or null\n\t\t},\n\t\tplaceholder: {\n\t\t\ttype: String,\n\t\t\tdefault: \"\"\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String\n\t\t}\n\t},\n\tcomputed: {\n\t\t...Utils.mapGetters(['processes']),\n\t\tlanguageString() {\n\t\t\treturn typeof this.language === 'string' ? this.language.toLowerCase() : '';\n\t\t},\n\t\teditorOptions() {\n\t\t\tlet options = {\n\t\t\t\tindentUnit: 2,\n\t\t\t\tlineNumbers: true,\n\t\t\t\tindentWithTabs: true,\n\t\t\t\tmatchBrackets: true,\n\t\t\t\tautoCloseBrackets: true,\n\t\t\t\treadOnly: !this.editable,\n\t\t\t\tplaceholder: this.placeholder\n\t\t\t};\n\t\t\tswitch(this.languageString) {\n\t\t\t\tcase 'r':\n\t\t\t\t\toptions.mode = 'text/x-rsrc';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'python':\n\t\t\t\t\toptions.mode = 'text/x-python';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'math':\n\t\t\t\t\toptions.mode = 'text/x-mathematica'; // Use mathematica mode until we have something better for openEO\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'markdown':\n\t\t\t\t\toptions.mode = 'text/x-markdown';\n\t\t\t\t\toptions.lineWrapping = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'javascript':\n\t\t\t\t\toptions.mode = 'text/javascript';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'json':\n\t\t\t\tcase 'processgraph':\n\t\t\t\t\toptions.mode = 'application/json';\n\t\t\t\t\toptions.gutters = ['CodeMirror-lint-markers'];\n\t\t\t\t\toptions.lint = true;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn options;\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcanUndo: false,\n\t\t\tcanRedo: false,\n\t\t\teditor: null,\n\t\t\temitValue: this.value,\n\t\t\telement: null\n\t\t}\n\t},\n\twatch: {\n\t\tasync value() {\n\t\t\tif (this.emitValue !== this.value) {\n\t\t\t\tthis.updateContent();\n\t\t\t\tthis.editor.clearHistory();\n\t\t\t}\n\t\t},\n\t\teditorOptions() {\n\t\t\tfor(var key in this.editorOptions) {\n\t\t\t\tthis.editor.setOption(key, this.editorOptions[key]);\n\t\t\t}\n\t\t\tthis.updateContent();\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.editor = CodeMirror(document.getElementById(this.id), this.editorOptions);\n\t\tthis.editor.setSize(null, \"100%\");\n\t\tif (this.languageString === 'processgraph') {\n\t\t\tthis.editor.on(\"change\", () => this.updateState());\n\t\t}\n\t\tthis.updateContent();\n\n\t\t// Listen for changes only after first initialization\n\t\tthis.editor.on('changes', (cm, evt) => {\n\t\t\ttry {\n\t\t\t\t// Don't commit external changes (i.e. coming from the value prop)\n\t\t\t\tif (Object.values(evt).filter(e => e.origin === 'setValue').length === 0) {\n\t\t\t\t\tthis.commit();\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tthis.$emit('error', error);\n\t\t\t}\n\t\t});\n\n\t\tthis.element = this.$el;\n\t},\n\tmethods: {\n\t\tconfirmClear() {\n\t\t\tvar confirmed = confirm(\"Do you really want to clear the existing code?\");\n\t\t\tif (confirmed) {\n\t\t\t\tthis.insert(\"\");\n\t\t\t\tthis.emit(null);\n\t\t\t}\n\t\t},\n\t\tupdateState() {\n\t\t\t// Don't lint empty values\n\t\t\tthis.editor.setOption(\"lint\", !!this.editor.getValue().trim());\n\t\t\t// Update history state\n\t\t\tlet history = this.editor.getDoc().historySize();\n\t\t\tthis.canUndo = history.undo > 0;\n\t\t\tthis.canRedo = history.redo > 0;\n\t\t\t// Refresh editor\n\t\t\tthis.editor.refresh();\n\t\t\t// Refresh element for fullscreen\n\t\t\tthis.element = this.$el;\n\t\t},\n\t\tcommit() {\n\t\t\tvar value = this.editor.getValue();\n\t\t\tswitch(this.languageString) {\n\t\t\t\tcase 'math':\n\t\t\t\t\treturn this.emit(value.replace(/[\\r\\n\\t]+/, ' ')); // Replace line breaks and tabs with simple spaces\n\t\t\t\tcase 'processgraph':\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\tvar process = JSON.parse(value);\n\t\t\t\t\t\tif (Utils.size(process) > 0) {\n\t\t\t\t\t\t\tvar pg = new ProcessGraph(process, this.processes);\n\t\t\t\t\t\t\tpg.allowEmpty();\n\t\t\t\t\t\t\tpg.parse();\n\t\t\t\t\t\t\treturn this.emit(process);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this.emit(null);\n\t\t\t\tcase 'json':\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\treturn this.emit(JSON.parse(value));\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\treturn this.emit(null);\n\t\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\treturn this.emit(value);\n\t\t\t}\n\t\t},\n\t\temit(value) {\n\t\t\tthis.emitValue = value;\n\t\t\tthis.$emit('input', value);\n\t\t},\n\t\tinsert(text, replace = true) {\n\t\t\tif (typeof text !== 'string') {\n\t\t\t\ttext = String(text);\n\t\t\t}\n\t\t\tif (replace) {\n\t\t\t\t// Only update if it has really changed\n\t\t\t\tconst cmValue = this.editor.getValue();\n\t\t\t\tif (text !== cmValue) {\n\t\t\t\t\tconst scrollInfo = this.editor.getScrollInfo();\n\t\t\t\t\tthis.editor.setValue(text);\n\t\t\t\t\tthis.editor.scrollTo(scrollInfo.left, scrollInfo.top)\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.editor.replaceSelection(text);\n\t\t\t}\n\t\t},\n\t\tupdateContent() {\n\t\t\tif (this.value) {\n\t\t\t\tswitch(this.languageString) {\n\t\t\t\t\tcase 'processgraph':\n\t\t\t\t\t\tif (Utils.isObject(this.value)) {\n\t\t\t\t\t\t\tthis.insert(JSON.stringify(this.value, null, this.editorOptions.indentUnit));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tthis.insert(\"\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'json':\n\t\t\t\t\t\tthis.insert(JSON.stringify(this.value, null, this.editorOptions.indentUnit));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthis.insert(this.value);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.insert(\"\");\n\t\t\t}\n\t\t\tthis.editor.getDoc().clearHistory();\n\t\t\tthis.updateState();\n\t\t},\n\n\t\tinsertProcess(node) {\n\t\t\ttry {\n\t\t\t\tthis.insert(JSON.stringify(node, null, 2), false);\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error);\n\t\t\t}\n\t\t},\n\n\t}\n}\n</script>\n\n<style scoped>\n.textEditor {\n\theight: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\tborder: 1px solid #ddd;\n}\n.sourceCodeEditor {\n\tflex-grow: 1;\n\theight: 100%;\n\toverflow: hidden;\n}\n</style>\n<style>\n.textEditor.math .cm-operator {\n\tmargin: 0 0.2em;\n}\n.textEditor.markdown .CodeMirror-wrap pre {\n    word-break: break-word;\n}\n.CodeMirror-placeholder {\n\topacity: 0.5;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TextEditor.vue?vue&type=template&id=100002bb&scoped=true&\"\nimport script from \"./TextEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./TextEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TextEditor.vue?vue&type=style&index=0&id=100002bb&scoped=true&lang=css&\"\nimport style1 from \"./TextEditor.vue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"100002bb\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal\",style:({'z-index': _vm.zIndex}),on:{\"mousedown\":_vm.backgroundClose}},[_c('div',{ref:\"container\",staticClass:\"modal-container\",style:(_vm.style)},[_c('header',{staticClass:\"modal-header\",on:{\"mousedown\":_vm.startMove}},[_vm._t(\"header\",function(){return [_c('h2',[_vm._v(_vm._s(_vm.title))]),_c('span',{staticClass:\"close\",on:{\"click\":_vm.close}},[_c('i',{staticClass:\"fa fa-times\",attrs:{\"aria-hidden\":\"true\"}})])]})],2),_c('main',{staticClass:\"modal-content\"},[_vm._t(\"default\")],2),_c('footer',{staticClass:\"modal-footer\"},[_vm._t(\"footer\")],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"modal\" @mousedown=\"backgroundClose\" :style=\"{'z-index': zIndex}\">\n\t\t<div ref=\"container\" class=\"modal-container\" :style=\"style\">\n\t\t\t<header class=\"modal-header\" @mousedown=\"startMove\">\n\t\t\t\t<slot name=\"header\">\n\t\t\t\t\t<h2>{{ title }}</h2>\n\t\t\t\t\t<span class=\"close\" @click=\"close\"><i class=\"fa fa-times\" aria-hidden=\"true\"></i></span>\n\t\t\t\t</slot>\n\t\t\t</header>\n\t\t\t<main class=\"modal-content\">\n\t\t\t\t<slot></slot>\n\t\t\t</main>\n\t\t\t<footer class=\"modal-footer\">\n\t\t\t\t<slot name=\"footer\"></slot>\n\t\t\t</footer>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport EventBusMixin from '../EventBusMixin.vue';\nimport Utils from '../../utils.js';\n\nexport default {\n\tname: 'Modal',\n\tmixins: [EventBusMixin],\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\tdefault: null\n\t\t},\n\t\tminWidth: {\n\t\t\ttype: String,\n\t\t\tdefault: null\n\t\t},\n\t\twidth: {\n\t\t\ttype: String,\n\t\t\tdefault: \"auto\"\n\t\t},\n\t\tshow: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tzIndex: 1000,\n\t\t\tposition: null,\n\t\t\tdragPosition: null\n\t\t};\n\t},\n    computed: {\n\t\t...Utils.mapState('editor', ['hightestModalZIndex']),\n\t\tstyle() {\n\t\t\tlet style = {\n\t\t\t\t'width': this.width\n\t\t\t};\n\t\t\tif (this.minWidth) {\n\t\t\t\tstyle['min-width'] = this.minWidth;\n\t\t\t}\n\t\t\tif (Array.isArray(this.position)) {\n\t\t\t\tstyle.position = 'absolute';\n\t\t\t\tstyle.left = this.position[0] + 'px';\n\t\t\t\tstyle.top = this.position[1] + 'px';\n\t\t\t}\n\t\t\treturn style;\n\t\t}\n    },\n\twatch: {\n\t\tshow: {\n\t\t\timmediate: true,\n\t\t\thandler(show) {\n\t\t\t\tif (!show) {\n\t\t\t\t\tthis.close();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.open();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\t...Utils.mapMutations('editor', ['openModal', 'closeModal']),\n\t\topen() {\n\t\t\tthis.openModal();\n\t\t\tthis.zIndex = this.hightestModalZIndex;\n\t\t\twindow.addEventListener('keydown', this.escCloseListener);\n\t\t\tthis.$emit('shown');\n\t\t},\n\t\tclose() {\n\t\t\twindow.removeEventListener('keydown', this.escCloseListener);\n\t\t\tthis.closeModal();\n\t\t\tthis.$emit('closed');\n\t\t},\n\t\tstartMove(event) {\n\t\t\tif (event.target.tagName !== 'H2') {\n\t\t\t\tthis.dragPosition = [\n\t\t\t\t\tevent.clientX,\n\t\t\t\t\tevent.clientY\n\t\t\t\t];\n\n\t\t\t\tdocument.addEventListener('mousemove', this.move);\n\t\t\t\tdocument.addEventListener('mouseup', this.stopMove);\n\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t},\n\t\tstopMove() {\n\t\t\tdocument.removeEventListener('mousemove', this.move);\n\t\t\tdocument.removeEventListener('mouseup', this.stopMove);\n\t\t},\n\t\tmove(event) {\n      \t\tevent.preventDefault();\n\t\t\t// set the element's new position\n\t\t\tthis.position = [\n\t\t\t\tthis.$refs.container.offsetLeft - (this.dragPosition[0] - event.clientX),\n\t\t\t\tthis.$refs.container.offsetTop - (this.dragPosition[1] - event.clientY)\n\t\t\t];\n\t\t\t// Store for later\n\t\t\tthis.dragPosition = [\n\t\t\t\tevent.clientX,\n\t\t\t\tevent.clientY\n\t\t\t];\n\t\t},\n\t\tescCloseListener(event) {\n\t\t\tif (event.key == \"Escape\") { \n\t\t\t\tthis.close();\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tbackgroundClose(event) {\n\t\t\tif (event.target === this.$el) {\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t}\n\t}\n};\n</script>\n\n<style lang=\"scss\">\n@import '../../../theme.scss';\n\n.modal {\n    position: fixed;\n    z-index: 1000; /* Snotify has 9999 and is intentionally above the modals */\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0,0,0,0.4);\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.modal .modal-container {\n    background-color: #fff;\n    border: 1px solid #fff;\n\tmin-height: 50vh;\n\tmin-width: 300px;\n\twidth: 70%;\n\tmax-height: 96%;\n\tmax-width: 96%;\n\tdisplay: flex;\n\tflex-direction: column;\n\tbox-shadow: 8px 8px 8px 0px rgba(0,0,0,0.3);\n\tresize: both;\n\toverflow: hidden;\n}\n\n.modal .modal-header {\n\tbackground-color: $mainColor;\n\tcolor: white;\n\tmargin: 0;\n\theight: 1.5rem;\n\tpadding: 1rem;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n    cursor: move;\n}\n\n.modal .modal-header h2 {\n\tdisplay: inline-block;\n\tmargin: 0;\n\tmargin-left: -0.5rem;\n\tpadding: 0.5rem;\n\tfont-size: 1.5rem;\n\tborder: 0;\n\tcursor: text;\n}\n\n.modal .modal-content {\n    padding: 1rem;\n\toverflow: auto;\n\tflex-grow: 1;\n}\n\n.modal .inline .modal-content {\n\tpadding: 0;\n}\n\n.modal .modal-footer:empty {\n\tdisplay: none;\n}\n\n.modal .modal-footer {\n\tbackground-color: #eee;\n\tmargin: 0;\n\tpadding: 1rem;\n}\n\n.modal .close {\n\tfont-size: 1.5rem;\n\theight: 2rem;\n\twidth: 2rem;\n    color: white;\n    cursor: pointer;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.modal .close:hover, .modal .close:focus {\n    color: red;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Modal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Modal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Modal.vue?vue&type=template&id=4c656184&\"\nimport script from \"./Modal.vue?vue&type=script&lang=js&\"\nexport * from \"./Modal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Modal.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VisualEditor.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextEditor.vue?vue&type=style&index=0&id=100002bb&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.element),expression:\"element\"}],attrs:{\"type\":\"button\",\"title\":_vm.isFullscreen ? 'Close fullscreen' : 'Show fullscreen'},on:{\"click\":_vm.toggleFullscreen}},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isFullscreen),expression:\"isFullscreen\"}]},[_c('i',{staticClass:\"fas fa-compress\"})]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isFullscreen),expression:\"!isFullscreen\"}]},[_c('i',{staticClass:\"fas fa-expand\"})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<button v-show=\"element\" type=\"button\" @click=\"toggleFullscreen\" :title=\"isFullscreen ? 'Close fullscreen' : 'Show fullscreen'\">\n\t\t<span v-show=\"isFullscreen\"><i class=\"fas fa-compress\"></i></span>\n\t\t<span v-show=\"!isFullscreen\"><i class=\"fas fa-expand\"></i></span>\n\t</button>\n</template>\n\n<script>\nimport EventBusMixin from './EventBusMixin.vue';\nimport Utils from '../utils.js';\n\nexport default {\n\tname: 'FullscreenButton',\n\tmixins: [EventBusMixin],\n\tprops: {\n\t\telement: {\n\t\t\trequired: true\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tisFullscreen: false,\n\t\t\tkeyDownFn: null,\n\t\t\toldZIndex: 'auto'\n\t\t};\n\t},\n\tmounted() {\n\t\tthis.keyDownFn = this.onkeyDown.bind(this);\n\t\tlet el = this.getElement();\n\t\tif (el) {\n\t\t\tel.addEventListener('keydown', this.keyDownFn);\n\t\t}\n\t},\n    beforeDestroy() {\n\t\tlet el = this.getElement();\n\t\tif (el) {\n\t\t\tel.removeEventListener('keydown', this.keyDownFn);\n\t\t}\n    },\n    computed: {\n\t\t...Utils.mapState('editor', ['hightestModalZIndex'])\n\t},\n\tmethods: {\n\t\t...Utils.mapMutations('editor', ['openModal', 'closeModal']),\n\t\tonkeyDown(e) {\n\t\t\t// ToDo: This is very bugged and needs some attention\n\t\t\tif(this.isFullscreen && (e.key === \"F11\" || e.key === \"Escape\")) {\n\t\t\t\tthis.toggleFullscreen();\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n    \t\t}\n\t\t},\n\t\tgetElement() {\n\t\t\tif (typeof this.element === 'string') {\n\t\t\t\treturn document.querySelector(this.element);\n\t\t\t}\n\t\t\telse if (typeof this.element === 'function') {\n\t\t\t\treturn this.element();\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn this.element;\n\t\t\t}\n\t\t},\n\t\ttoggleFullscreen() {\n\t\t\tlet el = this.getElement();\n\t\t\tif (!this.isFullscreen) {\n\t\t\t\tthis.isFullscreen = true;\n\t\t\t\tel.classList.add('fullscreen');\n\t\t\t\t// Handle z-index to properly show above modals etc.\n\t\t\t\tthis.openModal();\n\t\t\t\tthis.oldZIndex = el.style.zIndex;\n\t\t\t\tel.style.zIndex = this.hightestModalZIndex;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.isFullscreen = false;\n\t\t\t\tel.classList.remove('fullscreen');\n\t\t\t\t// Revert z-index changes\n\t\t\t\tel.style.zIndex = this.oldZIndex;\n\t\t\t\tthis.closeModal();\n\t\t\t}\n\n\t\t\tthis.$emit('changed', this.isFullscreen);\n\t\t\tthis.emit('stopTour');\n\t\t},\n\t}\n};\n</script>\n\n<style>\n.fullscreen {\n\tposition: absolute !important;\n\ttop: 0 !important;\n\tleft: 0 !important;\n\twidth: 100% !important;\n\theight: 100% !important;\n\tbackground-color: white;\n\toverflow: auto;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FullscreenButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FullscreenButton.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FullscreenButton.vue?vue&type=template&id=ac711f22&\"\nimport script from \"./FullscreenButton.vue?vue&type=script&lang=js&\"\nexport * from \"./FullscreenButton.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FullscreenButton.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ServiceInfoModal.vue?vue&type=style&index=0&lang=scss&\"","import { BaseProcess, ProcessGraph } from '@openeo/js-processgraphs';\nimport Utils from \"../utils\";\n\nclass ProcessImpl extends BaseProcess {\n\tconstructor(process, exporter) {\n\t\tsuper(process);\n\t\tthis.exporter = exporter;\n\t}\n\tasync execute(node) {\n\t\tawait this.exporter.generateFunction(node);\n\t}\n}\n\nexport default class Exporter extends ProcessGraph {\n\n\tconstructor(process, registry, connection) {\n\t\tsuper(Utils.isObject(process) ? process : {}, registry);\n\t\tthis.connection = connection;\n\t\tthis.indent = 0;\n\t\tthis.code = [];\n\t\tthis.fnCounter = 1;\n\t\tthis.allowEmpty();\n\t\tthis.fillUndefinedParameters();\n\t}\n\n\t// inherited from ProcessGraph\n\n\tcreateProcessGraphInstance(process) {\n\t\tlet pg = new Exporter(process, this.processRegistry, this.getJsonSchemaValidator());\n\t\treturn this.copyProcessGraphInstanceProperties(pg);\n\t}\n\n\tcopyProcessGraphInstanceProperties(pg) {\n\t\tpg = super.copyProcessGraphInstanceProperties(pg);\n\t\tpg.connection = this.connection;\n\t\treturn pg;\n\t}\n\n\tcreateProcessInstance(process) {\n\t\treturn new ProcessImpl(process, this);\n\t}\n\n\tisKeyword(keyword) {\n\t\treturn this.getKeywords().includes(keyword.toLowerCase());\n\t}\n\n\t// Methods to be implemented by sub-class\n\n\tgetKeywords() {\n\t\treturn [];\n\t}\n\n\tcomment(/*comment*/) {}\n\n\tgenerateImports() {}\n\n\tgenerateConnection() {}\n\n\tgenerateAuthentication() {}\n\n\tgenerateBuilder() {}\n\n\tgenerateMetadata(/*key, value*/) {}\n\n\tgenerateMissingParameter() {}\n\n\tasync generateFunction(/*node*/) {}\n\n\tgenerateFunctionParams(parameters) {\n\t\treturn parameters.map(p => {\n\t\t\tif (typeof p.default !== 'undefined') {\n\t\t\t\treturn `${p.name} = ${this.e(p.default)}`;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn p.name;\n\t\t\t}\n\t\t});\n\t}\n\n\tasync generateCallback(/*callback, parameters, variable*/) {}\n\n\tgenerateResult(/*resultNode, callback*/) {}\n\n\tmakeNull() {\n\t\treturn \"null\";\n\t}\n\tmakeBoolean(val) {\n\t\treturn val ? \"true\" : \"false\";\n\t}\n\tmakeArray(arr) {\n\t\treturn `[${arr.join(', ')}]`;\n\t}\n\tmakeObject(obj) {\n\t\tlet arr = Utils.mapObject(obj, (val, key) => `${this.makeString(key)}: ${val}`);\n\t\treturn `{${arr.join(', ')}}`;\n\t}\n\tmakeString(str) {\n\t\treturn JSON.stringify(str);\n\t}\n\tmakeNumber(num) {\n\t\treturn num;\n\t}\n\n\t// Helpers\n\n\te(value) {\n\t\tif (value === null) {\n\t\t\treturn this.makeNull();\n\t\t}\n\t\telse if (typeof value === 'boolean') {\n\t\t\treturn this.makeBoolean(value);\n\t\t}\n\t\telse if (typeof value === 'number') {\n\t\t\treturn this.makeNumber(value);\n\t\t}\n\t\telse if (typeof value === 'string') {\n\t\t\treturn this.makeString(value);\n\t\t}\n\t\telse if (Array.isArray(value)) {\n\t\t\treturn this.makeArray(value.map(val => this.e(val)));\n\t\t}\n\t\telse if (Utils.isObject(value)) {\n\t\t\treturn this.makeObject(Utils.mapObjectValues(value, val => this.e(val)));\n\t\t}\n\t\telse if (typeof value === 'function') {\n\t\t\treturn value();\n\t\t}\n\t\telse {\n\t\t\treturn this.makeNull();\n\t\t}\n\t}\n\n\tgenerateMetadata() {\n\t\tlet hasComment = false;\n\t\tfor(let key in this.process) {\n\t\t\tif (key === 'process_graph') {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet val = this.process[key];\n\t\t\tif (Array.isArray(val) && val.length === 0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\telse if (typeof val === 'string' && val.length === 0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\telse if (typeof val === 'boolean' && !val) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (!hasComment) {\n\t\t\t\tthis.newLine();\n\t\t\t\tthis.comment(`Set the metadata for the process`);\n\t\t\t\thasComment = true;\n\t\t\t}\n\t\t\tthis.generateMetadataEntry(key, val);\n\t\t}\n\t}\n\n\tasync resolveArguments(args, onExporter, filter) {\n\t\tlet newArgs = Array.isArray(args) ? [] : {};\n\t\tfor(let key in args) {\n\t\t\tlet value = args[key];\n\t\t\tif (filter && filter(key, value)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (Utils.isObject(value)) {\n\t\t\t\tif (value.from_node) {\n\t\t\t\t\tnewArgs[key] = () => this.var(value.from_node);\n\t\t\t\t\tcontinue; \n\t\t\t\t}\n\t\t\t\telse if (value.from_parameter) {\n\t\t\t\t\tnewArgs[key] = () => this.var(value.from_parameter);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\telse if (value instanceof Exporter) {\n\t\t\t\t\tlet fnName = await onExporter(key);\n\t\t\t\t\tnewArgs[key] = () => fnName;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnewArgs[key] = await this.resolveArguments(value, onExporter, filter);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (Array.isArray(value)) {\n\t\t\t\tnewArgs[key] = await this.resolveArguments(value, onExporter, filter);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tnewArgs[key] = value;\n\t\t\t}\n\t\t}\n\t\treturn newArgs;\n\t}\n\n\tasync resolveCallback(node, key) {\n\t\tlet callback = node.getArgument(key);\n\t\tlet parameters = callback.getCallbackParameters();\n\t\tawait callback.execute(parameters);\n\t\tlet fnName = this.var(`${key}${this.fnCounter++}`, 'fn_');\n\t\tlet replacement = await this.generateCallback(callback, parameters, fnName);\n\t\treturn replacement ? replacement : fnName;\n\t}\n\n\tasync generateArguments(node, ordered = false, filter = null) {\n\t\tlet args = await this.resolveArguments(node.arguments, async key => await this.resolveCallback(node, key), filter);\n\t\tif (ordered) {\n\t\t\targs = this.orderArguments(node, args);\n\t\t}\n\t\treturn args;\n\t}\n\n\torderArguments(node, args) {\n\t\tlet process = node.getProcessGraph().getProcess(node);\n\t\tif (process && Array.isArray(process.parameters)) {\n\t\t\tlet orderedArgs = process.parameters.map(param => {\n\t\t\t\tif (typeof args[param.name] !== 'undefined') {\n\t\t\t\t\treturn args[param.name];\n\t\t\t\t}\n\t\t\t\telse if (!param.optional) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet definedValueFound = false;\n\t\t\tfor(let i = orderedArgs.length-1; i >= 0; i--) {\n\t\t\t\tif (typeof orderedArgs[i] === 'undefined') {\n\t\t\t\t\tif (definedValueFound) {\n\t\t\t\t\t\torderedArgs[i] = null;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\torderedArgs.pop();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdefinedValueFound = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn orderedArgs;\n\t\t}\n\t}\n\n\tvar(id, prefix = \"datacube\") {\n\t\tid = String(id);\n\t\tif (this.isKeyword(id)) {\n\t\t\treturn `${id}_`;\n\t\t}\n\t\tif (!id.match(/^[a-z_]\\w*$/)) {\n\t\t\treturn `${prefix}${id}`;\n\t\t}\n\t\telse {\n\t\t\treturn id;\n\t\t}\n\t}\n\n\tgetTab() {\n\t\treturn `\\t`;\n\t}\n\n\taddCode(code, prefix = '') {\n\t\tif (typeof code !== 'string') {\n\t\t\treturn;\n\t\t}\n\t\tlet tabs = this.getTab().repeat(this.indent);\n\t\tlet lines = code.trim().split(/\\r\\n|\\r|\\n/g);\n\t\tfor(let line of lines) {\n\t\t\tthis.code.push(`${tabs}${prefix}${line}\\n`);\n\t\t}\n\t}\n\n\tnewLine(count = 1) {\n\t\tfor(let i = 0; i < count; i++) {\n\t\t\tthis.addCode('');\n\t\t}\n\t}\n\n\tgetServerUrl() {\n\t\treturn this.connection.getUrl();\n\t}\n\n\tasync toCode(callback = false) {\n\t\tthis.code = [];\n\t\tif (!callback) {\n\t\t\tthis.comment(`Import required packages`);\n\t\t\tthis.generateImports();\n\t\t\tthis.newLine();\n\t\t\tthis.comment(`Connect to the back-end`);\n\t\t\tthis.generateConnection();\n\t\t\tthis.generateAuthentication();\n\t\t\tthis.newLine();\n\t\t\tthis.generateBuilder();\n\t\t\tthis.generateMetadata();\n\t\t\tthis.newLine();\n\t\t}\n\t\tlet params = this.getProcessParameters();\n\t\tif (params.length > 0) {\n\t\t\tthis.comment('ToDo: Here you need to set values for the parameters');\n\t\t\tfor(let param of params) {\n\t\t\t\tthis.generateMissingParameter(param);\n\t\t\t}\n\t\t\tthis.newLine();\n\t\t}\n\t\tawait this.execute();\n\t\tif (!callback) {\n\t\t\tthis.newLine();\n\t\t\tthis.comment(`The process can be executed synchronously (see below), as batch job or as web service now`);\n\t\t}\n\t\tthis.generateResult(this.getResultNode(), callback);\n\t\treturn this.code.join('').trim();\n\t}\n\n\tasync execute() {\n\t\tawait this.validate();\n\t\tthis.reset();\n\t\tawait this.executeNodes(this.getStartNodes());\n\t\treturn this.getResultNode();\n\t}\n\n\tisMath() {\n\t\tif (typeof this._isMath === 'undefined') {\n\t\t\t// Determine whether the process is just math\n\t\t\tthis._isMath = this.processRegistry.isMath(this);\n\t\t}\n\t\treturn this._isMath;\n\t}\n\n}","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DiscoveryToolbar.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DiscoveryToolbar.vue?vue&type=style&index=1&id=e5b627b0&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Modal.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FullscreenButton.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"discovery-toolbar\"},[_c('SearchBox',{model:{value:(_vm.searchTerm),callback:function ($$v) {_vm.searchTerm=$$v},expression:\"searchTerm\"}}),_c('div',{staticClass:\"search-results\"},[_c('Collections',{staticClass:\"category\",attrs:{\"collections\":_vm.collections,\"searchTerm\":_vm.searchTerm,\"offerDetails\":false,\"collapsed\":_vm.collapsed},scopedSlots:_vm._u([{key:\"summary\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',{staticClass:\"discovery-entity\",attrs:{\"draggable\":_vm.supportsLoadCollection},on:{\"dragstart\":function($event){return _vm.onDrag($event, 'collection', item)}}},[_c('div',{staticClass:\"discovery-info\",on:{\"click\":function($event){return _vm.showCollectionInfo(item.id)}}},[_c('strong',{attrs:{\"title\":item.id}},[_vm._v(_vm._s(item.id))]),(item.title)?_c('small',{attrs:{\"title\":item.title}},[_vm._v(_vm._s(item.title))]):_vm._e()]),(_vm.hasCollectionPreview(item))?_c('button',{staticClass:\"discovery-button\",attrs:{\"type\":\"button\",\"title\":\"View on map\"},on:{\"click\":function($event){return _vm.showCollectionPreview(item)}}},[_c('i',{staticClass:\"fas fa-map\"})]):_vm._e()])]}}])}),_c('Processes',{staticClass:\"category\",attrs:{\"processes\":_vm.allProcesses,\"searchTerm\":_vm.searchTerm,\"offerDetails\":false,\"collapsed\":_vm.collapsed},scopedSlots:_vm._u([{key:\"summary\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',{staticClass:\"discovery-entity\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":function($event){return _vm.onDrag($event, 'process', item)}}},[_c('div',{staticClass:\"discovery-info\",on:{\"click\":function($event){return _vm.showProcess(item)}}},[(item.namespace === 'user')?_c('i',{staticClass:\"custom-process fas fa-xs fa-sitemap\",attrs:{\"title\":\"Custom Process\"}}):(item.namespace !== 'backend')?_c('i',{staticClass:\"custom-process fas fa-xs fa-tag\",attrs:{\"title\":(\"Process from namespace '\" + (item.namespace) + \"'\")}}):_vm._e(),_c('strong',{attrs:{\"title\":item.id}},[_vm._v(_vm._s(item.id))]),(item.summary)?_c('small',{attrs:{\"title\":item.summary}},[_vm._v(_vm._s(item.summary))]):_vm._e()])])]}}])}),(_vm.hasUdfRuntimes)?_c('UdfRuntimes',{staticClass:\"category\",attrs:{\"runtimes\":_vm.udfRuntimes,\"searchTerm\":_vm.searchTerm,\"offerDetails\":false,\"collapsed\":_vm.collapsed},scopedSlots:_vm._u([{key:\"summary\",fn:function(ref){\nvar summary = ref.summary;\nvar item = ref.item;\nreturn [_c('div',{staticClass:\"discovery-entity\",attrs:{\"draggable\":_vm.supportsRunUdf},on:{\"dragstart\":function($event){return _vm.onDrag($event, 'udf', {runtime: summary.identifier, version: item.default})}}},[_c('div',{staticClass:\"discovery-info\",on:{\"click\":function($event){return _vm.showUdfInfo(summary.identifier, item)}}},[_c('strong',{attrs:{\"title\":summary.identifier}},[_vm._v(_vm._s(summary.identifier)+\" (\"+_vm._s(item.default)+\")\")]),(summary.summary)?_c('small',{attrs:{\"title\":summary.summary}},[_vm._v(_vm._s(summary.summary))]):_vm._e()])])]}}],null,false,92063951)}):_vm._e(),_c('FileFormats',{staticClass:\"category\",attrs:{\"formats\":_vm.fileFormats,\"showInput\":false,\"heading\":\"Export File Formats\",\"searchTerm\":_vm.searchTerm,\"offerDetails\":false,\"collapsed\":_vm.collapsed},scopedSlots:_vm._u([{key:\"summary\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',{staticClass:\"discovery-entity\",attrs:{\"draggable\":_vm.supportsSaveResult},on:{\"dragstart\":function($event){return _vm.onDrag($event, 'fileformat', item)}}},[_c('div',{staticClass:\"discovery-info\",on:{\"click\":function($event){return _vm.showFileFormatInfo(item)}}},[_c('strong',{attrs:{\"title\":item.name}},[_vm._v(_vm._s(item.name))]),(item.title)?_c('small',{attrs:{\"title\":item.title}},[_vm._v(_vm._s(item.title))]):_vm._e()])])]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"discovery-toolbar\">\n\t\t<SearchBox v-model=\"searchTerm\" />\n\t\t<div class=\"search-results\">\n\t\t\t<Collections class=\"category\" :collections=\"collections\" :searchTerm=\"searchTerm\" :offerDetails=\"false\" :collapsed=\"collapsed\">\n\t\t\t\t<template #summary=\"{ item }\">\n\t\t\t\t\t<div class=\"discovery-entity\" :draggable=\"supportsLoadCollection\" @dragstart=\"onDrag($event, 'collection', item)\">\n\t\t\t\t\t\t<div class=\"discovery-info\" @click=\"showCollectionInfo(item.id)\">\n\t\t\t\t\t\t\t<strong :title=\"item.id\">{{ item.id }}</strong>\n\t\t\t\t\t\t\t<small v-if=\"item.title\" :title=\"item.title\">{{ item.title }}</small>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button v-if=\"hasCollectionPreview(item)\" class=\"discovery-button\" type=\"button\" @click=\"showCollectionPreview(item)\" title=\"View on map\"><i class=\"fas fa-map\"></i></button>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</Collections>\n\n\t\t\t<Processes class=\"category\" :processes=\"allProcesses\" :searchTerm=\"searchTerm\" :offerDetails=\"false\" :collapsed=\"collapsed\">\n\t\t\t\t<template #summary=\"{ item }\">\n\t\t\t\t\t<div class=\"discovery-entity\" draggable=\"true\" @dragstart=\"onDrag($event, 'process', item)\">\n\t\t\t\t\t\t<div class=\"discovery-info\" @click=\"showProcess(item)\">\n\t\t\t\t\t\t\t<i v-if=\"item.namespace === 'user'\" class=\"custom-process fas fa-xs fa-sitemap\" title=\"Custom Process\"></i>\n\t\t\t\t\t\t\t<i v-else-if=\"item.namespace !== 'backend'\" class=\"custom-process fas fa-xs fa-tag\" :title=\"`Process from namespace '${item.namespace}'`\"></i>\n\t\t\t\t\t\t\t<strong :title=\"item.id\">{{ item.id }}</strong>\n\t\t\t\t\t\t\t<small v-if=\"item.summary\" :title=\"item.summary\">{{ item.summary }}</small>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</Processes>\n\n\t\t\t<UdfRuntimes v-if=\"hasUdfRuntimes\" class=\"category\" :runtimes=\"udfRuntimes\" :searchTerm=\"searchTerm\" :offerDetails=\"false\" :collapsed=\"collapsed\">\n\t\t\t\t<template #summary=\"{ summary, item }\">\n\t\t\t\t\t<div class=\"discovery-entity\" :draggable=\"supportsRunUdf\" @dragstart=\"onDrag($event, 'udf', {runtime: summary.identifier, version: item.default})\">\n\t\t\t\t\t\t<div class=\"discovery-info\" @click=\"showUdfInfo(summary.identifier, item)\">\n\t\t\t\t\t\t\t<strong :title=\"summary.identifier\">{{ summary.identifier }} ({{ item.default }})</strong>\n\t\t\t\t\t\t\t<small v-if=\"summary.summary\" :title=\"summary.summary\">{{ summary.summary }}</small>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</UdfRuntimes>\n\n\t\t\t<FileFormats class=\"category\" :formats=\"fileFormats\" :showInput=\"false\" heading=\"Export File Formats\" :searchTerm=\"searchTerm\" :offerDetails=\"false\" :collapsed=\"collapsed\">\n\t\t\t\t<template #summary=\"{ item }\">\n\t\t\t\t\t<div class=\"discovery-entity\" :draggable=\"supportsSaveResult\" @dragstart=\"onDrag($event, 'fileformat', item)\">\n\t\t\t\t\t\t<div class=\"discovery-info\" @click=\"showFileFormatInfo(item)\">\n\t\t\t\t\t\t\t<strong :title=\"item.name\">{{ item.name }}</strong>\n\t\t\t\t\t\t\t<small v-if=\"item.title\" :title=\"item.title\">{{ item.title }}</small>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</FileFormats>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport EventBusMixin from './EventBusMixin.vue';\nimport Utils from '../utils.js';\nimport Collections from '@openeo/vue-components/components/Collections.vue';\nimport FileFormats from '@openeo/vue-components/components/FileFormats.vue';\nimport Processes from '@openeo/vue-components/components/Processes.vue';\nimport SearchBox from '@openeo/vue-components/components/SearchBox.vue';\nimport UdfRuntimes from '@openeo/vue-components/components/UdfRuntimes.vue';\n\nexport default {\n\tname: 'DiscoveryToolbar',\n\tmixins: [EventBusMixin],\n\tcomponents: {\n\t\tCollections,\n\t\tFileFormats,\n\t\tProcesses,\n\t\tSearchBox,\n\t\tUdfRuntimes\n\t},\n\tprops: {\n\t\tonAddProcess: {\n\t\t\ttype: Function,\n\t\t\trequired: true\n\t\t},\n\t\tcollectionPreview: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tpersist: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tinternalSearchTerm: '',\n\t\t\tcollapsed: true\n\t\t};\n\t},\n\tcomputed: {\n\t\t...Utils.mapState(['collections', 'udfRuntimes']),\n\t\t...Utils.mapState('editor', ['discoverySearchTerm']),\n\t\t...Utils.mapGetters(['supports', 'collectionDefaults', 'fileFormats', 'processes']),\n\t\tsupportsLoadCollection() {\n\t\t\treturn this.processes.has('load_collection');\n\t\t},\n\t\tsupportsRunUdf() {\n\t\t\treturn this.processes.has('run_udf');\n\t\t},\n\t\tsupportsSaveResult() {\n\t\t\treturn this.processes.has('save_result');\n\t\t},\n\t\thasUdfRuntimes() {\n\t\t\treturn Utils.size(this.udfRuntimes);\n\t\t},\n\t\tallProcesses() {\n\t\t\treturn this.processes.all();\n\t\t},\n\t\tsearchTerm: {\n\t\t\tget() {\n\t\t\t\tif (this.persist) {\n\t\t\t\t\treturn this.discoverySearchTerm;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn this.internalSearchTerm;\n\t\t\t\t}\n\t\t\t},\n\t\t\tset(newValue) {\n\t\t\t\tif (this.persist) {\n\t\t\t\t\tthis.setDiscoverySearchTerm(newValue);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.internalSearchTerm = newValue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\twatch: {\n\t\tsearchTerm: {\n\t\t\timmediate: true,\n\t\t\thandler(newVal, oldVal) {\n\t\t\t\tif (!newVal && oldVal) {\n\t\t\t\t\tthis.collapsed = true;\n\t\t\t\t}\n\t\t\t\telse if (newVal && !oldVal) {\n\t\t\t\t\tthis.collapsed = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\t...Utils.mapMutations('editor', ['setDiscoverySearchTerm']),\n\t\tonDrag(event, type, data) {\n\t\t\tlet node = this.getNode(type, data);\n\t\t\tevent.dataTransfer.setData(\"application/vnd.openeo-node\", JSON.stringify(node));\n\t\t\tevent.dataTransfer.setData(\"text/plain\", JSON.stringify(node, null, 2));\n\t\t},\n\t\tshowCollectionInfo(id) {\n\t\t\tthis.emit('showCollection', id);\n\t\t},\n\t\thasCollectionPreview(collection) {\n\t\t\treturn Boolean(this.collectionPreview && Utils.getPreviewLinkFromSTAC(collection));\n\t\t},\n\t\tshowCollectionPreview(collection) {\n\t\t\tthis.emit('showCollectionPreview', collection);\n\t\t},\n\t\tshowProcess(process) {\n\t\t\tthis.emit('showProcess', process);\n\t\t},\n\t\tshowUdfInfo(id, data) {\n\t\t\tthis.emit('showModal', 'UdfRuntimeModal', {id, data, version: data.default});\n\t\t},\n\t\tshowFileFormatInfo(format) {\n\t\t\tlet props = {\n\t\t\t\tid: format.name,\n\t\t\t\tformat: this.fileFormats.output[format.name],\n\t\t\t\ttype: \"output\"\n\t\t\t};\n\t\t\tthis.emit('showModal', 'FileFormatModal', props);\n\t\t},\n\t\tgetNode(type, data) {\n\t\t\tswitch(type) {\n\t\t\t\tcase 'collection':\n\t\t\t\t\treturn {\n\t\t\t\t\t\tprocess_id: 'load_collection',\n\t\t\t\t\t\targuments: this.collectionDefaults(data.id)\n\t\t\t\t\t};\n\t\t\t\tcase 'process':\n\t\t\t\t\treturn {\n\t\t\t\t\t\tprocess_id: data.id,\n\t\t\t\t\t\tnamespace: data.namespace,\n\t\t\t\t\t\targuments: {}\n\t\t\t\t\t};\n\t\t\t\tcase 'udf':\n\t\t\t\t\treturn {\n\t\t\t\t\t\tprocess_id: 'run_udf',\n\t\t\t\t\t\targuments: data\n\t\t\t\t\t};\n\t\t\t\tcase 'fileformat':\n\t\t\t\t\treturn {\n\t\t\t\t\t\tprocess_id: 'save_result',\n\t\t\t\t\t\targuments: {format: data.name, options: {}}\n\t\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style>\n.search-results h2.heading {\n\tfont-size: 1em;\n\tborder: 0;\n\tmargin: 0;\n\tpadding: 0;\n\tmargin-bottom: 0.5em;\n}\n.search-results .vue-component.searchable-list ul.list > li > summary:before {\n\tcontent: '';\n\tmargin-left: 0;\n\tfloat: none;\n}\n.search-results .vue-component.searchable-list ul.list > li > summary {\n\tmargin: 0;\n\tline-height: inherit;\n}\n.search-results .vue-component.searchable-list ul.list > li {\n\tmargin-bottom: 0;\n}\n</style>\n\n<style lang=\"scss\" scoped>\n@import '../../theme.scss';\n\n.discovery-toolbar {\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\toverflow: hidden; /* to hide .search-box .icon */\n}\n\n.search-results {\n\toverflow-y: auto;\n\tflex-grow: 1;\n}\n\n.category {\n\tpadding: 5px;\n}\n.category strong {\n\tcursor: pointer;\n\toverflow: hidden;\n\twhite-space: nowrap;\n}\n\n.discovery-entity {\n\tdisplay: flex;\n\tmargin: 0.25em 0;\n\tborder: 1px solid #ddd;\n\tborder-radius: 3px;\n\tcursor: pointer;\n\tuser-select: none;\n\tfont-size: 0.9em;\n\n\tstrong {\n\t\tdisplay: block;\n\t\tfont-weight: normal;\n\t\twhite-space: nowrap;\n\t\twidth: 100%;\n\t\toverflow: hidden; \n\t\ttext-overflow: ellipsis;\n\t\tcolor: $linkColor;\n\t}\n\n\tsmall {\n\t\tmargin-top: 0.25em;\n\t\tdisplay: block;\n\t}\n\n\t.discovery-info {\n\t\tflex-grow: 1;\n\t\tpadding: 5px;\n\t\twidth: 100%;\n\t\toverflow: hidden; \n\t\tposition: relative;\n\n\t\t&:hover {\n\t\t\tbackground-color: #eee;\n\n\t\t\tstrong {\n\t\t\t\tcolor: #000;\n\t\t\t}\n\t\t}\n\t}\n\n\t.discovery-button {\n\t\tdisplay: block;\n\t\tmargin: 0;\n\t\tpadding: 5px;\n\t\tbackground-color: #fff;\n\t\tcolor: #aaa;\n\t\tborder: 0;\n\t\tborder-left: 1px solid #ddd;\n\n\t\t&:hover {\n\t\t\tbackground-color: #eee;\n\t\t\tcolor: #000;\n\t\t}\n\t}\n\n\t.custom-process {\n\t\tposition: absolute;\n\t\ttop: 7px;\n\t\tright: 5px;\n\t}\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DiscoveryToolbar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DiscoveryToolbar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DiscoveryToolbar.vue?vue&type=template&id=e5b627b0&scoped=true&\"\nimport script from \"./DiscoveryToolbar.vue?vue&type=script&lang=js&\"\nexport * from \"./DiscoveryToolbar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DiscoveryToolbar.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./DiscoveryToolbar.vue?vue&type=style&index=1&id=e5b627b0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e5b627b0\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextEditor.vue?vue&type=style&index=1&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Tabs',{ref:\"tabs\",staticClass:\"editor\",attrs:{\"id\":\"customProcessContent\",\"position\":\"bottom\"}},[_c('Tab',{attrs:{\"id\":\"visual\",\"name\":\"Visual Model\",\"icon\":\"fa-project-diagram\",\"selected\":true,\"allowShow\":_vm.canSwitchView},on:{\"show\":_vm.showModel}},[_c('VisualEditor',{ref:\"graphBuilder\",staticClass:\"visualEditorTab\",attrs:{\"editable\":_vm.editable,\"parent\":_vm.parent,\"parentSchema\":_vm.parentSchema,\"value\":_vm.modelValue,\"title\":_vm.title,\"id\":_vm.id + '_visual',\"showDiscoveryToolbar\":_vm.showDiscoveryToolbar,\"defaultValue\":_vm.defaultValue},on:{\"input\":_vm.commit,\"error\":_vm.onError},scopedSlots:_vm._u([{key:\"file-toolbar\",fn:function(){return [_vm._t(\"file-toolbar\")]},proxy:true},{key:\"toolbar\",fn:function(){return [_vm._t(\"toolbar\")]},proxy:true}],null,true)})],1),_c('Tab',{attrs:{\"id\":\"source\",\"name\":\"Code\",\"icon\":\"fa-code\",\"allowShow\":_vm.canSwitchView},on:{\"show\":_vm.showCode}},[_c('TextEditor',{ref:\"sourceEditor\",staticClass:\"textEditorTab\",attrs:{\"editable\":_vm.editable,\"value\":_vm.codeValue,\"title\":_vm.title,\"id\":_vm.id + '_text',\"language\":\"processgraph\"},on:{\"input\":_vm.commit,\"error\":_vm.onError},scopedSlots:_vm._u([{key:\"file-toolbar\",fn:function(){return [_vm._t(\"file-toolbar\")]},proxy:true},{key:\"toolbar\",fn:function(){return [_vm._t(\"toolbar\")]},proxy:true}],null,true)})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {\nvar this$1 = this;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"visualEditor\",staticClass:\"visualEditor\"},[_c('div',{staticClass:\"sourceHeader\"},[(_vm.title)?_c('strong',[_vm._v(_vm._s(_vm.title))]):_vm._e(),_c('div',{staticClass:\"sourceToolbar\"},[(_vm.editable)?_c('span',{staticClass:\"sepr\"},[_c('button',{attrs:{\"type\":\"button\",\"title\":\"New script / Clear current script\"},on:{\"click\":_vm.confirmClear}},[_c('i',{staticClass:\"fas fa-file\"})]),_vm._t(\"file-toolbar\")],2):_vm._e(),(_vm.editable)?_c('span',{staticClass:\"sepr\"},[_c('button',{attrs:{\"type\":\"button\",\"disabled\":!_vm.canUndo,\"title\":\"Revert last change\"},on:{\"click\":function($event){return _vm.$refs.blocks.undo()}}},[_c('i',{staticClass:\"fas fa-undo-alt\"})]),_c('button',{attrs:{\"type\":\"button\",\"disabled\":!_vm.canRedo,\"title\":\"Redo last reverted change\"},on:{\"click\":function($event){return _vm.$refs.blocks.redo()}}},[_c('i',{staticClass:\"fas fa-redo-alt\"})]),_c('button',{attrs:{\"type\":\"button\",\"disabled\":!_vm.hasSelection,\"title\":\"Delete selected elements\"},on:{\"click\":function($event){return _vm.$refs.blocks.deleteSelected()}}},[_c('i',{staticClass:\"fas fa-trash\"})])]):_vm._e(),(_vm.editable)?_c('span',{staticClass:\"sepr\"},[(!_vm.parent)?_c('button',{attrs:{\"type\":\"button\",\"title\":\"Edit Process Metadata\"},on:{\"click\":function () { return _vm.editProcess(_vm.value); }}},[_c('i',{staticClass:\"fas fa-edit\"})]):_vm._e(),_c('button',{attrs:{\"type\":\"button\",\"title\":\"Add Parameter\"},on:{\"click\":_vm.addParameter}},[_c('i',{staticClass:\"fas fa-parking\"})]),(_vm.supportsMath)?_c('button',{class:{highlightFormula: _vm.isMath},attrs:{\"type\":\"button\",\"title\":\"Insert/Edit formula\"},on:{\"click\":_vm.showExpressionModal}},[_c('i',{staticClass:\"fas fa-square-root-alt\"})]):_vm._e()]):_vm._e(),_c('button',{class:{compactMode: _vm.compactMode},attrs:{\"type\":\"button\",\"title\":\"Compact Mode\"},on:{\"click\":function($event){return _vm.$refs.blocks.toggleCompact()}}},[_c('i',{staticClass:\"fas fa-compress-arrows-alt\"})]),_c('button',{attrs:{\"type\":\"button\",\"title\":\"Scale to perfect size\"},on:{\"click\":function($event){return _vm.$refs.blocks.perfectScale()}}},[_c('i',{staticClass:\"fas fa-arrows-alt\"})]),_c('FullscreenButton',{attrs:{\"element\":function () { return this$1.$refs.visualEditor; }},on:{\"changed\":function (enabled) {this$1.$refs.blocks.perfectScale(); _vm.isFullScreen = enabled}}}),_vm._t(\"toolbar\")],2)]),_c('div',{staticClass:\"editorSplitter\"},[((_vm.showDiscoveryToolbar || _vm.isFullScreen) && _vm.editable)?_c('DiscoveryToolbar',{staticClass:\"discoveryToolbar\",attrs:{\"onAddProcess\":_vm.insertProcess}}):_vm._e(),_c('div',{staticClass:\"graphBuilder\",on:{\"drop\":_vm.onDrop,\"dragover\":_vm.allowDrop}},[_c('ModelBuilder',{ref:\"blocks\",attrs:{\"editable\":_vm.editable,\"id\":_vm.id,\"processes\":_vm.processes,\"collections\":_vm.collections,\"parent\":_vm.parent,\"parentSchema\":_vm.parentSchema,\"value\":_vm.value},on:{\"input\":_vm.commit,\"error\":_vm.errorHandler,\"showProcess\":function (id, namespace) { return _vm.emit('showProcess', {id: id, namespace: namespace}); },\"showCollection\":function (id) { return _vm.emit('showCollection', id); },\"showParameter\":function (param) { return _vm.emit('showProcessParameter', param); },\"editParameter\":_vm.editParameter,\"editArguments\":_vm.openArgumentEditor,\"compactMode\":function (compact) { return this$1.compactMode = compact; },\"selectionChanged\":_vm.selectionChanged,\"historyChanged\":_vm.historyChanged}})],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"visualEditor\" ref=\"visualEditor\">\n\t\t<div class=\"sourceHeader\">\n\t\t\t<strong v-if=\"title\">{{ title }}</strong>\n\t\t\t<div class=\"sourceToolbar\">\n\t\t\t\t<span class=\"sepr\" v-if=\"editable\">\n\t\t\t\t\t<button type=\"button\" @click=\"confirmClear\" title=\"New script / Clear current script\"><i class=\"fas fa-file\"></i></button>\n\t\t\t\t\t<slot name=\"file-toolbar\"></slot>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"sepr\" v-if=\"editable\">\n\t\t\t\t\t<button type=\"button\" @click=\"$refs.blocks.undo()\" :disabled=\"!canUndo\" title=\"Revert last change\"><i class=\"fas fa-undo-alt\"></i></button>\n\t\t\t\t\t<button type=\"button\" @click=\"$refs.blocks.redo()\" :disabled=\"!canRedo\" title=\"Redo last reverted change\"><i class=\"fas fa-redo-alt\"></i></button>\n\t\t\t\t\t<button type=\"button\" @click=\"$refs.blocks.deleteSelected()\" :disabled=\"!hasSelection\" title=\"Delete selected elements\"><i class=\"fas fa-trash\"></i></button>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"sepr\" v-if=\"editable\">\n\t\t\t\t\t<button type=\"button\" v-if=\"!parent\" @click=\"() => editProcess(value)\" title=\"Edit Process Metadata\"><i class=\"fas fa-edit\"></i></button>\n\t\t\t\t\t<button type=\"button\" @click=\"addParameter\" title=\"Add Parameter\"><i class=\"fas fa-parking\"></i></button>\n\t\t\t\t\t<button type=\"button\" v-if=\"supportsMath\" :class=\"{highlightFormula: isMath}\" @click=\"showExpressionModal\" title=\"Insert/Edit formula\"><i class=\"fas fa-square-root-alt\"></i></button>\n\t\t\t\t</span>\n\t\t\t\t<button type=\"button\" @click=\"$refs.blocks.toggleCompact()\" :class=\"{compactMode: compactMode}\" title=\"Compact Mode\"><i class=\"fas fa-compress-arrows-alt\"></i></button>\n\t\t\t\t<button type=\"button\" @click=\"$refs.blocks.perfectScale()\" title=\"Scale to perfect size\"><i class=\"fas fa-arrows-alt\"></i></button>\n\t\t\t\t<FullscreenButton :element=\"() => this.$refs.visualEditor\" @changed=\"enabled => {this.$refs.blocks.perfectScale(); isFullScreen = enabled}\" />\n\t\t\t\t<slot name=\"toolbar\"></slot>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"editorSplitter\">\n\t\t\t<DiscoveryToolbar v-if=\"(showDiscoveryToolbar || isFullScreen) && editable\" class=\"discoveryToolbar\" :onAddProcess=\"insertProcess\" />\n\t\t\t<div class=\"graphBuilder\" @drop=\"onDrop\" @dragover=\"allowDrop\">\n\t\t\t\t<ModelBuilder\n\t\t\t\t\tref=\"blocks\"\n\t\t\t\t\t:editable=\"editable\"\n\t\t\t\t\t:id=\"id\"\n\t\t\t\t\t:processes=\"processes\"\n\t\t\t\t\t:collections=\"collections\"\n\t\t\t\t\t:parent=\"parent\"\n\t\t\t\t\t:parentSchema=\"parentSchema\"\n\t\t\t\t\t:value=\"value\"\n\t\t\t\t\t@input=\"commit\"\n\t\t\t\t\t@error=\"errorHandler\"\n\t\t\t\t\t@showProcess=\"(id, namespace) => emit('showProcess', {id, namespace})\"\n\t\t\t\t\t@showCollection=\"id => emit('showCollection', id)\"\n\t\t\t\t\t@showParameter=\"param => emit('showProcessParameter', param)\"\n\t\t\t\t\t@editParameter=\"editParameter\"\n\t\t\t\t\t@editArguments=\"openArgumentEditor\"\n\t\t\t\t\t@compactMode=\"compact => this.compactMode = compact\"\n\t\t\t\t\t@selectionChanged=\"selectionChanged\"\n\t\t\t\t\t@historyChanged=\"historyChanged\"\n\t\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport ModelBuilder from '@openeo/vue-components/components/ModelBuilder.vue';\nimport Utils from '../utils.js';\nimport DiscoveryToolbar from './DiscoveryToolbar.vue';\nimport EventBusMixin from './EventBusMixin.vue';\nimport FullscreenButton from './FullscreenButton.vue';\nimport { ProcessParameter } from '@openeo/js-commons';\nimport JavaScript from '../export/javascript';\n\nexport default {\n\tname: 'VisualEditor',\n\tmixins: [EventBusMixin],\n\tcomponents: {\n\t\tModelBuilder,\n\t\tDiscoveryToolbar,\n\t\tFullscreenButton\n\t},\n\tprops: {\n\t\tid: String,\n\t\teditable: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tvalue: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => null\n\t\t},\n\t\tparent: {\n\t\t\ttype: Object,\n\t\t\tdefault: null\n\t\t},\n\t\tparentSchema: {\n\t\t\ttype: Object,\n\t\t\tdefault: null\n\t\t},\n\t\tshowDiscoveryToolbar: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String\n\t\t},\n\t\tdefaultValue: {}\n\t},\n\tcomputed: {\n\t\t...Utils.mapState(['connection', 'collections']),\n\t\t...Utils.mapGetters(['processes', 'supportsMath']),\n\t\t...Utils.mapState('editor', ['initialNode']),\n\t\tisMath() {\n\t\t\treturn (this.supportsMath && this.processes.isMath(this.value));\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcanUndo: false,\n\t\t\tcanRedo: false,\n\t\t\tcompactMode: false,\n\t\t\thasSelection: false,\n\t\t\tformula: null,\n\t\t\tisFullScreen: false\n\t\t};\n\t},\n\twatch: {\n\t\tvalue: {\n\t\t\timmediate: true,\n\t\t\thandler(value) {\n\t\t\t\tif (this.initialNode && Utils.isObject(value) && Utils.isObject(value.process_graph)) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet node = this.initialNode;\n\t\t\t\t\t\tif (node == \"1\" && Utils.size(value.process_graph)) {\n\t\t\t\t\t\t\tnode = Object.keys(value.process_graph)[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.openArgumentEditorForNode(node);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tUtils.exception(this, error);\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.setInitialNode(null);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\t...Utils.mapMutations('editor', ['setInitialNode']),\n\t\tcommit(value) {\n\t\t\t// Fix #115: Return the default value/null if no nodes are given\n\t\t\tif (typeof this.defaultValue !== 'undefined' && Utils.isObject(value) && Utils.size(value.process_graph) === 0) {\n\t\t\t\tvalue = this.defaultValue;\n\t\t\t}\n\t\t\tthis.$emit('input', value);\n\t\t},\n\t\terrorHandler(message, title = null) {\n\t\t\tUtils.exception(this, message, title)\n\t\t},\n\t\tselectionChanged(blocks, edges) {\n\t\t\tthis.hasSelection = Boolean(blocks.filter(block => block.$el.allowsDelete).length || edges.length);\n\t\t},\n\t\thistoryChanged(history, index) {\n\t\t\tthis.canUndo = !!history[index-1];\n\t\t\tthis.canRedo = !!history[index+1];\n\t\t},\n\t\tallowDrop(event) {\n\t\t\tevent.preventDefault();\n\t\t},\n\t\tonDrop(event) {\n\t\t\tvar editorNodeJson = event.dataTransfer.getData(\"application/vnd.openeo-node\");\n\t\t\tif (editorNodeJson) {\n\t\t\t\tlet node = JSON.parse(editorNodeJson);\n\t\t\t\tthis.insertProcess(node, event.pageX, event.pageY);\n\t\t\t\treturn event.preventDefault();\n\t\t\t}\n\n\t\t\t// Read a JSON file that has been dropped\n\t\t\tlet files = event.dataTransfer.files;\n\t\t\tif (files.length === 1) {\n\t\t\t\tlet file = event.dataTransfer.files[0];\n\t\t\t\tif (file.type === 'application/json') {\n\t\t\t\t\tvar reader = new FileReader();\n\t\t\t\t\treader.onload = async e => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tlet process = JSON.parse(e.target.result);\n\t\t\t\t\t\t\tawait this.$refs.blocks.import(process);\n\t\t\t\t\t\t} catch(error) {\n\t\t\t\t\t\t\tUtils.exception(this, error, \"Parsing JSON file failed\");\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\treader.onerror = error => Utils.exception(this, error, \"Reading JSON file failed\");\n\t\t\t\t\treader.readAsText(file, \"UTF-8\");\n\t\t\t\t\treturn event.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tgetNameField(value = undefined, name = \"name\") {\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname,\n\t\t\t\tdescription: 'A unique identifier. Must contain only letters (`a`-`z`), digits (`0`-`9`) and underscores (`_`). `snake_case` is recommended.',\n\t\t\t\tlabel: 'Name',\n\t\t\t\tschema: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tpattern: '^\\\\w+$'\n\t\t\t\t},\n\t\t\t\tdefault: null\n\t\t\t};\n\t\t},\n\t\tgetDescriptionField(value = undefined, optional = false, name = \"description\", label = \"Description\") {\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname,\n\t\t\t\tdescription: 'Provides a detailed description. CommonMark (Markdown) syntax can be used for rich text formatting.',\n\t\t\t\tlabel,\n\t\t\t\toptional,\n\t\t\t\tschema: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tsubtype: 'commonmark'\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tgetOptionalField(value = undefined) {\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname: 'optional',\n\t\t\t\tlabel: 'Optional',\n\t\t\t\tdescription: 'Parameters by default are required. CHeck this option to make the parameter optional. For optional parameters a default value should be specified.',\n\t\t\t\toptional: true,\n\t\t\t\tschema: {\n\t\t\t\t\ttype: 'boolean'\n\t\t\t\t},\n\t\t\t\tdefault: false\n\t\t\t};\n\t\t},\n\t\tgetDefaultField(value = undefined) {\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname: 'default',\n\t\t\t\tlabel: 'Default Value',\n\t\t\t\tdescription: 'This value is used whenever the user of this process did not specify a value for this parameter.',\n\t\t\t\ttoggledBy: 'optional',\n\t\t\t\toptional: true,\n\t\t\t\tschema: {}\n\t\t\t};\n\t\t},\n\t\tgetExperimentalField(value = undefined) {\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname: 'experimental',\n\t\t\t\tlabel: 'Experimental',\n\t\t\t\tdescription: 'Declares that this is experimental, which means that it is unstable and likely to change.',\n\t\t\t\toptional: true,\n\t\t\t\tschema: {\n\t\t\t\t\ttype: 'boolean'\n\t\t\t\t},\n\t\t\t\tdefault: false\n\t\t\t};\n\t\t},\n\t\tgetDeprecatedField(value = undefined) {\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname: 'deprecated',\n\t\t\t\tlabel: 'Deprecated',\n\t\t\t\tdescription: 'Declares that this is deprecated with the potential to be removed in any of the next versions. It should be transitioned out of usage.',\n\t\t\t\toptional: true,\n\t\t\t\tschema: {\n\t\t\t\t\ttype: 'boolean'\n\t\t\t\t},\n\t\t\t\tdefault: false\n\t\t\t};\n\t\t},\n\t\tgetSchemaField(value = undefined, name = \"schema\", label = \"Data Types\") {\n\t\t\tlet subtype = !value ? 'openeo-datatype' : 'json-schema';\n\t\t\treturn {\n\t\t\t\tvalue,\n\t\t\t\tname,\n\t\t\t\tlabel,\n\t\t\t\tdescription: 'Allowed data type(s) as JSON Schema.',\n\t\t\t\tschema: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: 'Single data type',\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\tsubtype\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: 'Multiple data types',\n\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\tminItems: 2,\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\tsubtype\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\t\t},\n\t\teditProcess(process) {\n\t\t\tprocess = Utils.isObject(process) ? process : {};\n\t\t\tlet returns = Utils.isObject(process.returns) ? process.returns : {};\n\t\t\tvar fields = [\n\t\t\t\tthis.getNameField(process.id, 'id'),\n\t\t\t\t{\n\t\t\t\t\tvalue: process.summary,\n\t\t\t\t\tname: 'summary',\n\t\t\t\t\tdescription: 'A very short description of the process with usually less than 60 characters.',\n\t\t\t\t\tlabel: 'Summary',\n\t\t\t\t\toptional: true,\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tthis.getDescriptionField(process.description, true),\n\t\t\t\t{\n\t\t\t\t\tvalue: process.categories,\n\t\t\t\t\tname: 'categories',\n\t\t\t\t\tlabel: 'Categories',\n\t\t\t\t\toptional: true,\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tthis.getExperimentalField(process.experimental),\n\t\t\t\tthis.getDeprecatedField(process.deprecated),\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Parameters',\n\t\t\t\t\tdescription: 'The parameters can be edited directly in the \"Visual Model\" interface.',\n\t\t\t\t\tinfo: true\n\t\t\t\t},\n\t\t\t\tthis.getDescriptionField(returns.description, true, 'returns_description', 'Return Value > Description'),\n\t\t\t\tthis.getSchemaField(returns.schema, 'returns_schema', 'Return Value > Data Type'),\n\t\t\t\t{\n\t\t\t\t\tvalue: process.exceptions,\n\t\t\t\t\tname: 'exceptions',\n\t\t\t\t\tdescription: 'Declares exceptions (errors) that might occur during execution of this process. This list is just for informative purposes.\\n\\nThe keys of the object are the error codes, which should only consist of alphanumerical characters. `PascalCase` is recommended.',\n\t\t\t\t\tlabel: 'Errors',\n\t\t\t\t\toptional: true,\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\tadditionalProperties: {\n\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\"message\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\tmessage: {\n\t\t\t\t\t\t\t\t\ttitle: 'Error Message',\n\t\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdescription: {\n\t\t\t\t\t\t\t\t\ttitle: 'Description',\n\t\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\t\tsubtype: 'commonmark'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\thttp: {\n\t\t\t\t\t\t\t\t\ttitle: 'HTTP Status Code',\n\t\t\t\t\t\t\t\t\ttype: 'integer',\n\t\t\t\t\t\t\t\t\tenum: [\n\t\t\t\t\t\t\t\t\t\t400,\n\t\t\t\t\t\t\t\t\t\t500,\n\t\t\t\t\t\t\t\t\t\t501\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: process.examples,\n\t\t\t\t\tname: 'examples',\n\t\t\t\t\tlabel: 'Examples',\n\t\t\t\t\tdescription: 'Example calls for this process with specific values for the parameters (arguments) and the result (return value).',\n\t\t\t\t\toptional: true,\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\"arguments\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\t\t\ttitle: 'Title',\n\t\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\t\t\ttitle: 'Description',\n\t\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\t\tsubtype: 'commonmark'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\targuments: {\n\t\t\t\t\t\t\t\t\ttitle: 'Arguments',\n\t\t\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\t\t\tdefault: {}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\treturns: {\n\t\t\t\t\t\t\t\t\ttitle: 'Return Value'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: process.links,\n\t\t\t\t\tname: 'links',\n\t\t\t\t\tlabel: 'Links',\n\t\t\t\t\tdescription: 'Links related to this process, e.g. additional documentation.',\n\t\t\t\t\toptional: true,\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\"href\",\n\t\t\t\t\t\t\t\t\"rel\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\thref: {\n\t\t\t\t\t\t\t\t\ttitle: 'URL',\n\t\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\trel: {\n\t\t\t\t\t\t\t\t\ttitle: 'Relation',\n\t\t\t\t\t\t\t\t\tdescription: 'For examples see [IANA relation types](https://www.iana.org/assignments/link-relations/link-relations.xhtml)',\n\t\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\t\tdefault: 'about'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\t\t\ttitle: 'Title',\n\t\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttype: {\n\t\t\t\t\t\t\t\t\ttitle: 'Media Type',\n\t\t\t\t\t\t\t\t\tdescription: 'For examples see [IANA media types](https://www.iana.org/assignments/media-types/media-types.xhtml)',\n\t\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t];\n\t\t\tthis.emit('showDataForm', \"Edit Process\", fields, async data => {\n\t\t\t\tlet newData = Utils.pickFromObject(data, ['id', 'summary', 'description', 'categories', 'experimental', 'deprecated', 'exception', 'examples', 'links']);\n\t\t\t\tif (typeof newData.description === 'string' || Utils.isObject(newData.schema)) {\n\t\t\t\t\tnewData.returns = {\n\t\t\t\t\t\tdescription: data.returns_description,\n\t\t\t\t\t\tschema: data.returns_schema\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlet process = this.$refs.blocks.export(true);\n\t\t\t\tlet newProcess = Object.assign({}, process, newData);\n\t\t\t\tconst defaults = {\n\t\t\t\t\tid: \"\",\n\t\t\t\t\tsummary: \"\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tcategories: [],\n\t\t\t\t\texperimental: false,\n\t\t\t\t\tdeprecated: false,\n\t\t\t\t\texamples: [],\n\t\t\t\t\tlinks: [],\n\t\t\t\t\tprocess_graph: {},\n\t\t\t\t};\n\t\t\t\t// Clean up some defaults / empty values\n\t\t\t\tfor(let key in defaults) {\n\t\t\t\t\tif (Utils.equals(defaults[key], newProcess[key])) {\n\t\t\t\t\t\tdelete newProcess[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.commit(newProcess);\n\t\t\t});\n\t\t},\n\t\taddParameter() {\n\t\t\tvar fields = [\n\t\t\t\tthis.getNameField(),\n\t\t\t\tthis.getDescriptionField(),\n\t\t\t\tthis.getOptionalField(),\n\t\t\t\tthis.getDefaultField(),\n\t\t\t\tthis.getExperimentalField(),\n\t\t\t\tthis.getDeprecatedField(),\n\t\t\t\tthis.getSchemaField()\n\t\t\t];\n\t\t\tthis.emit('showDataForm', \"Add Parameter\", fields, async data => {\n\t\t\t\tif (typeof data.name === 'string' && data.name.length > 0) {\n\t\t\t\t\tawait this.$refs.blocks.addPgParameter(data);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\teditParameter(parameter, title = \"Edit Parameter\", saveCallback = null) {\n\t\t\tvar fields = [\n\t\t\t\tthis.getNameField(parameter.name),\n\t\t\t\tthis.getDescriptionField(parameter.description),\n\t\t\t\tthis.getOptionalField(parameter.optional),\n\t\t\t\tthis.getDefaultField(parameter.default),\n\t\t\t\tthis.getExperimentalField(parameter.experimental),\n\t\t\t\tthis.getDeprecatedField(parameter.deprecated),\n\t\t\t\tthis.getSchemaField(parameter.schema)\n\t\t\t];\n\t\t\tthis.emit('showDataForm', title, fields, saveCallback);\n\t\t},\n\t\tshowExpressionModal() {\n\t\t\tlet js = new JavaScript(this.value, this.processes, this.connection, true);\n\t\t\tjs.setCallbackParameters(this.$refs.blocks.getPgParameters().map(block => block.spec));\n\t\t\ttry {\n\t\t\t\tjs.parse();\n\t\t\t\tlet props = {\n\t\t\t\t\tprocess: js\n\t\t\t\t};\n\t\t\t\tlet events = {\n\t\t\t\t\tsave: this.insertNodes\n\t\t\t\t};\n\t\t\t\tthis.emit('showModal', 'ExpressionModal', props, events);\n\t\t\t} catch (error) {\n\t\t\t\tUtils.exception(this, error);\n\t\t\t}\n\t\t},\n\t\topenArgumentEditorForNode(nodeId) {\n\t\t\tlet process = Utils.deepClone(this.value);\n\t\t\tlet node = process.process_graph[nodeId];\n\t\t\tlet processSpec = this.processes.get(node.process_id, node.namespace);\n\t\t\tthis.openArgumentEditor(\n\t\t\t\tprocessSpec.parameters.map(p => new ProcessParameter(p)).filter(p => p.isEditable()),\n\t\t\t\tnode.arguments,\n\t\t\t\tprocessSpec.id,\n\t\t\t\ttrue,\n\t\t\t\tnull,\n\t\t\t\tdata => {\n\t\t\t\t\tObject.assign(node, {arguments: data});\n\t\t\t\t\tthis.commit(process);\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\topenArgumentEditor(parameters, data, title = \"Edit\", editable = true, selectParameterName = null, saveCallback = null, parent = null) {\n\t\t\tlet props = {\n\t\t\t\ttitle,\n\t\t\t\tparameters,\n\t\t\t\tdata,\n\t\t\t\teditable,\n\t\t\t\tselectParameterName,\n\t\t\t\tparent\n\t\t\t};\n\t\t\tlet events = {};\n\t\t\tif (typeof saveCallback === 'function') {\n\t\t\t\tevents.save = saveCallback;\n\t\t\t}\n\t\t\tthis.emit('showModal', 'ParameterModal', props, events);\n\t\t},\n\t\tconfirmClear() {\n\t\t\tvar confirmed = confirm(\"Do you really want to clear the existing model?\");\n\t\t\tif (confirmed) {\n\t\t\t\tthis.clear();\n\t\t\t}\n\t\t},\n\t\tclear() {\n\t\t\tif (this.$refs.blocks) {\n\t\t\t\tthis.$refs.blocks.clear();\n\t\t\t}\n\t\t\tthis.commit(null);\n\t\t},\n\t\tinsertProcess(node, x = null, y = null) {\n\t\t\ttry {\n\t\t\t\tvar pos = this.$refs.blocks.getPositionForPageXY(x, y);\n\t\t\t\tlet namespace = node.namespace;\n\t\t\t\tif (namespace === 'backend' || namespace === 'user') {\n\t\t\t\t\tnamespace = null;\n\t\t\t\t}\n\t\t\t\tthis.$refs.blocks.addProcess(node.process_id, node.arguments, pos, namespace);\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error);\n\t\t\t}\n\t\t},\n\t\tasync insertNodes(nodes, replace = false) {\n\t\t\treturn await this.$refs.blocks.import({\n\t\t\t\tprocess_graph: nodes\n\t\t\t}, {\n\t\t\t\tclear: replace\n\t\t\t});\n\t\t}\n\t}\n}\n</script>\n\n<style>\n.visualEditor {\n\tbackground-color: white;\n\theight: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.visualEditor .vue-component.model-builder {\n\tmin-height: 100px;\n\tmin-width: 100px;\n}\n\n.visualEditor .editorSplitter {\n\tdisplay: flex;\n\tflex-direction: row-reverse;\n\tflex-grow: 1;\n\theight: 100%;\n\toverflow: hidden;\n}\n\n.visualEditor .discoveryToolbar {\n\twidth: 25%;\n\tmin-width: 150px;\n\tborder-left: 1px solid #ddd;\n}\n.visualEditor.fullscreen .discoveryToolbar {\n\twidth: 15%;\n\tmin-width: 250px;\n}\n\n.graphBuilder {\n\theight: 100%;\n\tflex-grow: 1;\n}\n\n.visualEditor.fullscreen {\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.visualEditor.fullscreen .editorSplitter {\n\theight: 100%;\n}\n\n.compactMode {\n\tcolor: green;\n}\n\n@keyframes glowing {\n  0% {\n    box-shadow: 0 0 3px green;\n  }\n  50% {\n    box-shadow: 0 0 10px green;\n  }\n  100% {\n    box-shadow: 0 0 3px green;\n  }\n}\n\n.highlightFormula {\n    animation: glowing 1500ms infinite;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VisualEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VisualEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VisualEditor.vue?vue&type=template&id=161fe350&\"\nimport script from \"./VisualEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./VisualEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VisualEditor.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<Tabs class=\"editor\" ref=\"tabs\" id=\"customProcessContent\" position=\"bottom\">\n\t\t<Tab id=\"visual\" name=\"Visual Model\" icon=\"fa-project-diagram\" :selected=\"true\" :allowShow=\"canSwitchView\" @show=\"showModel\">\n\t\t\t<VisualEditor class=\"visualEditorTab\" ref=\"graphBuilder\" :editable=\"editable\" :parent=\"parent\" :parentSchema=\"parentSchema\" :value=\"modelValue\" @input=\"commit\" @error=\"onError\" :title=\"title\" :id=\"id + '_visual'\" :showDiscoveryToolbar=\"showDiscoveryToolbar\" :defaultValue=\"defaultValue\">\n\t\t\t\t<template #file-toolbar><slot name=\"file-toolbar\"></slot></template>\n\t\t\t\t<template #toolbar><slot name=\"toolbar\"></slot></template>\n\t\t\t</VisualEditor>\n\t\t</Tab>\n\t\t<Tab id=\"source\" name=\"Code\" icon=\"fa-code\" :allowShow=\"canSwitchView\" @show=\"showCode\">\n\t\t\t<TextEditor class=\"textEditorTab\" ref=\"sourceEditor\" :editable=\"editable\" :value=\"codeValue\" @input=\"commit\" @error=\"onError\" :title=\"title\" :id=\"id + '_text'\" language=\"processgraph\">\n\t\t\t\t<template #file-toolbar><slot name=\"file-toolbar\"></slot></template>\n\t\t\t\t<template #toolbar><slot name=\"toolbar\"></slot></template>\n\t\t\t</TextEditor>\n\t\t</Tab>\n\t</Tabs>\n</template>\n\n<script>\nimport Utils from '../utils.js';\nimport Tabs from '@openeo/vue-components/components/Tabs.vue';\nimport Tab from '@openeo/vue-components/components/Tab.vue';\nimport VisualEditor from './VisualEditor.vue';\nimport TextEditor from './TextEditor.vue';\n\nexport default {\n\tname: 'Editor',\n\tcomponents: {\n\t\tVisualEditor,\n\t\tTextEditor,\n\t\tTabs,\n\t\tTab\n\t},\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\tdefault: () => `editor_${Date.now()}`\n\t\t},\n\t\teditable: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tvalue: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => null\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String\n\t\t},\n\t\tparent: {\n\t\t\ttype: Object,\n\t\t\tdefault: null\n\t\t},\n\t\tparentSchema: {\n\t\t\ttype: Object,\n\t\t\tdefault: null\n\t\t},\n\t\tshowDiscoveryToolbar: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tdefaultValue: {}\n\t},\n\twatch: {\n\t\tvalue() {\n\t\t\tthis.updateTab();\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmodelValue: null,\n\t\t\tcodeValue: null,\n\t\t\terror: null\n\t\t};\n\t},\n\tmounted() {\n\t\tthis.updateTab();\n\t},\n\tmethods: {\n\t\t...Utils.mapActions(['loadProcess']),\n\t\tshowModel() {\n\t\t\tthis.error = null;\n\t\t\tthis.modelValue = this.value;\n\t\t},\n\t\tshowCode() {\n\t\t\tthis.error = null;\n\t\t\tthis.codeValue = this.value;\n\t\t\tthis.$refs.sourceEditor.updateState();\n\t\t},\n\t\tupdateTab() {\n\t\t\tif (this.$refs.tabs.getActiveTabId() === 'source') {\n\t\t\t\tthis.showCode();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.showModel();\n\t\t\t}\n\t\t},\n\t\tcommit(value) {\n\t\t\tthis.error = null;\n\t\t\tthis.$emit('input', value);\n\t\t},\n\t\tonError(error) {\n\t\t\tthis.error = error;\n\t\t},\n\t\tactiveEditor() {\n\t\t\tif (this.$refs.tabs.getActiveTabId() === 'source') {\n\t\t\t\treturn this.$refs.sourceEditor;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn this.$refs.graphBuilder;\n\t\t\t}\n\t\t},\n\t\tasync insertProcess(node) {\n\t\t\ttry {\n\t\t\t\tawait this.loadProcess({id: node.process_id, namespace: node.namespace});\n\t\t\t\tthis.activeEditor().insertProcess(node);\n\t\t\t} catch(error) {\n\t\t\t\tUtils.exception(this, error);\n\t\t\t}\n\t\t},\n\t\tcanSwitchView() {\n\t\t\tif (this.editable && this.error !== null) {\n\t\t\t\tUtils.exception(this, this.error, 'Process Invalid Error');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.editor {\n\t&.vue-component.tabs.boxed > .tabsBody > .tabContent {\n\t\toverflow: hidden;\n\t}\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Editor.vue?vue&type=template&id=c197c472&\"\nimport script from \"./Editor.vue?vue&type=script&lang=js&\"\nexport * from \"./Editor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Editor.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Utils from \"../utils\";\nimport Exporter from \"./exporter\";\nimport { Formula } from '@openeo/js-client';\n\nconst KEYWORDS = [\n\t\"abstract\",\n\t\"arguments\",\n\t\"await\",\n\t\"boolean\",\n\t\"break\",\n\t\"byte\",\n\t\"case\",\n\t\"catch\",\n\t\"char\",\n\t\"class\",\n\t\"const\",\n\t\"continue\",\n\t\"debugger\",\n\t\"default\",\n\t\"delete\",\n\t\"do\",\n\t\"double\",\n\t\"else\",\n\t\"enum\",\n\t\"eval\",\n\t\"export\",\n\t\"extends\",\n\t\"false\",\n\t\"final\",\n\t\"finally\",\n\t\"float\",\n\t\"for\",\n\t\"function\",\n\t\"goto\",\n\t\"if\",\n\t\"implements\",\n\t\"import\",\n\t\"in\",\n\t\"instanceof\",\n\t\"int\",\n\t\"interface\",\n\t\"let\",\n\t\"long\",\n\t\"native\",\n\t\"new\",\n\t\"null\",\n\t\"package\",\n\t\"private\",\n\t\"protected\",\n\t\"public\",\n\t\"return\",\n\t\"short\",\n\t\"static\",\n\t\"super\",\n\t\"switch\",\n\t\"synchronized\",\n\t\"this\",\n\t\"throw\",\n\t\"throws\",\n\t\"transient\",\n\t\"true\",\n\t\"try\",\n\t\"typeof\",\n\t\"var\",\n\t\"void\",\n\t\"volatile\",\n\t\"while\",\n\t\"with\",\n\t\"yield\",\n\t// specific to this generator\n\t\"builder\",\n\t\"connection\",\n\t\"formula\",\n\t\"openeo\",\n\t\"result\"\n];\n\nexport default class JavaScript extends Exporter {\n\n\tconstructor(process, registry, connection, generateFormula = false) {\n\t\tsuper(process, registry, connection);\n\t\tthis.generateFormula = generateFormula;\n\t}\n\n\tcreateProcessGraphInstance(process) {\n\t\tlet pg = new JavaScript(process, this.processRegistry, this.getJsonSchemaValidator(), this.generateFormula);\n\t\treturn this.copyProcessGraphInstanceProperties(pg);\n\t}\n\n\tparse() {\n\t\tif (this.parsed) {\n\t\t\treturn;\n\t\t}\n\t\tsuper.parse();\n\t}\n\n\tgetKeywords() {\n\t\treturn KEYWORDS;\n\t}\n\n\tcomment(comment) {\n\t\tthis.addCode(comment, '// ');\n\t}\n\n\tgenerateImports() {\n\t\tthis.addCode(`import { OpenEO, Formula } from '@openeo/js-client';`);\n\t}\n\n\tgenerateConnection() {\n\t\tthis.addCode(`let connection = await OpenEO.connect('${this.getServerUrl()}');`);\n\t}\n\n\tgenerateAuthentication() {\n\t\tthis.comment(`ToDo: Here you need to add your authentication steps`);\n\t}\n\n\tgenerateBuilder() {\n\t\tthis.addCode(`let builder = await connection.buildProcess();`);\n\t}\n\n\tgenerateMetadataEntry(key, value) {\n\t\tthis.addCode(`builder.${key} = ${this.e(value)};`);\n\t}\n\n\tasync generateFunction(node) {\n\t\tlet variable = this.var(node.id);\n\t\tlet builderName = node.getParent() ? 'this' : 'builder';\n\t\tlet args = await this.generateArguments(node, !node.namespace);\n\n\t\tthis.comment(node.description);\n\t\tif (Utils.isObject(args)) {\n\t\t\tlet processId = node.namespace ? `${node.process_id}@${node.namespace}` : node.process_id;\n\t\t\tthis.addCode(`let ${variable} = ${builderName}.process(\"${processId}\", ${this.e(args)});`);\n\t\t}\n\t\telse {\n\t\t\tthis.addCode(`let ${variable} = ${builderName}.${node.process_id}(${args.map(arg => this.e(arg)).join(', ')});`);\n\t\t}\n\t}\n\n\tgenerateMissingParameter(parameter) {\n\t\tthis.comment(parameter.description);\n\t\tlet paramName = this.var(parameter.name, 'param');\n\t\tlet value = typeof parameter.default !== 'undefined' ? parameter.default : null;\n\t\tthis.addCode(`let ${paramName} = ${this.e(value)};`);\n\t}\n\n\tasync generateCallback(callback, parameters, variable) {\n\t\tif (this.generateFormula && callback && callback.isMath()) {\n\t\t\tlet formula = callback.toFormulaString();\n\t\t\tlet escaped = JSON.stringify(formula);\n\t\t\treturn `new Formula(${escaped})`;\n\t\t}\n\t\telse {\n\t\t\tlet params = this.generateFunctionParams(parameters);\n\t\t\tthis.newLine();\n\t\t\tthis.addCode(`let ${variable} = function(${params.join(', ')}) {`);\n\t\t\tthis.indent++;\n\t\t\tthis.addCode(await callback.toCode(true));\n\t\t\tthis.indent--;\n\t\t\tthis.addCode(`}`);\n\t\t}\n\t}\n\n\tgenerateResult(resultNode, callback) {\n\t\tif (!resultNode) {\n\t\t\treturn;\n\t\t}\n\t\tlet variable = this.var(resultNode.id);\n\t\tif (callback) {\n\t\t\tthis.addCode(`return ${variable};`);\n\t\t}\n\t\telse {\n\t\t\tthis.addCode(`let result = await connection.computeResult(${variable});`);\n\t\t}\n\t}\n\n\ttoFormulaString() {\n\t\tif (this.isMath()) {\n\t\t\treturn this.nodeToFormula(this.getResultNode());\n\t\t}\n\t\telse {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tgetArrayElementPlaceholder(node) {\n\t\tif (node.process_id === 'array_element') {\n\t\t\tif (node.getArgumentType('data') === 'parameter') {\n\t\t\t\tlet parameter = node.getRawArgument('data').from_parameter;\n\t\t\t\tlet index = this.getCallbackParameters().findIndex(param => param.name === parameter);\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\treturn '$'.repeat(index+1) + (node.getArgument('label') || node.getArgument('index'));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tnodeToFormula(node, parentOperator = null) {\n\t\tif (node.process_id === 'array_element') {\n\t\t\tlet arrayElement = this.getArrayElementPlaceholder(node);\n\t\t\tif (arrayElement) {\n\t\t\t\treturn arrayElement;\n\t\t\t}\n\t\t}\n\n\t\tlet operator = Formula.reverseOperatorMapping[node.process_id];\n\t\tlet process = this.processRegistry.get(node.process_id);\n\t\tlet isArrayData = (typeof Formula.arrayOperatorMapping[node.process_id] !== 'undefined');\n\n\t\tlet convertValue = value => {\n\t\t\tif (Utils.isObject(value)) {\n\t\t\t\tif (value.from_node) {\n\t\t\t\t\tlet refNode = node.getProcessGraph().getNode(value.from_node);\n\t\t\t\t\tif (refNode) {\n\t\t\t\t\t\tvalue = this.nodeToFormula(refNode, operator);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvalue = '#' + value.from_node;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (value.from_parameter) {\n\t\t\t\t\tvalue = value.from_parameter;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthrow new Error('Objects not allowed');\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn value;\n\t\t};\n\n\t\t// Create the list of arguments\n\t\tlet argList = [];\n\t\tlet params = Array.isArray(process.parameters) ? process.parameters : [];\n\t\tfor(let parameter of params) {\n\t\t\tlet value = convertValue(node.getRawArgument(parameter.name));\n\n\t\t\tif (isArrayData && Array.isArray(value) && parameter.name === 'data') {\n\t\t\t\targList = value.map(v => convertValue(v));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse if(typeof value !== 'undefined') {\n\t\t\t\targList.push(value);\n\t\t\t}\n\t\t\telse if(typeof parameter.default !== 'undefined') {\n\t\t\t\targList.push(parameter.default);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthrow new Error('Argument for parameter \"' + parameter.name + '\" missing');\n\t\t\t}\n\t\t}\n\t\t \n\t\t // Filter null values for array data to handle ignore_nodata\n\t\tif (isArrayData) {\n\t\t\targList = argList.filter(v => v !== null);\n\t\t}\n\n\t\tif (operator) {\n\t\t\tlet strongOps = ['/', '*']; // \"Punktrechnung\" vor\n\t\t\tlet weakOps = ['-', '+']; // \"Strichrechung\"\n\t\t\tlet formula = argList\n\t\t\t\t.map(v => v < 0 ? '(' + v + ')' : v) // Put negative values in brackets\n\t\t\t\t.join(operator); // Merge everything together\n\t\t\t\n\t\t\t// Check whether brackets are required\n\t\t\tif (\n\t\t\t\t// No brackets on top-level\n\t\t\t\t!parentOperator\n\t\t\t\t// If operators are both weak, no brackets required\n\t\t\t\t|| (weakOps.includes(parentOperator) && weakOps.includes(operator))\n\t\t\t\t// If operators are both strong, no brackets required -> not correct, x/(a*b) needs it, see https://github.com/Open-EO/openeo-web-editor/issues/235\n//\t\t\t\t|| (strongOps.includes(parentOperator) && strongOps.includes(operator))\n\t\t\t\t// No brackets required for power, it's the strongest operation\n\t\t\t\t|| operator === '^'\n\t\t\t\t// If the parent operation is a weak operation (+/-) and this is a strong operation, no brackets required\n\t\t\t\t|| (weakOps.includes(parentOperator) && strongOps.includes(operator))\n\t\t\t) {\n\t\t\t\treturn formula;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn '(' + formula + ')';\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\treturn node.process_id + '(' + argList.join(', ') + ')';\n\t\t}\n\t}\n\n}"],"sourceRoot":""}